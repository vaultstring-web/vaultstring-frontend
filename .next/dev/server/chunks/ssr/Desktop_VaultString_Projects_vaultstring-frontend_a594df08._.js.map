{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gondwe/Desktop/VaultString/Projects/vaultstring-frontend/src/components/dashboard/Dashboard.tsx"],"sourcesContent":["// src/components/dashboard/Dashboard.tsx\r\n'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { \r\n  ArrowUpRight, \r\n  ArrowDownLeft, \r\n  TrendingUp,\r\n  Clock,\r\n  ArrowRightLeft,\r\n  RefreshCw,\r\n  Coins\r\n} from 'lucide-react';\r\nimport { UserProfile, WalletStats, Transaction } from '@/src/types/types';\r\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\nimport { EXCHANGE_RATE_MWK_TO_CNY, EXCHANGE_RATE_CNY_TO_MWK } from '@/src/lib/constants';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\nimport { format } from 'date-fns';\r\n\r\n\r\ninterface DashboardProps {\r\n  user: UserProfile;\r\n  wallet: WalletStats;\r\n  recentTransactions: Transaction[];\r\n}\r\n\r\nconst Dashboard: React.FC<DashboardProps> = ({ user, wallet, recentTransactions }) => {\r\n  const [convertAmount, setConvertAmount] = useState<number | ''>(1000000);\r\n  const [conversionDirection, setConversionDirection] = useState<'MWK_TO_CNY' | 'CNY_TO_MWK'>('MWK_TO_CNY');\r\n  const router = useRouter();\r\n\r\n  // Currency Converter Logic\r\n  const getConversionResult = () => {\r\n    if (!convertAmount) return '0.00';\r\n    if (conversionDirection === 'MWK_TO_CNY') {\r\n      return (convertAmount * EXCHANGE_RATE_MWK_TO_CNY).toFixed(2);\r\n    } else {\r\n      return (convertAmount * EXCHANGE_RATE_CNY_TO_MWK).toFixed(2);\r\n    }\r\n  };\r\n\r\n  const toggleDirection = () => {\r\n    setConversionDirection(prev => prev === 'MWK_TO_CNY' ? 'CNY_TO_MWK' : 'MWK_TO_CNY');\r\n  };\r\n  \r\n  // Mock data for chart\r\n  const chartData = [\r\n    { name: 'Mon', balance: 650000 },\r\n    { name: 'Tue', balance: 590000 },\r\n    { name: 'Wed', balance: 800000 },\r\n    { name: 'Thu', balance: 750000 },\r\n    { name: 'Fri', balance: 820000 },\r\n    { name: 'Sat', balance: 900000 },\r\n    { name: 'Sun', balance: 854000 },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6 animate-in fade-in duration-500\">\r\n      \r\n      {/* Top Row: Balance & Actions */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Main Balance Card - Takes 2/3 on Desktop */}\r\n        <div className=\"lg:col-span-2 bg-linear-to-r from-slate-900 to-slate-800 rounded-2xl p-6 text-white shadow-lg relative overflow-hidden flex flex-col justify-between\">\r\n          <div className=\"absolute top-0 right-0 p-8 opacity-10\">\r\n            <div className=\"text-9xl font-bold\">¥</div>\r\n          </div>\r\n          <div className=\"relative z-10\">\r\n            <h2 className=\"text-slate-300 text-sm font-medium mb-1\">Total Available Balance</h2>\r\n            <div className=\"flex items-baseline gap-2 mb-6\">\r\n              <span className=\"text-4xl font-bold\">MWK {wallet.balanceMWK.toLocaleString()}</span>\r\n            </div>\r\n            <div className=\"flex flex-wrap gap-3\">\r\n              <Link\r\n                href=\"/dashboard/send-money\"\r\n                className=\"bg-green-500 hover:bg-green-600 text-slate-900 px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 shadow-sm\"\r\n              >\r\n                <ArrowUpRight size={18} /> Send Money\r\n              </Link>\r\n              <Link\r\n                href=\"/dashboard/wallet\"\r\n                className=\"bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 backdrop-blur-sm\"\r\n              >\r\n                <ArrowDownLeft size={18} /> Add Funds\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Rate Info Card - Takes 1/3 on Desktop */}\r\n        <div className=\"bg-white rounded-xl p-6 shadow-sm border border-slate-200 flex flex-col justify-between\">\r\n          <div>\r\n             <h3 className=\"font-semibold text-slate-800 flex items-center gap-2 mb-4\">\r\n               <Coins size={20} className=\"text-green-600\" />\r\n               Current Rate\r\n             </h3>\r\n             <div className=\"space-y-4\">\r\n               <div className=\"flex justify-between items-center pb-3 border-b border-slate-50\">\r\n                 <span className=\"text-slate-500\">1 MWK =</span>\r\n                 <span className=\"font-mono font-medium text-slate-900\">{EXCHANGE_RATE_MWK_TO_CNY} CNY</span>\r\n               </div>\r\n               <div className=\"flex justify-between items-center\">\r\n                 <span className=\"text-slate-500\">1 CNY =</span>\r\n                 <span className=\"font-mono font-medium text-slate-900\">{EXCHANGE_RATE_CNY_TO_MWK.toFixed(2)} MWK</span>\r\n               </div>\r\n             </div>\r\n          </div>\r\n          <div className=\"mt-4 pt-4 border-t border-slate-100\">\r\n             <p className=\"text-xs text-slate-400\">Last updated: 2 mins ago</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Currency Converter Section */}\r\n      <div className=\"bg-white p-6 rounded-xl shadow-sm border border-slate-200\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h3 className=\"font-semibold text-slate-800 flex items-center gap-2\">\r\n            <RefreshCw size={20} className=\"text-slate-400\" />\r\n            Currency Converter\r\n          </h3>\r\n          <div className=\"flex gap-2\">\r\n            <button className=\"text-sm text-green-600 hover:bg-green-50 px-3 py-1 rounded-md transition-colors\">\r\n              Set Alert\r\n            </button>\r\n            <Link\r\n              href=\"/dashboard/transactions\"\r\n              className=\"text-sm text-slate-500 hover:bg-slate-50 px-3 py-1 rounded-md transition-colors\"\r\n            >\r\n              View History\r\n            </Link>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-7 gap-4 items-center bg-slate-50 p-6 rounded-xl border border-slate-100\">\r\n          \r\n          {/* FROM Section */}\r\n          <div className=\"md:col-span-3 space-y-2\">\r\n            <label className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider\">From</label>\r\n            <div className=\"flex bg-white border border-slate-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-green-500\">\r\n              <div className=\"bg-slate-100 px-3 py-3 border-r border-slate-300 flex items-center font-medium text-slate-700 min-w-16 justify-center\">\r\n                {conversionDirection === 'MWK_TO_CNY' ? 'MWK' : 'CNY'}\r\n              </div>\r\n              <input\r\n                type=\"number\"\r\n                value={convertAmount}\r\n                onChange={(e) => setConvertAmount(e.target.value ? parseFloat(e.target.value) : '')}\r\n                className=\"w-full px-4 py-3 outline-none text-slate-900 font-semibold\"\r\n                placeholder=\"0.00\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Switcher */}\r\n          <div className=\"md:col-span-1 flex justify-center py-2 md:py-0\">\r\n            <button \r\n              onClick={toggleDirection}\r\n              className=\"p-3 bg-white border border-slate-200 rounded-full hover:bg-green-50 hover:text-green-600 hover:border-green-200 transition-all shadow-sm group\"\r\n            >\r\n              <ArrowRightLeft size={20} className=\"group-hover:rotate-180 transition-transform duration-300\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* TO Section */}\r\n          <div className=\"md:col-span-3 space-y-2\">\r\n            <label className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider\">To</label>\r\n             <div className=\"flex bg-slate-200 border border-slate-300 rounded-lg overflow-hidden\">\r\n              <div className=\"bg-slate-300 px-3 py-3 border-r border-slate-300 flex items-center font-medium text-slate-700 min-w-16 justify-center\">\r\n                {conversionDirection === 'MWK_TO_CNY' ? 'CNY' : 'MWK'}\r\n              </div>\r\n              <div className=\"w-full px-4 py-3 text-slate-900 font-bold bg-slate-100 flex items-center\">\r\n                 {getConversionResult()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chart & Activity Grid */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Quick Stats Chart */}\r\n        <div className=\"lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-slate-200\">\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <h3 className=\"font-semibold text-slate-800 flex items-center gap-2\">\r\n              <TrendingUp size={20} className=\"text-slate-400\" />\r\n              Balance History\r\n            </h3>\r\n            <select className=\"text-sm border-slate-200 rounded-md text-slate-500 focus:ring-green-500 focus:border-green-500\">\r\n              <option>Last 7 Days</option>\r\n              <option>Last 30 Days</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"h-64 w-full\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <AreaChart data={chartData} margin={{ top: 10, right: 0, left: 0, bottom: 0 }}>\r\n                <defs>\r\n                  <linearGradient id=\"colorBalance\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                    <stop offset=\"5%\" stopColor=\"#22c55e\" stopOpacity={0.1}/>\r\n                    <stop offset=\"95%\" stopColor=\"#22c55e\" stopOpacity={0}/>\r\n                  </linearGradient>\r\n                </defs>\r\n                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#f1f5f9\" />\r\n                <XAxis dataKey=\"name\" axisLine={false} tickLine={false} tick={{fill: '#94a3b8', fontSize: 12}} dy={10} />\r\n                <YAxis axisLine={false} tickLine={false} tick={{fill: '#94a3b8', fontSize: 12}} tickFormatter={(value) => `${value/1000}k`} />\r\n                <Tooltip \r\n                  contentStyle={{ borderRadius: '8px', border: 'none', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)' }}\r\n                  formatter={(value: number) => [`MWK ${value.toLocaleString()}`, 'Balance']}\r\n                />\r\n                <Area type=\"monotone\" dataKey=\"balance\" stroke=\"#22c55e\" strokeWidth={2} fillOpacity={1} fill=\"url(#colorBalance)\" />\r\n              </AreaChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Recent Transactions List */}\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col\">\r\n          <div className=\"p-6 border-b border-slate-100 flex justify-between items-center shrink-0\">\r\n            <h3 className=\"font-semibold text-slate-800 flex items-center gap-2\">\r\n              <Clock size={20} className=\"text-slate-400\" />\r\n              Recent Activity\r\n            </h3>\r\n            <Link\r\n              href=\"/dashboard/transactions\"\r\n              className=\"text-sm text-green-600 hover:text-green-700 font-medium\"\r\n            >\r\n              View All\r\n            </Link>\r\n          </div>\r\n          <div className=\"overflow-y-auto flex-1 p-0\">\r\n            <div className=\"divide-y divide-slate-100\">\r\n              {recentTransactions.slice(0, 5).map((txn) => (\r\n                <div key={txn.id} className=\"p-4 hover:bg-slate-50 transition-colors flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <div className={`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${\r\n                      txn.type === 'deposit' ? 'bg-green-100 text-green-600' : 'bg-slate-100 text-slate-600'\r\n                    }`}>\r\n                      {txn.type === 'deposit' ? <ArrowDownLeft size={18} /> : <ArrowUpRight size={18} />}\r\n                    </div>\r\n                    <div className=\"min-w-0\">\r\n                      <p className=\"font-medium text-slate-900 truncate\">{txn.merchantName}</p>\r\n                      <p className=\"text-xs text-slate-500\">\r\n                        {format(new Date(txn.date), 'MM/dd/yyyy')}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"text-right shrink-0\">\r\n                    <p className={`font-medium ${txn.type === 'deposit' ? 'text-green-600' : 'text-slate-900'}`}>\r\n                      {txn.type === 'deposit' ? '+' : '-'} {txn.amountMWK.toLocaleString(undefined, { maximumFractionDigits: 0 })}\r\n                    </p>\r\n                    {txn.amountCNY > 0 && (\r\n                      <p className=\"text-xs text-slate-500\">¥ {txn.amountCNY.toLocaleString()}</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 863, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gondwe/Desktop/VaultString/Projects/vaultstring-frontend/app/dashboard/page.tsx"],"sourcesContent":["// app/dashboard/page.tsx\n'use client';\n\nimport { useEffect, useMemo, useState } from 'react';\nimport Dashboard from '@/src/components/dashboard/Dashboard';\nimport { EXCHANGE_RATE_MWK_TO_CNY, EXCHANGE_RATE_CNY_TO_MWK } from '@/src/lib/constants';\nimport { apiFetch, isAuthenticated } from '@/src/lib/api/api-client';\nimport { useAuth } from '@/src/context/AuthContext';\n\nexport default function DashboardPage() {\n  const { user } = useAuth();\n  const [wallets, setWallets] = useState<any[]>([]);\n  const [payments, setPayments] = useState<any[]>([]);\n  const [rates, setRates] = useState<{ mwkToCny?: number; cnyToMwk?: number }>({});\n\n  useEffect(() => {\n    let mounted = true;\n    if (!isAuthenticated()) return;\n    (async () => {\n      try {\n        const [wRes, pRes, rRes] = await Promise.all([\n          apiFetch('/wallets').catch(() => null),\n          apiFetch('/payments?limit=20&offset=0').catch(() => null),\n          apiFetch('/forex/rate/MWK/CNY').catch(() => null),\n        ]);\n        if (!mounted) return;\n        setWallets(Array.isArray(wRes?.wallets) ? wRes.wallets : []);\n        setPayments(Array.isArray(pRes?.transactions) ? pRes.transactions : []);\n        const rate = typeof rRes?.rate === 'number' ? rRes.rate : EXCHANGE_RATE_MWK_TO_CNY;\n        setRates({ mwkToCny: rate, cnyToMwk: rate ? 1 / rate : EXCHANGE_RATE_CNY_TO_MWK });\n      } catch {}\n    })();\n    return () => { mounted = false; };\n  }, []);\n\n  const walletStats = useMemo(() => {\n    const totalMWK = wallets.reduce((sum, w) => {\n      const bal = parseFloat(String(w.available_balance ?? w.balance ?? 0));\n      if (String(w.currency).toUpperCase() === 'MWK') return sum + bal;\n      if (String(w.currency).toUpperCase() === 'CNY') return sum + bal * (rates.cnyToMwk || EXCHANGE_RATE_CNY_TO_MWK);\n      if (String(w.currency).toUpperCase() === 'USD') return sum + bal * 1745;\n      return sum + bal;\n    }, 0);\n    return {\n      balanceMWK: Math.round(totalMWK),\n      lastDepositDate: new Date().toISOString().slice(0, 10),\n      monthlyLimit: 5000000,\n      spentThisMonth: Math.round(totalMWK * 0.15),\n    };\n  }, [wallets, rates]);\n\n  const recentTransactions = useMemo(() => {\n    return payments.map((t: any) => ({\n      id: String(t.id || t.reference || Math.random()),\n      date: String(t.created_at || t.initiated_at || new Date().toISOString()),\n      merchantName: String(t.description || t.category || 'Payment'),\n      merchantId: String(t.receiver_id || ''),\n      amountMWK: Math.round(parseFloat(String(t.net_amount ?? t.amount ?? 0)) * (String(t.currency).toUpperCase() === 'CNY' ? (rates.cnyToMwk || EXCHANGE_RATE_CNY_TO_MWK) : 1)),\n      amountCNY: Math.round(parseFloat(String(t.converted_amount ?? 0))),\n      exchangeRate: Number(rates.mwkToCny || EXCHANGE_RATE_MWK_TO_CNY),\n      status: (String(t.status || 'completed') as any),\n      type: 'payment',\n    }));\n  }, [payments, rates]);\n\n  return (\n    <Dashboard \n      user={user ?? { name: 'User', email: '', phone: '', kycStatus: 'verified', avatarUrl: '/icons/avatar-default.png' }} \n      wallet={walletStats} \n      recentTransactions={recentTransactions} \n    />\n  );\n}"],"names":[],"mappings":"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"}}]
}