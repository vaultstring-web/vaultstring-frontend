{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gondwe/Desktop/VaultString/Projects/vaultstring-frontend/src/lib/constants.ts"],"sourcesContent":["import { Transaction, UserProfile, WalletStats } from '@/src/types/types';\n\n// Exchange Rate: 1 MWK = 0.0041 CNY (Hypothetical for demo)\nexport const EXCHANGE_RATE_MWK_TO_CNY = 0.0041;\nexport const EXCHANGE_RATE_CNY_TO_MWK = 1 / EXCHANGE_RATE_MWK_TO_CNY;\nexport const MOCK_USER: UserProfile = {\n  name: \"Chisomo Banda\",\n  email: \"chisomo.b@example.mw\",\n  phone: \"+265 99 123 4567\",\n  kycStatus: 'verified',\n  avatarUrl: \"https://picsum.photos/200/200\"\n};\n\nexport const MOCK_WALLET: WalletStats = {\n  balanceMWK: 854000.00,\n  lastDepositDate: \"2025-10-25\",\n  monthlyLimit: 5000000,\n  spentThisMonth: 1250000\n};\n\nexport const MOCK_TRANSACTIONS: Transaction[] = [\n  {\n    id: \"TXN-882910\",\n    date: \"2023-10-26T14:30:00\",\n    merchantName: \"Guangzhou Electronics Ltd\",\n    merchantId: \"M-CN-9921\",\n    amountMWK: 150000,\n    amountCNY: 615,\n    exchangeRate: 0.0041,\n    status: 'completed',\n    type: 'payment'\n  },\n  {\n    id: \"TXN-882909\",\n    date: \"2023-10-25T09:15:00\",\n    merchantName: \"Shanghai Textiles Co\",\n    merchantId: \"M-CN-4432\",\n    amountMWK: 450000,\n    amountCNY: 1845,\n    exchangeRate: 0.0041,\n    status: 'pending',\n    type: 'payment'\n  },\n  {\n    id: \"TXN-882855\",\n    date: \"2023-10-20T11:00:00\",\n    merchantName: \"Airtel Money Deposit\",\n    merchantId: \"SELF\",\n    amountMWK: 1000000,\n    amountCNY: 0,\n    exchangeRate: 1,\n    status: 'completed',\n    type: 'deposit'\n  },\n  {\n    id: \"TXN-882101\",\n    date: \"2023-10-18T16:45:00\",\n    merchantName: \"Shenzhen Parts Factory\",\n    merchantId: \"M-CN-1102\",\n    amountMWK: 200000,\n    amountCNY: 820,\n    exchangeRate: 0.0041,\n    status: 'failed',\n    type: 'payment'\n  },\n  {\n    id: \"TXN-881992\",\n    date: \"2023-10-15T08:20:00\",\n    merchantName: \"Yiwu Market Agent\",\n    merchantId: \"M-CN-5591\",\n    amountMWK: 75000,\n    amountCNY: 307.5,\n    exchangeRate: 0.0041,\n    status: 'completed',\n    type: 'payment'\n  },\n  {\n    id: \"TXN-881500\",\n    date: \"2023-10-10T10:00:00\",\n    merchantName: \"Beijing Logistics\",\n    merchantId: \"M-CN-8888\",\n    amountMWK: 300000,\n    amountCNY: 1230,\n    exchangeRate: 0.0041,\n    status: 'completed',\n    type: 'payment'\n  }\n];\n"],"names":[],"mappings":";;;;;;;;;;;;AAGO,MAAM,2BAA2B;AACjC,MAAM,2BAA2B,IAAI;AACrC,MAAM,YAAyB;IACpC,MAAM;IACN,OAAO;IACP,OAAO;IACP,WAAW;IACX,WAAW;AACb;AAEO,MAAM,cAA2B;IACtC,YAAY;IACZ,iBAAiB;IACjB,cAAc;IACd,gBAAgB;AAClB;AAEO,MAAM,oBAAmC;IAC9C;QACE,IAAI;QACJ,MAAM;QACN,cAAc;QACd,YAAY;QACZ,WAAW;QACX,WAAW;QACX,cAAc;QACd,QAAQ;QACR,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,cAAc;QACd,YAAY;QACZ,WAAW;QACX,WAAW;QACX,cAAc;QACd,QAAQ;QACR,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,cAAc;QACd,YAAY;QACZ,WAAW;QACX,WAAW;QACX,cAAc;QACd,QAAQ;QACR,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,cAAc;QACd,YAAY;QACZ,WAAW;QACX,WAAW;QACX,cAAc;QACd,QAAQ;QACR,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,cAAc;QACd,YAAY;QACZ,WAAW;QACX,WAAW;QACX,cAAc;QACd,QAAQ;QACR,MAAM;IACR;IACA;QACE,IAAI;QACJ,MAAM;QACN,cAAc;QACd,YAAY;QACZ,WAAW;QACX,WAAW;QACX,cAAc;QACd,QAAQ;QACR,MAAM;IACR;CACD"}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gondwe/Desktop/VaultString/Projects/vaultstring-frontend/src/components/dashboard/Dashboard.tsx"],"sourcesContent":["// src/components/dashboard/Dashboard.tsx\r\n'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { \r\n  ArrowUpRight, \r\n  ArrowDownLeft, \r\n  TrendingUp,\r\n  Clock,\r\n  ArrowRightLeft,\r\n  RefreshCw,\r\n  Coins\r\n} from 'lucide-react';\r\nimport { UserProfile, WalletStats, Transaction } from '@/src/types/types';\r\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\r\nimport { EXCHANGE_RATE_MWK_TO_CNY, EXCHANGE_RATE_CNY_TO_MWK } from '@/src/lib/constants';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\nimport { format } from 'date-fns';\r\n\r\n\r\ninterface DashboardProps {\r\n  user: UserProfile;\r\n  wallet: WalletStats;\r\n  recentTransactions: Transaction[];\r\n  rates?: {\r\n    mwkToCny?: number;\r\n    cnyToMwk?: number;\r\n    mwkToCnyBuy?: number;\r\n    mwkToCnySell?: number;\r\n    cnyToMwkBuy?: number;\r\n    cnyToMwkSell?: number;\r\n  };\r\n}\r\n\r\nconst Dashboard: React.FC<DashboardProps> = ({ user, wallet, recentTransactions, rates }) => {\r\n  const [convertAmount, setConvertAmount] = useState<number | ''>(1000000);\r\n  const [conversionDirection, setConversionDirection] = useState<'MWK_TO_CNY' | 'CNY_TO_MWK'>('MWK_TO_CNY');\r\n  const router = useRouter();\r\n\r\n  // Currency Converter Logic\r\n  const getConversionResult = () => {\r\n    if (!convertAmount) return '0.00';\r\n    if (conversionDirection === 'MWK_TO_CNY') {\r\n      const r = (rates?.mwkToCnySell ?? rates?.mwkToCny) ?? EXCHANGE_RATE_MWK_TO_CNY;\r\n      return (convertAmount * r).toFixed(2);\r\n    } else {\r\n      const r = (rates?.cnyToMwkBuy ?? rates?.cnyToMwk) ?? EXCHANGE_RATE_CNY_TO_MWK;\r\n      return (convertAmount * r).toFixed(2);\r\n    }\r\n  };\r\n\r\n  const toggleDirection = () => {\r\n    setConversionDirection(prev => prev === 'MWK_TO_CNY' ? 'CNY_TO_MWK' : 'MWK_TO_CNY');\r\n  };\r\n  \r\n  // Mock data for chart\r\n  const chartData = [\r\n    { name: 'Mon', balance: 650000 },\r\n    { name: 'Tue', balance: 590000 },\r\n    { name: 'Wed', balance: 800000 },\r\n    { name: 'Thu', balance: 750000 },\r\n    { name: 'Fri', balance: 820000 },\r\n    { name: 'Sat', balance: 900000 },\r\n    { name: 'Sun', balance: 854000 },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6 animate-in fade-in duration-500\">\r\n      \r\n      {/* Top Row: Balance & Actions */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Main Balance Card - Takes 2/3 on Desktop */}\r\n        <div className=\"lg:col-span-2 bg-linear-to-r from-slate-900 to-slate-800 rounded-2xl p-6 text-white shadow-lg relative overflow-hidden flex flex-col justify-between\">\r\n          <div className=\"absolute top-0 right-0 p-8 opacity-10\">\r\n            <div className=\"text-9xl font-bold\">¥</div>\r\n          </div>\r\n          <div className=\"relative z-10\">\r\n            <h2 className=\"text-slate-300 text-sm font-medium mb-1\">Total Available Balance</h2>\r\n            <div className=\"flex items-baseline gap-2 mb-6\">\r\n              <span className=\"text-4xl font-bold\">\r\n                {(() => {\r\n                  const c = wallet.primaryCurrency || 'MWK';\r\n                  const amt = c === 'CNY' ? (wallet.balanceCNY ?? 0) : c === 'USD' ? (wallet.balanceUSD ?? 0) : (wallet.balanceMWK ?? 0);\r\n                  return `${c} ${Number(amt).toLocaleString()}`;\r\n                })()}\r\n              </span>\r\n            </div>\r\n            <div className=\"flex flex-wrap gap-3 mb-4\">\r\n              {typeof wallet.balanceCNY === 'number' && (\r\n                <span className=\"bg-white/10 text-white px-3 py-1 rounded-md text-sm\">CNY {Number(wallet.balanceCNY).toLocaleString()}</span>\r\n              )}\r\n              {typeof wallet.balanceUSD === 'number' && (\r\n                <span className=\"bg-white/10 text-white px-3 py-1 rounded-md text-sm\">USD {Number(wallet.balanceUSD).toLocaleString()}</span>\r\n              )}\r\n            </div>\r\n            <div className=\"flex flex-wrap gap-3\">\r\n              <Link\r\n                href=\"/dashboard/send-money\"\r\n                className=\"bg-green-500 hover:bg-green-600 text-slate-900 px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 shadow-sm\"\r\n              >\r\n                <ArrowUpRight size={18} /> Send Money\r\n              </Link>\r\n              <Link\r\n                href=\"/dashboard/wallet\"\r\n                className=\"bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 backdrop-blur-sm\"\r\n              >\r\n                <ArrowDownLeft size={18} /> Add Funds\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Rate Info Card - Takes 1/3 on Desktop */}\r\n        <div className=\"bg-white rounded-xl p-6 shadow-sm border border-slate-200 flex flex-col justify-between\">\r\n          <div>\r\n             <h3 className=\"font-semibold text-slate-800 flex items-center gap-2 mb-4\">\r\n               <Coins size={20} className=\"text-green-600\" />\r\n               Current Rate\r\n             </h3>\r\n             <div className=\"space-y-4\">\r\n               <div className=\"pb-3 border-b border-slate-50 space-y-2\">\r\n                 <div className=\"flex justify-between items-center\">\r\n                   <span className=\"text-slate-500\">1 MWK (Buy)</span>\r\n                   <span className=\"font-mono font-medium text-slate-900\">{((rates?.mwkToCnyBuy ?? rates?.mwkToCny) ?? EXCHANGE_RATE_MWK_TO_CNY).toFixed(4)} CNY</span>\r\n                 </div>\r\n                 <div className=\"flex justify-between items-center\">\r\n                   <span className=\"text-slate-500\">1 MWK (Sell)</span>\r\n                   <span className=\"font-mono font-medium text-slate-900\">{((rates?.mwkToCnySell ?? rates?.mwkToCny) ?? EXCHANGE_RATE_MWK_TO_CNY).toFixed(4)} CNY</span>\r\n                 </div>\r\n               </div>\r\n               <div className=\"space-y-2\">\r\n                 <div className=\"flex justify-between items-center\">\r\n                   <span className=\"text-slate-500\">1 CNY (Buy)</span>\r\n                   <span className=\"font-mono font-medium text-slate-900\">{((rates?.cnyToMwkBuy ?? rates?.cnyToMwk) ?? EXCHANGE_RATE_CNY_TO_MWK).toFixed(2)} MWK</span>\r\n                 </div>\r\n                 <div className=\"flex justify-between items-center\">\r\n                   <span className=\"text-slate-500\">1 CNY (Sell)</span>\r\n                   <span className=\"font-mono font-medium text-slate-900\">{((rates?.cnyToMwkSell ?? rates?.cnyToMwk) ?? EXCHANGE_RATE_CNY_TO_MWK).toFixed(2)} MWK</span>\r\n                 </div>\r\n               </div>\r\n             </div>\r\n          </div>\r\n          <div className=\"mt-4 pt-4 border-t border-slate-100\">\r\n             <p className=\"text-xs text-slate-400\">Last updated: 2 mins ago</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Currency Converter Section */}\r\n      <div className=\"bg-white p-6 rounded-xl shadow-sm border border-slate-200\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h3 className=\"font-semibold text-slate-800 flex items-center gap-2\">\r\n            <RefreshCw size={20} className=\"text-slate-400\" />\r\n            Currency Converter\r\n          </h3>\r\n          <div className=\"flex gap-2\">\r\n            <button className=\"text-sm text-green-600 hover:bg-green-50 px-3 py-1 rounded-md transition-colors\">\r\n              Set Alert\r\n            </button>\r\n            <Link\r\n              href=\"/dashboard/transactions\"\r\n              className=\"text-sm text-slate-500 hover:bg-slate-50 px-3 py-1 rounded-md transition-colors\"\r\n            >\r\n              View History\r\n            </Link>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-7 gap-4 items-center bg-slate-50 p-6 rounded-xl border border-slate-100\">\r\n          \r\n          {/* FROM Section */}\r\n          <div className=\"md:col-span-3 space-y-2\">\r\n            <label className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider\">From</label>\r\n            <div className=\"flex bg-white border border-slate-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-green-500\">\r\n              <div className=\"bg-slate-100 px-3 py-3 border-r border-slate-300 flex items-center font-medium text-slate-700 min-w-16 justify-center\">\r\n                {conversionDirection === 'MWK_TO_CNY' ? 'MWK' : 'CNY'}\r\n              </div>\r\n              <input\r\n                type=\"number\"\r\n                value={convertAmount}\r\n                onChange={(e) => setConvertAmount(e.target.value ? parseFloat(e.target.value) : '')}\r\n                className=\"w-full px-4 py-3 outline-none text-slate-900 font-semibold\"\r\n                placeholder=\"0.00\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Switcher */}\r\n          <div className=\"md:col-span-1 flex justify-center py-2 md:py-0\">\r\n            <button \r\n              onClick={toggleDirection}\r\n              className=\"p-3 bg-white border border-slate-200 rounded-full hover:bg-green-50 hover:text-green-600 hover:border-green-200 transition-all shadow-sm group\"\r\n            >\r\n              <ArrowRightLeft size={20} className=\"group-hover:rotate-180 transition-transform duration-300\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* TO Section */}\r\n          <div className=\"md:col-span-3 space-y-2\">\r\n            <label className=\"text-xs font-semibold text-slate-500 uppercase tracking-wider\">To</label>\r\n             <div className=\"flex bg-slate-200 border border-slate-300 rounded-lg overflow-hidden\">\r\n              <div className=\"bg-slate-300 px-3 py-3 border-r border-slate-300 flex items-center font-medium text-slate-700 min-w-16 justify-center\">\r\n                {conversionDirection === 'MWK_TO_CNY' ? 'CNY' : 'MWK'}\r\n              </div>\r\n              <div className=\"w-full px-4 py-3 text-slate-900 font-bold bg-slate-100 flex items-center\">\r\n                 {getConversionResult()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chart & Activity Grid */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Quick Stats Chart */}\r\n        <div className=\"lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-slate-200\">\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <h3 className=\"font-semibold text-slate-800 flex items-center gap-2\">\r\n              <TrendingUp size={20} className=\"text-slate-400\" />\r\n              Balance History\r\n            </h3>\r\n            <select className=\"text-sm border-slate-200 rounded-md text-slate-500 focus:ring-green-500 focus:border-green-500\">\r\n              <option>Last 7 Days</option>\r\n              <option>Last 30 Days</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"h-64 w-full\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <AreaChart data={chartData} margin={{ top: 10, right: 0, left: 0, bottom: 0 }}>\r\n                <defs>\r\n                  <linearGradient id=\"colorBalance\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                    <stop offset=\"5%\" stopColor=\"#22c55e\" stopOpacity={0.1}/>\r\n                    <stop offset=\"95%\" stopColor=\"#22c55e\" stopOpacity={0}/>\r\n                  </linearGradient>\r\n                </defs>\r\n                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#f1f5f9\" />\r\n                <XAxis dataKey=\"name\" axisLine={false} tickLine={false} tick={{fill: '#94a3b8', fontSize: 12}} dy={10} />\r\n                <YAxis axisLine={false} tickLine={false} tick={{fill: '#94a3b8', fontSize: 12}} tickFormatter={(value) => `${value/1000}k`} />\r\n                <Tooltip \r\n                  contentStyle={{ borderRadius: '8px', border: 'none', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)' }}\r\n                  formatter={(value: number) => [`MWK ${value.toLocaleString()}`, 'Balance']}\r\n                />\r\n                <Area type=\"monotone\" dataKey=\"balance\" stroke=\"#22c55e\" strokeWidth={2} fillOpacity={1} fill=\"url(#colorBalance)\" />\r\n              </AreaChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Recent Transactions List */}\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col\">\r\n          <div className=\"p-6 border-b border-slate-100 flex justify-between items-center shrink-0\">\r\n            <h3 className=\"font-semibold text-slate-800 flex items-center gap-2\">\r\n              <Clock size={20} className=\"text-slate-400\" />\r\n              Recent Activity\r\n            </h3>\r\n            <Link\r\n              href=\"/dashboard/transactions\"\r\n              className=\"text-sm text-green-600 hover:text-green-700 font-medium\"\r\n            >\r\n              View All\r\n            </Link>\r\n          </div>\r\n          <div className=\"overflow-y-auto flex-1 p-0\">\r\n            <div className=\"divide-y divide-slate-100\">\r\n              {recentTransactions.slice(0, 5).map((txn) => (\r\n                <div key={txn.id} className=\"p-4 hover:bg-slate-50 transition-colors flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <div className={`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${\r\n                      txn.type === 'deposit' ? 'bg-green-100 text-green-600' : 'bg-slate-100 text-slate-600'\r\n                    }`}>\r\n                      {txn.type === 'deposit' ? <ArrowDownLeft size={18} /> : <ArrowUpRight size={18} />}\r\n                    </div>\r\n                    <div className=\"min-w-0\">\r\n                      <p className=\"font-medium text-slate-900 truncate\">{txn.merchantName}</p>\r\n                      <p className=\"text-xs text-slate-500\">\r\n                        {format(new Date(txn.date), 'MM/dd/yyyy')}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"text-right shrink-0\">\r\n                    <p className={`font-medium ${txn.type === 'deposit' ? 'text-green-600' : 'text-slate-900'}`}>\r\n                      {txn.type === 'deposit' ? '+' : '-'} {txn.amountMWK.toLocaleString(undefined, { maximumFractionDigits: 0 })}\r\n                    </p>\r\n                    {txn.amountCNY > 0 && (\r\n                      <p className=\"text-xs text-slate-500\">¥ {txn.amountCNY.toLocaleString()}</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1070, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gondwe/Desktop/VaultString/Projects/vaultstring-frontend/app/dashboard/page.tsx"],"sourcesContent":["// app/dashboard/page.tsx\n'use client';\n\nimport { useEffect, useMemo, useState } from 'react';\nimport Dashboard from '@/src/components/dashboard/Dashboard';\nimport { EXCHANGE_RATE_MWK_TO_CNY, EXCHANGE_RATE_CNY_TO_MWK } from '@/src/lib/constants';\nimport { apiFetch, isAuthenticated } from '@/src/lib/api/api-client';\nimport { useAuth } from '@/src/context/AuthContext';\nimport type { Transaction, TransactionStatus } from '@/src/types/types';\n\nexport default function DashboardPage() {\n  const { user } = useAuth();\n  const [wallets, setWallets] = useState<any[]>([]);\n  const [payments, setPayments] = useState<any[]>([]);\n  const [rates, setRates] = useState<{\n    mwkToCny?: number;\n    cnyToMwk?: number;\n    mwkToCnyBuy?: number;\n    mwkToCnySell?: number;\n    cnyToMwkBuy?: number;\n    cnyToMwkSell?: number;\n  }>({});\n\n  useEffect(() => {\n    let mounted = true;\n    if (!isAuthenticated()) return;\n    (async () => {\n      try {\n        const [wRes, pRes, rMWKCNY, rCNYMWK] = await Promise.all([\n          apiFetch('/wallets').catch(() => null),\n          apiFetch('/payments?limit=20&offset=0').catch(() => null),\n          apiFetch('/forex/rate/MWK/CNY').catch(() => null),\n          apiFetch('/forex/rate/CNY/MWK').catch(() => null),\n        ]);\n        if (!mounted) return;\n        setWallets(Array.isArray(wRes?.wallets) ? wRes.wallets : []);\n        setPayments(Array.isArray(pRes?.transactions) ? pRes.transactions : []);\n        const base = typeof rMWKCNY?.rate === 'number' ? rMWKCNY.rate : EXCHANGE_RATE_MWK_TO_CNY;\n        const buy = typeof rMWKCNY?.buy_rate === 'number' ? rMWKCNY.buy_rate : base;\n        const sell = typeof rMWKCNY?.sell_rate === 'number' ? rMWKCNY.sell_rate : base;\n        const invBase = typeof rCNYMWK?.rate === 'number' ? rCNYMWK.rate : (buy ? 1 / buy : EXCHANGE_RATE_CNY_TO_MWK);\n        const invBuy = typeof rCNYMWK?.buy_rate === 'number' ? rCNYMWK.buy_rate : invBase;\n        const invSell = typeof rCNYMWK?.sell_rate === 'number' ? rCNYMWK.sell_rate : invBase;\n        setRates({\n          mwkToCny: buy,\n          cnyToMwk: buy ? 1 / buy : EXCHANGE_RATE_CNY_TO_MWK,\n          mwkToCnyBuy: buy,\n          mwkToCnySell: sell,\n          cnyToMwkBuy: invBuy,\n          cnyToMwkSell: invSell,\n        });\n      } catch {}\n    })();\n    return () => { mounted = false; };\n  }, []);\n\n  const walletStats = useMemo(() => {\n    let totalMWK = 0;\n    let totalCNY = 0;\n    let totalUSD = 0;\n    wallets.forEach((w) => {\n      const bal = parseFloat(String(w.available_balance ?? w.balance ?? 0));\n      const cur = String(w.currency).toUpperCase();\n      if (cur === 'MWK') totalMWK += bal;\n      else if (cur === 'CNY') totalCNY += bal;\n      else if (cur === 'USD') totalUSD += bal;\n    });\n    const country = String(user?.countryCode || '').trim().toUpperCase();\n    const primaryCurrency = country === 'CN' ? 'CNY' : country === 'MW' ? 'MWK' : (String(wallets[0]?.currency || 'MWK').toUpperCase());\n    return {\n      balanceMWK: Math.round(totalMWK),\n      balanceCNY: Math.round(totalCNY),\n      balanceUSD: Math.round(totalUSD),\n      primaryCurrency: primaryCurrency as any,\n      lastDepositDate: new Date().toISOString().slice(0, 10),\n      monthlyLimit: 5000000,\n      spentThisMonth: Math.round((primaryCurrency === 'MWK' ? totalMWK : primaryCurrency === 'CNY' ? totalCNY : totalUSD) * 0.15),\n    };\n  }, [wallets, user]);\n\n  const recentTransactions: Transaction[] = useMemo(() => {\n    return payments.map((t: any) => ({\n      id: String(t.id || t.reference || Math.random()),\n      date: String(t.created_at || t.initiated_at || new Date().toISOString()),\n      merchantName: String(t.description || t.category || 'Payment'),\n      merchantId: String(t.receiver_id || ''),\n      amountMWK: Math.round(parseFloat(String(t.net_amount ?? t.amount ?? 0)) * (String(t.currency).toUpperCase() === 'CNY' ? (rates.cnyToMwk || EXCHANGE_RATE_CNY_TO_MWK) : 1)),\n      amountCNY: Math.round(parseFloat(String(t.converted_amount ?? 0))),\n      exchangeRate: Number(rates.mwkToCny || EXCHANGE_RATE_MWK_TO_CNY),\n      status: (String(t.status || 'completed') as TransactionStatus),\n      type: 'payment' as const,\n    }));\n  }, [payments, rates]);\n\n  return (\n    <Dashboard \n      user={user ?? { name: 'User', email: '', phone: '', kycStatus: 'verified', avatarUrl: '/icons/avatar-default.png' }} \n      wallet={walletStats} \n      recentTransactions={recentTransactions} \n      rates={rates}\n    />\n  );\n}\n"],"names":[],"mappings":"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"}}]
}