{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gondwe/Desktop/VaultString/Projects/vaultstring-frontend/app/demo/page.tsx"],"sourcesContent":["\"use client\";\nimport { useCallback, useMemo, useState } from \"react\";\nimport { GATEWAY_URL, login, register, getWallets, initiatePayment, type Wallet } from \"@/lib/api\";\n\ntype UserState = {\n  email: string;\n  password: string;\n  accessToken?: string;\n  id?: string;\n  wallets?: Wallet[];\n};\n\nexport default function DemoPage() {\n  const [john, setJohn] = useState<UserState>({\n    email: \"john.doe@example.com\",\n    password: \"Password123\",\n  });\n  const [wang, setWang] = useState<UserState>({\n    email: \"wang.wei@example.com\",\n    password: \"Password123\",\n  });\n  const [status, setStatus] = useState<string>(\"\");\n  const [busy, setBusy] = useState<boolean>(false);\n\n  const gateway = useMemo(() => GATEWAY_URL, []);\n\n  const ensureLogin = useCallback(async (user: UserState, profile: { first: string; last: string; country: string; phone: string }) => {\n    try {\n      const res = await login(user.email, user.password);\n      return { accessToken: res.access_token, id: res.user.id };\n    } catch (err: any) {\n      // If unauthorized, try register then login again\n      if (String(err.message).includes(\"401\")) {\n        await register({\n          email: user.email,\n          password: user.password,\n          phone: profile.phone,\n          first_name: profile.first,\n          last_name: profile.last,\n          user_type: \"individual\",\n          country_code: profile.country,\n        });\n        const res2 = await login(user.email, user.password);\n        return { accessToken: res2.access_token, id: res2.user.id };\n      }\n      throw err;\n    }\n  }, []);\n\n  const doLoginBoth = useCallback(async () => {\n    setBusy(true);\n    setStatus(\"Logging in both test accounts...\");\n    try {\n      const johnAuth = await ensureLogin(john, { first: \"John\", last: \"Doe\", country: \"MW\", phone: \"+265990000001\" });\n      const wangAuth = await ensureLogin(wang, { first: \"Wang\", last: \"Wei\", country: \"CN\", phone: \"+8613800000001\" });\n      setJohn((s) => ({ ...s, accessToken: johnAuth.accessToken, id: johnAuth.id }));\n      setWang((s) => ({ ...s, accessToken: wangAuth.accessToken, id: wangAuth.id }));\n      setStatus(\"Logged in successfully. Tokens acquired.\");\n    } catch (e: any) {\n      setStatus(`Login error: ${e.message}`);\n    } finally {\n      setBusy(false);\n    }\n  }, [john, wang, ensureLogin]);\n\n  const loadWallets = useCallback(async () => {\n    if (!john.accessToken || !wang.accessToken) {\n      setStatus(\"Please login both users first.\");\n      return;\n    }\n    setBusy(true);\n    setStatus(\"Loading wallets for both users...\");\n    try {\n      const [johnWallets, wangWallets] = await Promise.all([\n        getWallets(john.accessToken),\n        getWallets(wang.accessToken),\n      ]);\n      setJohn((s) => ({ ...s, wallets: johnWallets.wallets }));\n      setWang((s) => ({ ...s, wallets: wangWallets.wallets }));\n      setStatus(\"Wallets loaded.\");\n    } catch (e: any) {\n      setStatus(`Wallet load error: ${e.message}`);\n    } finally {\n      setBusy(false);\n    }\n  }, [john.accessToken, wang.accessToken]);\n\n  const transferMwkToCny = useCallback(async () => {\n    if (!john.accessToken || !john.id || !wang.id) {\n      setStatus(\"Please login both users first.\");\n      return;\n    }\n    setBusy(true);\n    setStatus(\"Initiating MWK → CNY transfer from John to Wang...\");\n    try {\n      await initiatePayment(john.accessToken, {\n        receiver_id: wang.id,\n        amount: 500,\n        currency: \"MWK\",\n        description: \"Demo transfer MWK→CNY\",\n        channel: \"web\",\n        category: \"remittance\",\n      });\n      setStatus(\"Transfer initiated successfully. Refreshing wallets...\");\n      await loadWallets();\n      setStatus(\"Transfer complete. Wallets refreshed.\");\n    } catch (e: any) {\n      setStatus(`Transfer error: ${e.message}`);\n    } finally {\n      setBusy(false);\n    }\n  }, [john.accessToken, john.id, wang.id, loadWallets]);\n\n  return (\n    <div className=\"max-w-3xl mx-auto px-6 py-8\">\n      <h1 className=\"text-2xl font-semibold mb-2\">VaultString Frontend Demo</h1>\n      <p className=\"text-sm text-gray-500 mb-6\">Gateway: {gateway}</p>\n\n      <div className=\"space-x-2 mb-6\">\n        <button\n          className=\"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-50\"\n          onClick={doLoginBoth}\n          disabled={busy}\n        >\n          Login Both Accounts\n        </button>\n        <button\n          className=\"px-4 py-2 rounded bg-gray-800 text-white disabled:opacity-50\"\n          onClick={loadWallets}\n          disabled={busy}\n        >\n          Load Wallets\n        </button>\n        <button\n          className=\"px-4 py-2 rounded bg-green-600 text-white disabled:opacity-50\"\n          onClick={transferMwkToCny}\n          disabled={busy}\n        >\n          Send 500 MWK → CNY\n        </button>\n      </div>\n\n      <div className=\"mb-4 text-sm\">\n        <strong>Status:</strong> {status || \"Idle\"}\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <section className=\"border rounded p-4\">\n          <h2 className=\"font-medium mb-2\">John Doe (MWK sender)</h2>\n          <p className=\"text-sm text-gray-600\">{john.email}</p>\n          <div className=\"mt-3\">\n            <h3 className=\"text-sm font-semibold\">Wallets</h3>\n            <ul className=\"text-sm list-disc ml-5 mt-1\">\n              {john.wallets?.map((w) => (\n                <li key={w.id}>{w.currency}: {w.available_balance}</li>\n              )) || <li>—</li>}\n            </ul>\n          </div>\n        </section>\n        <section className=\"border rounded p-4\">\n          <h2 className=\"font-medium mb-2\">Wang Wei (CNY receiver)</h2>\n          <p className=\"text-sm text-gray-600\">{wang.email}</p>\n          <div className=\"mt-3\">\n            <h3 className=\"text-sm font-semibold\">Wallets</h3>\n            <ul className=\"text-sm list-disc ml-5 mt-1\">\n              {wang.wallets?.map((w) => (\n                <li key={w.id}>{w.currency}: {w.available_balance}</li>\n              )) || <li>—</li>}\n            </ul>\n          </div>\n        </section>\n      </div>\n\n      <div className=\"mt-8 text-xs text-gray-500\">\n        <p>\n          Tip: If accounts aren’t found, the demo automatically registers them and then logs in.\n          Both users are provisioned with MWK/CNY/USD wallets and initial balances (per backend setup).\n        </p>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 407, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gondwe/Desktop/VaultString/Projects/vaultstring-frontend/node_modules/.pnpm/next%4016.0.8_react-dom%4019.2.0_react%4019.2.1__react%4019.2.1/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 426, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gondwe/Desktop/VaultString/Projects/vaultstring-frontend/node_modules/.pnpm/next%4016.0.8_react-dom%4019.2.0_react%4019.2.1__react%4019.2.1/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,yPACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/gondwe/Desktop/VaultString/Projects/vaultstring-frontend/node_modules/.pnpm/next%4016.0.8_react-dom%4019.2.0_react%4019.2.1__react%4019.2.1/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,yPACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}