module.exports=[71164,a=>{"use strict";var b=a.i(22035),c=a.i(47059),d=a.i(48186),e=a.i(82365),f=a.i(30829),g=a.i(32041),h=a.i(35033),i=a.i(27399);function j({selectedWalletId:a,onSelectWallet:j}){let{stats:k,wallets:l,loading:m}=(0,h.useWalletStats)(),n=l.find(a=>a.currency===k.primaryCurrency)||l[0],o=l.filter(a=>a.id!==n?.id),p=b=>{j&&j(a===b?null:b)};return m&&0===l.length?(0,b.jsx)("div",{className:"h-[220px] bg-slate-100 dark:bg-slate-800 rounded-[24px] animate-pulse flex items-center justify-center",children:(0,b.jsx)(f.Loader2,{className:"animate-spin text-slate-400"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("h2",{className:"text-xl font-black text-slate-900 dark:text-white flex items-center gap-2",children:["My Cards ",(0,b.jsx)(e.ArrowUpRight,{size:18,className:"text-slate-400"})]}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",className:"text-indigo-600 font-bold hover:text-indigo-700 hover:bg-indigo-50 dark:hover:bg-indigo-900/30",children:"Manage"})]}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("div",{className:"absolute top-2 right-2 w-full h-full bg-slate-800 dark:bg-slate-700 rounded-[24px] rotate-3 opacity-10 scale-95 transition-transform group-hover:rotate-6 duration-500"}),(0,b.jsx)("div",{className:"absolute top-1 right-1 w-full h-full bg-slate-900 dark:bg-slate-600 rounded-[24px] rotate-1 opacity-10 scale-[0.98] transition-transform group-hover:rotate-3 duration-500"}),(0,b.jsxs)("div",{onClick:()=>n&&p(n.id),className:`relative ${(0,i.getWalletGradient)(n?.currency||"MWK")} p-6 rounded-[24px] shadow-xl overflow-hidden min-h-[220px] flex flex-col justify-between transition-all duration-300 hover:-translate-y-1 cursor-pointer ${a===n?.id?"ring-4 ring-indigo-500 ring-offset-2 dark:ring-offset-slate-900":""}`,children:[(0,b.jsx)("div",{className:"absolute inset-0 opacity-10 bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"}),(0,b.jsxs)("div",{className:"relative z-10 flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-white/80 font-bold text-sm mb-1",children:"Total Balance"}),(0,b.jsx)("h3",{className:"text-3xl font-black text-white",children:(0,i.formatCurrency)(n?.available_balance||0,n?.currency||"MWK")})]}),(0,b.jsx)("div",{className:"bg-white/20 backdrop-blur-md p-2 rounded-xl",children:(0,b.jsx)(e.ArrowUpRight,{className:"text-white"})})]}),(0,b.jsx)("div",{className:"relative z-10",children:(0,b.jsxs)("div",{className:"flex justify-between items-end",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-white/60 font-bold text-xs uppercase tracking-wider mb-1",children:"Wallet ID"}),(0,b.jsx)("p",{className:"font-mono text-white font-bold text-lg tracking-wider",children:n?(0,i.formatWalletNumber)(n.id):"•••• •••• •••• ••••"})]}),(0,b.jsx)("div",{className:"h-8 px-3 flex items-center bg-white/20 backdrop-blur-sm rounded-lg border border-white/10",children:(0,b.jsx)("span",{className:"text-white font-bold text-xs",children:n?.currency||"MWK"})})]})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-[24px] p-4 flex flex-col items-center justify-center border-2 border-dashed border-slate-300 dark:border-slate-700 hover:border-indigo-300 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors cursor-pointer group",children:[(0,b.jsx)("div",{className:"h-10 w-10 bg-white dark:bg-slate-700 rounded-full shadow-sm flex items-center justify-center mb-2 group-hover:scale-110 transition-transform",children:(0,b.jsx)(c.Plus,{className:"text-slate-400 group-hover:text-indigo-600 dark:text-slate-400 dark:group-hover:text-indigo-400"})}),(0,b.jsx)("span",{className:"text-xs font-bold text-slate-500 group-hover:text-indigo-600 dark:text-slate-400 dark:group-hover:text-indigo-400",children:"Add New Card"})]}),o.map(c=>(0,b.jsxs)("div",{onClick:()=>p(c.id),className:`bg-slate-900 dark:bg-slate-950 rounded-[24px] p-5 relative overflow-hidden group cursor-pointer border border-slate-800 dark:border-slate-800 transition-all ${a===c.id?"ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-slate-900":""}`,children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-indigo-500 rounded-full blur-2xl -mr-10 -mt-10 opacity-20"}),(0,b.jsxs)("div",{className:"relative z-10",children:[(0,b.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,b.jsx)("div",{className:"text-white/60 font-mono text-xs",children:(0,i.formatWalletNumber)(c.id).slice(-4).padStart(8,"• ")}),(0,b.jsx)(d.CreditCard,{className:"text-white/80",size:16})]}),(0,b.jsx)("div",{className:"text-white font-black text-sm truncate",children:(0,i.formatCurrency)(c.available_balance,c.currency)}),(0,b.jsx)("div",{className:"text-indigo-300 text-[10px] font-bold mt-1",children:c.currency})]})]},c.id))]})]})}var k=a.i(97529);let l=(0,k.default)("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]),m=(0,k.default)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),n=(0,k.default)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);var o=a.i(29843);function p({transactions:a,userId:c,onViewReceipt:d,onViewAll:e,showViewAll:f=!0}){return(0,b.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-[32px] p-8 shadow-sm border border-slate-100 dark:border-slate-800 h-full",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsx)("h2",{className:"text-xl font-black text-slate-900 dark:text-white",children:"Transactions"}),f&&(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",className:"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300",onClick:e,children:"View all"})]}),(0,b.jsx)("div",{className:"space-y-6",children:0===a.length?(0,b.jsx)("div",{className:"text-center py-10 text-slate-400 dark:text-slate-500 font-medium",children:"No transactions yet"}):a.map(a=>{let e,f;if(!a)return null;let g=a.receiver_id===c;a.sender_id;let h=(0,i.formatCurrency)(g?a.amount:a.total_debited||a.amount,a.currency),j=`${g?"+":"-"}${h}`;return(0,b.jsxs)("div",{className:"flex items-center justify-between group cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800 -mx-4 p-4 rounded-2xl transition-colors",onClick:()=>d?.(a.id),children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`h-12 w-12 rounded-2xl flex items-center justify-center ${(e=(a.description||a.category||"").toLowerCase()).includes("coffee")?"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/10 dark:text-emerald-400":e.includes("netflix")?"bg-red-100 text-red-600 dark:bg-red-500/10 dark:text-red-400":e.includes("shop")?"bg-blue-100 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400":"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400"}`,children:(f=(a.description||a.category||"").toLowerCase()).includes("coffee")||f.includes("starbucks")?(0,b.jsx)(l,{size:16}):f.includes("netflix")||f.includes("subscription")?(0,b.jsx)(m,{size:16}):f.includes("shop")||f.includes("store")?(0,b.jsx)(n,{size:16}):(0,b.jsx)(o.Zap,{size:16})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("div",{className:"font-bold text-slate-900 dark:text-white mb-0.5",children:g?a.sender_name||a.SenderName||a.sender?.name||"Unknown Sender":a.receiver_name||a.ReceiverName||a.receiver?.name||a.description||"Unknown Receiver"}),(0,b.jsx)("div",{className:"text-xs text-slate-400 dark:text-slate-500 font-medium",suppressHydrationWarning:!0,children:(()=>{try{return a.created_at?new Date(a.created_at).toLocaleString("en-US",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Date Pending"}catch{return"Invalid Date"}})()})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:`font-black text-sm ${g?"text-emerald-600 dark:text-emerald-400":"text-slate-900 dark:text-white"}`,children:j}),(0,b.jsx)("div",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded-full inline-block mt-1 uppercase tracking-wide",children:a.status})]})]},a.id)})})]})}var q=a.i(60906),r=a.i(95090),s=a.i(71347),t=a.i(85341);let u=(0,k.default)("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),v=(0,k.default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var w=a.i(70407),x=a.i(23723),y=a.i(22967);let z=(0,k.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);class A extends y.default.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,b){console.error("ErrorBoundary caught an error:",a,b)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,b.jsxs)("div",{className:"p-6 bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 rounded-2xl flex flex-col items-center justify-center text-center min-h-[200px]",children:[(0,b.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 p-3 rounded-full mb-4",children:(0,b.jsx)(z,{className:"text-red-600 dark:text-red-400",size:24})}),(0,b.jsx)("h3",{className:"text-lg font-bold text-red-900 dark:text-red-200 mb-2",children:"Something went wrong"}),(0,b.jsx)("p",{className:"text-sm text-red-600 dark:text-red-300 mb-4 max-w-md",children:this.state.error?.message||"An unexpected error occurred while loading this component."}),(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>this.setState({hasError:!1}),className:"border-red-200 dark:border-red-800 text-red-700 dark:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/30",children:"Try Again"})]}):this.props.children}}function B(){let{user:a}=(0,x.useAuth)(),c=a?.id||a?.ID||null,{filteredTransactions:d,loading:f,error:h,page:i,totalPages:k,setPage:l,filters:m,setFilters:n,stats:o,setLimit:y,limit:z}=(0,w.useTransactions)(5);return(0,b.jsxs)("div",{className:"space-y-8 max-w-7xl mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h1",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:"Financial Overview"}),(0,b.jsx)("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Manage your cards and review activity."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(g.Button,{variant:"outline",className:"rounded-xl h-10 px-4 font-bold text-slate-600 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-800",children:[(0,b.jsx)(v,{size:16,className:"mr-2"})," Select Dates"]}),(0,b.jsxs)(g.Button,{onClick:()=>{!function(a,b="transactions",c=null){if(!a||0===a.length)return;let d=new Blob([["Reference,Date,Description,Amount,Currency,Status,Sender,Receiver",...a.map(a=>{let b=String(a.reference||a.id||""),d=String(a.amount??a.net_amount??0),e=String(a.currency||""),f=String(a.sender_id||a.senderId||""),g=String(a.receiver_id||a.receiverId||""),h="unknown";c&&(h=f===c?"sent":"received");let i=a.sender_wallet_number||(f?`...${f.slice(-4)}`:""),j=a.receiver_wallet_number||(g?`...${g.slice(-4)}`:""),k=a.sender_name||a.SenderName||i,l=a.receiver_name||a.ReceiverName||j,m=a.description||"";m||"unknown"===h?m||(m=`Transfer from ${k} to ${l}`):m="sent"===h?`Sent to ${l}`:`Received from ${k}`;let n=String(a.status||"");return[b,String(a.created_at||a.initiated_at||""),m,d,e,n,k,l].map(a=>`"${String(a).replace(/"/g,'""')}"`).join(",")})].join("\n")],{type:"text/csv;charset=utf-8;"}),e=URL.createObjectURL(d),f=document.createElement("a");f.href=e,f.download=`${b}_${new Date().toISOString().slice(0,10)}.csv`,f.click(),URL.revokeObjectURL(e)}(d,"vaultstring_statement",c)},className:"rounded-xl bg-slate-900 dark:bg-emerald-600 text-white h-10 px-4 font-bold shadow-lg hover:bg-slate-800 dark:hover:bg-emerald-700",children:[(0,b.jsx)(u,{size:16,className:"mr-2"})," Export"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-8 items-start",children:[(0,b.jsxs)("div",{className:"xl:col-span-5 space-y-8",children:[(0,b.jsx)(A,{children:(0,b.jsx)(j,{selectedWalletId:m.walletId,onSelectWallet:a=>n(b=>({...b,walletId:a}))})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(C,{label:"Inflow",value:o?.received||"0",icon:(0,b.jsx)(s.ArrowDownLeft,{}),color:"green"}),(0,b.jsx)(C,{label:"Outflow",value:o?.sent||"0",icon:(0,b.jsx)(e.ArrowUpRight,{}),color:"indigo"}),(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsx)(C,{label:"Pending Settlement",value:o?.pending||"0",icon:(0,b.jsx)(t.Clock,{}),color:"amber"})})]})]}),(0,b.jsxs)("div",{className:"xl:col-span-7 space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white dark:bg-slate-900 p-2 rounded-[20px] shadow-sm border border-slate-100 dark:border-slate-800 flex flex-col sm:flex-row items-center gap-2",children:[(0,b.jsx)("div",{className:"flex bg-slate-50 dark:bg-slate-950 p-1 rounded-2xl w-full sm:w-auto",children:[{id:"all",label:"All"},{id:"sent",label:"Sent"},{id:"received",label:"Received"}].map(a=>(0,b.jsx)("button",{onClick:()=>n(b=>({...b,tab:a.id})),className:`flex-1 px-4 py-2 rounded-xl text-xs font-bold transition-all duration-200 ${m.tab===a.id?"bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300"}`,children:a.label},a.id))}),(0,b.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,b.jsx)(r.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:16}),(0,b.jsx)(q.Input,{placeholder:"Search transactions...",className:"pl-10 h-10 bg-transparent border-transparent focus:bg-slate-50 dark:focus:bg-slate-800 rounded-xl font-medium text-sm text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-600",value:m.query,onChange:a=>n(b=>({...b,query:a.target.value}))})]})]}),f?(0,b.jsxs)("div",{className:"p-20 text-center bg-white dark:bg-slate-900 rounded-[32px] border border-slate-100 dark:border-slate-800",children:[(0,b.jsx)("div",{className:"animate-spin h-8 w-8 border-[3px] border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-slate-400 dark:text-slate-500 font-bold text-xs",children:"Loading..."})]}):(0,b.jsxs)(A,{children:[(0,b.jsx)(p,{transactions:d,userId:c,onViewAll:()=>{y(50),l(1)},showViewAll:z<20}),(0,b.jsxs)("div",{className:"flex items-center justify-between px-4",children:[(0,b.jsxs)("p",{className:"text-xs font-bold text-slate-400 dark:text-slate-500",children:["Page ",i," of ",k]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>{i>1&&l(a=>a-1)},disabled:i<=1,className:"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200",children:"Previous"}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>{i<k&&l(a=>a+1)},disabled:i>=k,className:"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200",children:"Next"})]})]})]})]})]})]})}function C({label:a,value:c,icon:d,color:e}){let f={green:{bg:"bg-emerald-500",light:"bg-emerald-50 dark:bg-emerald-500/10",text:"text-emerald-600 dark:text-emerald-400"},indigo:{bg:"bg-indigo-500",light:"bg-indigo-50 dark:bg-indigo-500/10",text:"text-indigo-600 dark:text-indigo-400"},amber:{bg:"bg-amber-500",light:"bg-amber-50 dark:bg-amber-500/10",text:"text-amber-600 dark:text-amber-400"}},g=f[e]||f.indigo;return(0,b.jsxs)("div",{className:"bg-white dark:bg-slate-900 p-5 rounded-[24px] shadow-sm border border-slate-100 dark:border-slate-800 flex items-center gap-4 hover:shadow-md transition-shadow",children:[(0,b.jsx)("div",{className:`h-12 w-12 rounded-2xl flex items-center justify-center ${g.light} ${g.text}`,children:d}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-slate-400 dark:text-slate-500 text-[10px] font-black uppercase tracking-wider",children:a}),(0,b.jsx)("p",{className:"text-slate-900 dark:text-white font-black text-lg",children:c})]})]})}a.s(["default",()=>B],71164)}];

//# sourceMappingURL=fcc98_Projects_vaultstring-frontend_app_dashboard_transactions_page_tsx_5771902f._.js.map