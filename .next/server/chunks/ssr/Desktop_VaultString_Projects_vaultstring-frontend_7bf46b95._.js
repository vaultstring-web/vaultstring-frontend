module.exports=[22983,a=>{"use strict";var b=a.i(22967);a.i(22035);var c=b.createContext(void 0);function d(a){let d=b.useContext(c);return a||d||"ltr"}a.s(["useDirection",()=>d])},81222,a=>{"use strict";var b=a.i(22967),c=a.i(56453),d=b["useId".toString()]||(()=>void 0),e=0;function f(a){let[f,g]=b.useState(d());return(0,c.useLayoutEffect)(()=>{a||g(a=>a??String(e++))},[a]),a||(f?`radix-${f}`:"")}a.s(["useId",()=>f])},93387,a=>{"use strict";var b=a.i(27622);a.s(["CheckIcon",()=>b.default])},32041,a=>{"use strict";var b=a.i(22035),c=a.i(19440),d=a.i(49804),e=a.i(59763);let f=(0,d.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function g({className:a,variant:d,size:g,asChild:h=!1,...i}){let j=h?c.Slot:"button";return(0,b.jsx)(j,{"data-slot":"button",className:(0,e.cn)(f({variant:d,size:g,className:a})),...i})}a.s(["Button",()=>g,"buttonVariants",()=>f])},84644,a=>{"use strict";var b=a.i(22967),c=a.i(56453);function d(a){let[d,e]=b.useState(void 0);return(0,c.useLayoutEffect)(()=>{if(a){e({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let c,d;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;c=b.inlineSize,d=b.blockSize}else c=a.offsetWidth,d=a.offsetHeight;e({width:c,height:d})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}e(void 0)},[a]),d}a.s(["useSize",()=>d])},87668,a=>{"use strict";var b=a.i(22967);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},27622,a=>{"use strict";let b=(0,a.i(97529).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["default",()=>b])},41691,a=>{"use strict";var b=a.i(22035),c=a.i(59763);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},9610,a=>{"use strict";var b=a.i(22035),c=a.i(19440),d=a.i(49804),e=a.i(59763);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},76249,a=>{"use strict";let b=(0,a.i(97529).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],76249)},50680,a=>{"use strict";var b=a.i(22967),c=a.i(89750),d=a.i(9513),e=a.i(94084),f=a.i(3220),g=a.i(81222),h=a.i(64379),i=a.i(74158),j=a.i(6586),k=a.i(22983),l=a.i(22035),m="rovingFocusGroup.onEntryFocus",n={bubbles:!1,cancelable:!0},o="RovingFocusGroup",[p,q,r]=(0,d.createCollection)(o),[s,t]=(0,f.createContextScope)(o,[r]),[u,v]=s(o),w=b.forwardRef((a,b)=>(0,l.jsx)(p.Provider,{scope:a.__scopeRovingFocusGroup,children:(0,l.jsx)(p.Slot,{scope:a.__scopeRovingFocusGroup,children:(0,l.jsx)(x,{...a,ref:b})})}));w.displayName=o;var x=b.forwardRef((a,d)=>{let{__scopeRovingFocusGroup:f,orientation:g,loop:o=!1,dir:p,currentTabStopId:r,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:t,onEntryFocus:v,preventScrollOnEntryFocus:w=!1,...x}=a,y=b.useRef(null),z=(0,e.useComposedRefs)(d,y),A=(0,k.useDirection)(p),[C=null,D]=(0,j.useControllableState)({prop:r,defaultProp:s,onChange:t}),[E,F]=b.useState(!1),G=(0,i.useCallbackRef)(v),H=q(f),I=b.useRef(!1),[J,K]=b.useState(0);return b.useEffect(()=>{let a=y.current;if(a)return a.addEventListener(m,G),()=>a.removeEventListener(m,G)},[G]),(0,l.jsx)(u,{scope:f,orientation:g,dir:A,loop:o,currentTabStopId:C,onItemFocus:b.useCallback(a=>D(a),[D]),onItemShiftTab:b.useCallback(()=>F(!0),[]),onFocusableItemAdd:b.useCallback(()=>K(a=>a+1),[]),onFocusableItemRemove:b.useCallback(()=>K(a=>a-1),[]),children:(0,l.jsx)(h.Primitive.div,{tabIndex:E||0===J?-1:0,"data-orientation":g,...x,ref:z,style:{outline:"none",...a.style},onMouseDown:(0,c.composeEventHandlers)(a.onMouseDown,()=>{I.current=!0}),onFocus:(0,c.composeEventHandlers)(a.onFocus,a=>{let b=!I.current;if(a.target===a.currentTarget&&b&&!E){let b=new CustomEvent(m,n);if(a.currentTarget.dispatchEvent(b),!b.defaultPrevented){let a=H().filter(a=>a.focusable);B([a.find(a=>a.active),a.find(a=>a.id===C),...a].filter(Boolean).map(a=>a.ref.current),w)}}I.current=!1}),onBlur:(0,c.composeEventHandlers)(a.onBlur,()=>F(!1))})})}),y="RovingFocusGroupItem",z=b.forwardRef((a,d)=>{let{__scopeRovingFocusGroup:e,focusable:f=!0,active:i=!1,tabStopId:j,...k}=a,m=(0,g.useId)(),n=j||m,o=v(y,e),r=o.currentTabStopId===n,s=q(e),{onFocusableItemAdd:t,onFocusableItemRemove:u}=o;return b.useEffect(()=>{if(f)return t(),()=>u()},[f,t,u]),(0,l.jsx)(p.ItemSlot,{scope:e,id:n,focusable:f,active:i,children:(0,l.jsx)(h.Primitive.span,{tabIndex:r?0:-1,"data-orientation":o.orientation,...k,ref:d,onMouseDown:(0,c.composeEventHandlers)(a.onMouseDown,a=>{f?o.onItemFocus(n):a.preventDefault()}),onFocus:(0,c.composeEventHandlers)(a.onFocus,()=>o.onItemFocus(n)),onKeyDown:(0,c.composeEventHandlers)(a.onKeyDown,a=>{if("Tab"===a.key&&a.shiftKey)return void o.onItemShiftTab();if(a.target!==a.currentTarget)return;let b=function(a,b,c){var d;let e=(d=a.key,"rtl"!==c?d:"ArrowLeft"===d?"ArrowRight":"ArrowRight"===d?"ArrowLeft":d);if(!("vertical"===b&&["ArrowLeft","ArrowRight"].includes(e))&&!("horizontal"===b&&["ArrowUp","ArrowDown"].includes(e)))return A[e]}(a,o.orientation,o.dir);if(void 0!==b){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let e=s().filter(a=>a.focusable).map(a=>a.ref.current);if("last"===b)e.reverse();else if("prev"===b||"next"===b){var c,d;"prev"===b&&e.reverse();let f=e.indexOf(a.currentTarget);e=o.loop?(c=e,d=f+1,c.map((a,b)=>c[(d+b)%c.length])):e.slice(f+1)}setTimeout(()=>B(e))}})})})});z.displayName=y;var A={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function B(a,b=!1){let c=document.activeElement;for(let d of a)if(d===c||(d.focus({preventScroll:b}),document.activeElement!==c))return}a.s(["Item",()=>z,"Root",()=>w,"createRovingFocusGroupScope",()=>t])},35033,24253,a=>{"use strict";var b=a.i(22967),c=a.i(10648),d=a.i(23723);function e(){let{user:a}=(0,d.useAuth)(),[e,f]=(0,b.useState)([]),[g,h]=(0,b.useState)({}),[i,j]=(0,b.useState)({}),[k,l]=(0,b.useState)(!0),m=async()=>{l(!0);try{let[a,b]=await Promise.all([(0,c.apiFetch)("/wallets",{cache:"no-store"}).catch(()=>null),(0,c.apiFetch)("/forex/rates",{cache:"no-store"}).catch(()=>null)]),d=(Array.isArray(a?.wallets)?a.wallets:[]).filter(Boolean);f(d);let e={},g={};b?.rates&&Array.isArray(b.rates)?b.rates.forEach(a=>{let b=`${a.base_currency}-${a.target_currency}`;e[b]=parseFloat(a.rate),g[b]={rate:parseFloat(a.rate),change24h:parseFloat(a.change_24h||0),changePercent:parseFloat(a.change_percent||0),high24h:parseFloat(a.high_24h||a.rate),low24h:parseFloat(a.low_24h||a.rate),lastUpdated:a.last_updated},"MWK"===a.base_currency&&"CNY"===a.target_currency&&(e.mwkToCny=parseFloat(a.rate)),"CNY"===a.base_currency&&"MWK"===a.target_currency&&(e.cnyToMwk=parseFloat(a.rate)),"USD"===a.base_currency&&"MWK"===a.target_currency&&(e.usdToMwk=parseFloat(a.rate))}):(e.mwkToCny=.0041,e.cnyToMwk=243.90243902439022,e["MWK-CNY"]=.0041,e["CNY-MWK"]=243.90243902439022),h(e),j(g)}catch(a){console.error("Failed to fetch wallet stats",a)}finally{l(!1)}};(0,b.useEffect)(()=>{a&&m()},[a]);let n=(0,b.useMemo)(()=>{let b=e.reduce((a,b)=>{let c=parseFloat(String(b.available_balance??b.balance??0)),d=String(b.currency).toUpperCase();return"MWK"===d?a+c:"CNY"===d?a+c*(g.cnyToMwk||243.90243902439022):"USD"===d?a+c*(g.usdToMwk||1745):a+c},0),c=e.reduce((a,b)=>{let c=parseFloat(String(b.available_balance??b.balance??0)),d=String(b.currency).toUpperCase();return"CNY"===d?a+c:"MWK"===d?a+c*(g.mwkToCny||.0041):"USD"===d?a+c*(g.usdToMwk||1745)*(g.mwkToCny||.0041):a+c},0),d="CN"===String(a?.countryCode||"").toUpperCase()?"CNY":"MWK";return{balanceMWK:Math.round(b),balanceCNY:Math.round(c),primaryCurrency:d,lastDepositDate:new Date().toISOString().slice(0,10),monthlyLimit:5e6,spentThisMonth:Math.round(("CNY"===d?c:b)*.15)}},[e,g,a]);return{wallets:e,stats:n,rates:g,rateDetails:i,loading:k,refetch:()=>m()}}a.s(["EXCHANGE_RATE_CNY_TO_MWK",0,243.90243902439022,"EXCHANGE_RATE_MWK_TO_CNY",0,.0041],24253),a.s(["useWalletStats",()=>e],35033)},85341,a=>{"use strict";let b=(0,a.i(97529).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],85341)},82365,71347,70407,a=>{"use strict";var b=a.i(97529);let c=(0,b.default)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);a.s(["ArrowUpRight",()=>c],82365);let d=(0,b.default)("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);a.s(["ArrowDownLeft",()=>d],71347);var e=a.i(22967),f=a.i(10648),g=a.i(23723);function h(a=10){let{user:b}=(0,g.useAuth)(),c=b?.id||b?.ID||null,[d,i]=(0,e.useState)([]),[j,k]=(0,e.useState)(!0),[l,m]=(0,e.useState)(null),[n,o]=(0,e.useState)(0),[p,q]=(0,e.useState)(1),[r,s]=(0,e.useState)(a),[t,u]=(0,e.useState)({query:"",status:"all",walletId:null,tab:"all"}),v=async()=>{k(!0);try{let a=(p-1)*r,b=`/payments?limit=${r}&offset=${a}`;t.walletId&&(b+=`&wallet_id=${t.walletId}`);let c=await (0,f.apiFetch)(b),d=(Array.isArray(c?.transactions)?c.transactions:[]).filter(Boolean);i(d),o(c?.total||0),m(null)}catch(a){console.error("Failed to fetch transactions:",a),m(a?.message||"Failed to load transactions"),i([])}finally{k(!1)}};(0,e.useEffect)(()=>{b&&v()},[b,p,r,t.walletId]);let w=(0,e.useMemo)(()=>d.filter(a=>{let b,d,e,f;if(!a)return!1;let g=t.query.trim().toLowerCase(),h=String(a.sender_id||a.senderId||""),i=String(a.receiver_id||a.receiverId||""),j=h?`...${h.slice(-4)}`:"",k=i?`...${i.slice(-4)}`:"",l=String(a.sender_wallet_number||a.sender_wallet||j).toLowerCase(),m=String(a.receiver_wallet_number||a.receiver_wallet||k).toLowerCase(),n=String(a.sender_name||a.SenderName||"").toLowerCase(),o=String(a.receiver_name||a.ReceiverName||"").toLowerCase(),p=!g||String(a.reference||a.id||"").toLowerCase().includes(g)||String(a.amount||"").toLowerCase().includes(g)||l.includes(g)||m.includes(g)||n.includes(g)||o.includes(g),q="all"===t.status||String(a.status||"").toLowerCase()===t.status,r=!t.walletId||String(a.sender_wallet_id||"").toLowerCase()===t.walletId.toLowerCase()||String(a.receiver_wallet_id||"").toLowerCase()===t.walletId.toLowerCase(),s=(b=String(a.transaction_type||a.type||"").toLowerCase(),d=h.toLowerCase(),e=i.toLowerCase(),f=String(c||"").toLowerCase(),"all"===t.tab||("sent"===t.tab?f&&d===f:"received"===t.tab?f&&e===f:"topup"===t.tab?"deposit"===b:"pending_settlement"!==t.tab||"pending"===String(a.status||"").toLowerCase()));return p&&q&&s&&r}),[d,t,c]),x=(0,e.useMemo)(()=>({total:n||d.length,completed:d.filter(a=>a&&"completed"===String(a.status||"").toLowerCase()).length,pending:d.filter(a=>a&&"pending"===String(a.status||"").toLowerCase()).length,received:d.filter(a=>a&&String(a.receiver_id||a.receiverId||"")===String(c||"")).length,sent:d.filter(a=>a&&String(a.sender_id||a.senderId||"")===String(c||"")).length}),[d,n,c]),y=Math.ceil(n/r);return{transactions:d,filteredTransactions:w,loading:j,error:l,total:n,page:p,limit:r,totalPages:y,setPage:q,setLimit:s,filters:t,setFilters:u,stats:x,refresh:v}}a.s(["useTransactions",()=>h],70407)}];

//# sourceMappingURL=Desktop_VaultString_Projects_vaultstring-frontend_7bf46b95._.js.map