module.exports=[32041,a=>{"use strict";var b=a.i(22035),c=a.i(19440),d=a.i(49804),e=a.i(59763);let f=(0,d.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function g({className:a,variant:d,size:g,asChild:h=!1,...i}){let j=h?c.Slot:"button";return(0,b.jsx)(j,{"data-slot":"button",className:(0,e.cn)(f({variant:d,size:g,className:a})),...i})}a.s(["Button",()=>g,"buttonVariants",()=>f])},30829,a=>{"use strict";let b=(0,a.i(97529).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],30829)},29843,a=>{"use strict";let b=(0,a.i(97529).default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);a.s(["Zap",()=>b],29843)},85341,a=>{"use strict";let b=(0,a.i(97529).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],85341)},82365,71347,70407,a=>{"use strict";var b=a.i(97529);let c=(0,b.default)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);a.s(["ArrowUpRight",()=>c],82365);let d=(0,b.default)("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);a.s(["ArrowDownLeft",()=>d],71347);var e=a.i(22967),f=a.i(10648),g=a.i(23723);function h(a=10){let{user:b}=(0,g.useAuth)(),c=b?.id||b?.ID||null,[d,i]=(0,e.useState)([]),[j,k]=(0,e.useState)(!0),[l,m]=(0,e.useState)(null),[n,o]=(0,e.useState)(0),[p,q]=(0,e.useState)(1),[r,s]=(0,e.useState)(a),[t,u]=(0,e.useState)({query:"",status:"all",walletId:null,tab:"all"}),v=async()=>{k(!0);try{let a=(p-1)*r,b=`/payments?limit=${r}&offset=${a}`;t.walletId&&(b+=`&wallet_id=${t.walletId}`);let c=await (0,f.apiFetch)(b),d=(Array.isArray(c?.transactions)?c.transactions:[]).filter(Boolean);i(d),o(c?.total||0),m(null)}catch(a){console.error("Failed to fetch transactions:",a),m(a?.message||"Failed to load transactions"),i([])}finally{k(!1)}};(0,e.useEffect)(()=>{b&&v()},[b,p,r,t.walletId]);let w=(0,e.useMemo)(()=>d.filter(a=>{let b,d,e,f;if(!a)return!1;let g=t.query.trim().toLowerCase(),h=String(a.sender_id||a.senderId||""),i=String(a.receiver_id||a.receiverId||""),j=h?`...${h.slice(-4)}`:"",k=i?`...${i.slice(-4)}`:"",l=String(a.sender_wallet_number||a.sender_wallet||j).toLowerCase(),m=String(a.receiver_wallet_number||a.receiver_wallet||k).toLowerCase(),n=String(a.sender_name||a.SenderName||"").toLowerCase(),o=String(a.receiver_name||a.ReceiverName||"").toLowerCase(),p=!g||String(a.reference||a.id||"").toLowerCase().includes(g)||String(a.amount||"").toLowerCase().includes(g)||l.includes(g)||m.includes(g)||n.includes(g)||o.includes(g),q="all"===t.status||String(a.status||"").toLowerCase()===t.status,r=!t.walletId||String(a.sender_wallet_id||"").toLowerCase()===t.walletId.toLowerCase()||String(a.receiver_wallet_id||"").toLowerCase()===t.walletId.toLowerCase(),s=(b=String(a.transaction_type||a.type||"").toLowerCase(),d=h.toLowerCase(),e=i.toLowerCase(),f=String(c||"").toLowerCase(),"all"===t.tab||("sent"===t.tab?f&&d===f:"received"===t.tab?f&&e===f:"topup"===t.tab?"deposit"===b:"pending_settlement"!==t.tab||"pending"===String(a.status||"").toLowerCase()));return p&&q&&s&&r}),[d,t,c]),x=(0,e.useMemo)(()=>({total:n||d.length,completed:d.filter(a=>a&&"completed"===String(a.status||"").toLowerCase()).length,pending:d.filter(a=>a&&"pending"===String(a.status||"").toLowerCase()).length,received:d.filter(a=>a&&String(a.receiver_id||a.receiverId||"")===String(c||"")).length,sent:d.filter(a=>a&&String(a.sender_id||a.senderId||"")===String(c||"")).length}),[d,n,c]),y=Math.ceil(n/r);return{transactions:d,filteredTransactions:w,loading:j,error:l,total:n,page:p,limit:r,totalPages:y,setPage:q,setLimit:s,filters:t,setFilters:u,stats:x,refresh:v}}a.s(["useTransactions",()=>h],70407)},35033,24253,a=>{"use strict";var b=a.i(22967),c=a.i(10648),d=a.i(23723);function e(){let{user:a}=(0,d.useAuth)(),[e,f]=(0,b.useState)([]),[g,h]=(0,b.useState)({}),[i,j]=(0,b.useState)({}),[k,l]=(0,b.useState)(!0),m=async()=>{l(!0);try{let[a,b]=await Promise.all([(0,c.apiFetch)("/wallets",{cache:"no-store"}).catch(()=>null),(0,c.apiFetch)("/forex/rates",{cache:"no-store"}).catch(()=>null)]),d=(Array.isArray(a?.wallets)?a.wallets:[]).filter(Boolean);f(d);let e={},g={};b?.rates&&Array.isArray(b.rates)?b.rates.forEach(a=>{let b=`${a.base_currency}-${a.target_currency}`;e[b]=parseFloat(a.rate),g[b]={rate:parseFloat(a.rate),change24h:parseFloat(a.change_24h||0),changePercent:parseFloat(a.change_percent||0),high24h:parseFloat(a.high_24h||a.rate),low24h:parseFloat(a.low_24h||a.rate),lastUpdated:a.last_updated},"MWK"===a.base_currency&&"CNY"===a.target_currency&&(e.mwkToCny=parseFloat(a.rate)),"CNY"===a.base_currency&&"MWK"===a.target_currency&&(e.cnyToMwk=parseFloat(a.rate)),"USD"===a.base_currency&&"MWK"===a.target_currency&&(e.usdToMwk=parseFloat(a.rate))}):(e.mwkToCny=.0041,e.cnyToMwk=243.90243902439022,e["MWK-CNY"]=.0041,e["CNY-MWK"]=243.90243902439022),h(e),j(g)}catch(a){console.error("Failed to fetch wallet stats",a)}finally{l(!1)}};(0,b.useEffect)(()=>{a&&m()},[a]);let n=(0,b.useMemo)(()=>{let b=e.reduce((a,b)=>{let c=parseFloat(String(b.available_balance??b.balance??0)),d=String(b.currency).toUpperCase();return"MWK"===d?a+c:"CNY"===d?a+c*(g.cnyToMwk||243.90243902439022):"USD"===d?a+c*(g.usdToMwk||1745):a+c},0),c=e.reduce((a,b)=>{let c=parseFloat(String(b.available_balance??b.balance??0)),d=String(b.currency).toUpperCase();return"CNY"===d?a+c:"MWK"===d?a+c*(g.mwkToCny||.0041):"USD"===d?a+c*(g.usdToMwk||1745)*(g.mwkToCny||.0041):a+c},0),d="CN"===String(a?.countryCode||"").toUpperCase()?"CNY":"MWK";return{balanceMWK:Math.round(b),balanceCNY:Math.round(c),primaryCurrency:d,lastDepositDate:new Date().toISOString().slice(0,10),monthlyLimit:5e6,spentThisMonth:Math.round(("CNY"===d?c:b)*.15)}},[e,g,a]);return{wallets:e,stats:n,rates:g,rateDetails:i,loading:k,refetch:()=>m()}}a.s(["EXCHANGE_RATE_CNY_TO_MWK",0,243.90243902439022,"EXCHANGE_RATE_MWK_TO_CNY",0,.0041],24253),a.s(["useWalletStats",()=>e],35033)},48186,a=>{"use strict";let b=(0,a.i(97529).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);a.s(["CreditCard",()=>b],48186)},27399,a=>{"use strict";a.s(["formatCurrency",0,(a,b="MWK")=>{let c=parseFloat(String(a||0));if(isNaN(c))return"0.00";try{return new Intl.NumberFormat("en-US",{style:"currency",currency:b||"MWK",minimumFractionDigits:2}).format(c)}catch(a){return`${b} ${c.toFixed(2)}`}},"formatWalletNumber",0,a=>{if(!a)return".... .... .... ....";let b=String(a).replace(/\D/g,"").padEnd(16,"0").slice(0,16);return b.match(/.{1,4}/g)?.join(" ")||b},"generateFallbackWalletNumber",0,a=>{let b={a:"1",b:"2",c:"3",d:"4",e:"5",f:"6","-":""};return(String(a).toLowerCase().split("").map(a=>b[a]||a).join("").replace(/\D/g,"")+"4539102834756192").slice(0,16)},"getWalletGradient",0,a=>{switch(String(a).toUpperCase()){case"MWK":return"bg-gradient-to-br from-emerald-600 to-teal-800";case"ZMW":return"bg-gradient-to-br from-orange-500 to-amber-700";case"CNY":return"bg-gradient-to-br from-rose-500 to-red-800";default:return"bg-gradient-to-br from-slate-700 to-slate-900"}}])},47059,a=>{"use strict";let b=(0,a.i(97529).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],47059)}];

//# sourceMappingURL=Desktop_VaultString_Projects_vaultstring-frontend_7edab1bf._.js.map