module.exports=[19465,a=>{"use strict";var b=a.i(22035),c=a.i(74283);function d(a,b){return(...a)=>{try{return b(...a)}catch{throw Error(void 0)}}}let e=d(0,c.useTranslations);d(0,c.useFormatter);var f=a.i(41691),g=a.i(27399);function h({from:a,to:c,amount:d,rate:e,converted:h,fee:i,loading:j,error:k}){let l=String(a).toUpperCase(),m=String(c).toUpperCase();return(0,b.jsxs)(f.Card,{className:"border-slate-200 dark:border-slate-800 shadow-sm dark:bg-slate-900",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50",children:(0,b.jsx)(f.CardTitle,{className:"text-base font-semibold text-slate-800 dark:text-white",children:"Exchange Rate Preview"})}),(0,b.jsx)(f.CardContent,{className:"pt-4",children:k?(0,b.jsx)("div",{className:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg border border-red-100 dark:border-red-900",children:k}):(0,b.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-slate-500 dark:text-slate-400",children:"Exchange Rate"}),(0,b.jsx)("span",{className:"font-mono font-medium text-slate-700 dark:text-slate-300",children:j?"...":e?`1 ${l} = ${e.toFixed(4)} ${m}`:"—"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-slate-500 dark:text-slate-400",children:"Converted Amount"}),(0,b.jsx)("span",{className:"font-bold text-slate-900 dark:text-white",children:j?"...":null!==h?(0,g.formatCurrency)(h,m):"—"})]}),null!==i&&(0,b.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t border-slate-100 dark:border-slate-800 mt-2",children:[(0,b.jsx)("span",{className:"text-slate-500 dark:text-slate-400",children:"Service Fee (Extra)"}),(0,b.jsx)("span",{className:"font-medium text-amber-600 dark:text-amber-500",children:j?"...":(0,g.formatCurrency)(i,l)})]}),null!==h&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center pt-2 mt-1",children:[(0,b.jsx)("span",{className:"text-slate-500 dark:text-slate-400 font-bold",children:"Total Debit"}),(0,b.jsx)("span",{className:"font-black text-slate-900 dark:text-white text-lg",children:j?"...":(0,g.formatCurrency)(d+(i||0),l)})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-slate-100 dark:border-slate-800 mt-2",children:[(0,b.jsx)("span",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Recipient Gets"}),(0,b.jsx)("span",{className:"font-bold text-emerald-600 dark:text-emerald-500 text-2xl",children:j?"...":(0,g.formatCurrency)(h,m)})]})]})]})})]})}var i=a.i(32041),j=a.i(30829),k=a.i(98519),l=a.i(42454),m=a.i(82778),n=a.i(29843),o=a.i(97529);let p=(0,o.default)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var q=a.i(22967),r=a.i(41438),s=a.i(23723),t=a.i(10648),u=a.i(97687);let v=(0,o.default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),w=(0,o.default)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var x=a.i(48186);let y=(a,b)=>{let c=`VaultString Wallet (${b.toFixed(2)} ${a})`;return"MWK"===a?[{value:"wallet_balance",label:c,channel:"wallet",icon:u.Wallet},{value:"airtel_money",label:"Airtel Money",channel:"mobile_money",icon:v},{value:"tnm_mpamba",label:"TNM Mpamba",channel:"mobile_money",icon:v},{value:"nbm",label:"National Bank of Malawi",channel:"bank",icon:w},{value:"standard_bank_mw",label:"Standard Bank Malawi",channel:"bank",icon:w},{value:"fdh_bank",label:"FDH Bank",channel:"bank",icon:w},{value:"nbs_bank",label:"NBS Bank",channel:"bank",icon:w},{value:"first_capital_bank",label:"First Capital Bank",channel:"bank",icon:w},{value:"ecobank_mw",label:"Ecobank Malawi",channel:"bank",icon:w},{value:"visa_mastercard",label:"Visa/Mastercard",channel:"card",icon:x.CreditCard}]:"CNY"===a?[{value:"wallet_balance",label:c,channel:"wallet",icon:u.Wallet},{value:"alipay",label:"Alipay",channel:"mobile_money",icon:v},{value:"wechat_pay",label:"WeChat Pay",channel:"mobile_money",icon:v},{value:"icbc",label:"ICBC",channel:"bank",icon:w},{value:"ccb",label:"China Construction Bank",channel:"bank",icon:w},{value:"boc",label:"Bank of China",channel:"bank",icon:w},{value:"abc",label:"Agricultural Bank of China",channel:"bank",icon:w},{value:"cmb",label:"China Merchants Bank",channel:"bank",icon:w},{value:"unionpay_card",label:"UnionPay Card",channel:"card",icon:x.CreditCard}]:"ZMW"===a?[{value:"wallet_balance",label:c,channel:"wallet",icon:u.Wallet},{value:"airtel_money_zm",label:"Airtel Money Zambia",channel:"mobile_money",icon:v},{value:"mtn_money_zm",label:"MTN Mobile Money",channel:"mobile_money",icon:v},{value:"zamtel_money",label:"Zamtel Money",channel:"mobile_money",icon:v},{value:"zanaco",label:"Zanaco",channel:"bank",icon:w},{value:"stanbic_zm",label:"Stanbic Bank Zambia",channel:"bank",icon:w},{value:"absa_zm",label:"ABSA Zambia",channel:"bank",icon:w},{value:"atlas_mara",label:"Atlas Mara",channel:"bank",icon:w},{value:"visa_mastercard",label:"Visa/Mastercard",channel:"card",icon:x.CreditCard}]:[{value:"wallet_balance",label:"VaultString Wallet",channel:"wallet",icon:u.Wallet},{value:"visa_mastercard",label:"Visa/Mastercard",channel:"card",icon:x.CreditCard},{value:"wire_transfer",label:"Bank Wire Transfer",channel:"bank",icon:w}]};var z=a.i(14134),A=a.i(35540),B=a.i(14921);let C=B.object({receiver_id:B.string().min(16,"Wallet ID must be exactly 16 digits").max(16,"Wallet ID must be exactly 16 digits").regex(/^\d+$/,"Wallet ID must be numeric"),amount:B.string().min(1,"Amount is required").refine(a=>!isNaN(Number(a))&&Number(a)>0,"Amount must be greater than 0"),currency:B.string().min(1,"Currency is required"),description:B.string().optional(),channel:B.string().default("web"),category:B.string().default("transfer")});var D=a.i(74728);function E({currency:a,walletBalance:c,value:d,onChange:e}){let f=(0,q.useMemo)(()=>y(a,c),[a,c]);return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(D.Label,{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Funding Source"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:f.map(a=>{let c=a.icon,f=d===a.value;return(0,b.jsxs)("div",{onClick:()=>e(a.value),className:`
                relative flex items-center p-3 rounded-xl border cursor-pointer transition-all duration-200
                ${f?"border-indigo-600 bg-indigo-50 ring-1 ring-indigo-600 shadow-sm dark:bg-indigo-900/20 dark:border-indigo-500":"border-slate-200 hover:border-indigo-300 hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-800"}
              `,children:[(0,b.jsx)("div",{className:`
                h-10 w-10 rounded-full flex items-center justify-center shrink-0 mr-3
                ${f?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/50 dark:text-indigo-400":"bg-slate-100 text-slate-500 dark:bg-slate-800 dark:text-slate-400"}
              `,children:(0,b.jsx)(c,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:`font-medium text-sm ${f?"text-indigo-900 dark:text-indigo-300":"text-slate-900 dark:text-slate-200"}`,children:a.label}),(0,b.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 capitalize",children:a.channel.replace("_"," ")})]}),f&&(0,b.jsx)("div",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-indigo-600 dark:bg-indigo-500"})]},a.value)})})]})}function F({targetCurrency:a,value:c,onChange:d}){let e=(0,q.useMemo)(()=>"CNY"===a?[{value:"wallet_topup_cny",label:"Wallet Top-up (CNY)",channel:"wallet",icon:u.Wallet},{value:"alipay",label:"Alipay",channel:"mobile_money",icon:v},{value:"wechat_pay",label:"WeChat Pay",channel:"mobile_money",icon:v},{value:"icbc",label:"ICBC",channel:"bank",icon:w},{value:"ccb",label:"China Construction Bank",channel:"bank",icon:w},{value:"boc",label:"Bank of China",channel:"bank",icon:w},{value:"abc",label:"Agricultural Bank of China",channel:"bank",icon:w},{value:"cmb",label:"China Merchants Bank",channel:"bank",icon:w}]:"MWK"===a?[{value:"wallet_topup_mwk",label:"Wallet Top-up (MWK)",channel:"wallet",icon:u.Wallet},{value:"airtel_money",label:"Airtel Money",channel:"mobile_money",icon:v},{value:"tnm_mpamba",label:"TNM Mpamba",channel:"mobile_money",icon:v},{value:"nbm",label:"National Bank of Malawi",channel:"bank",icon:w},{value:"standard_bank_mw",label:"Standard Bank Malawi",channel:"bank",icon:w},{value:"fdh_bank",label:"FDH Bank",channel:"bank",icon:w},{value:"nbs_bank",label:"NBS Bank",channel:"bank",icon:w}]:"ZMW"===a?[{value:"wallet_topup_zmw",label:"Wallet Top-up (ZMW)",channel:"wallet",icon:u.Wallet},{value:"airtel_money_zm",label:"Airtel Money Zambia",channel:"mobile_money",icon:v},{value:"mtn_money_zm",label:"MTN Mobile Money",channel:"mobile_money",icon:v},{value:"zamtel_money",label:"Zamtel Money",channel:"mobile_money",icon:v},{value:"zanaco",label:"Zanaco",channel:"bank",icon:w},{value:"stanbic_zm",label:"Stanbic Bank Zambia",channel:"bank",icon:w},{value:"absa_zm",label:"ABSA Zambia",channel:"bank",icon:w}]:[{value:"wire_transfer",label:"Bank Wire Transfer",channel:"bank",icon:w},{value:"visa_mastercard",label:"Visa/Mastercard",channel:"card",icon:x.CreditCard}],[a]);return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(D.Label,{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Payout Method"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.map(a=>{let e=a.icon,f=c===a.value;return(0,b.jsxs)("div",{onClick:()=>d(a.value),className:`
                relative flex items-center p-3 rounded-xl border cursor-pointer transition-all duration-200
                ${f?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 ring-1 ring-indigo-600 shadow-sm":"border-slate-200 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-indigo-500 hover:bg-slate-50 dark:hover:bg-slate-800"}
              `,children:[(0,b.jsx)("div",{className:`
                h-10 w-10 rounded-full flex items-center justify-center shrink-0 mr-3
                ${f?"bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400":"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400"}
              `,children:(0,b.jsx)(e,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:`font-medium text-sm ${f?"text-indigo-900 dark:text-indigo-300":"text-slate-900 dark:text-white"}`,children:a.label}),(0,b.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400 capitalize",children:a.channel.replace("_"," ")})]})]},a.value)})})]})}var G=a.i(58212);function H({result:a,amount:c,currency:d,receiverName:e,onReset:f}){return(0,b.jsx)("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 text-emerald-800 dark:text-emerald-200 px-6 py-6 rounded-xl shadow-md animate-in fade-in zoom-in-95",children:(0,b.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,b.jsx)("div",{className:"h-16 w-16 bg-emerald-100 dark:bg-emerald-900/50 rounded-full flex items-center justify-center mb-4 text-emerald-600 dark:text-emerald-400",children:(0,b.jsx)(G.CheckCircle2,{size:32})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-100 mb-2",children:"Payment Successful!"}),(0,b.jsx)("p",{className:"text-emerald-700 dark:text-emerald-300 mb-4",children:"Your transaction has been processed securely."}),(0,b.jsxs)("div",{className:"w-full bg-white dark:bg-slate-900 rounded-lg border border-emerald-100 dark:border-emerald-900 p-4 text-left space-y-2 mb-4",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-emerald-600 dark:text-emerald-400",children:"Transaction ID"}),(0,b.jsxs)("span",{className:"font-mono font-medium dark:text-slate-200",children:[a.transaction_id?.substring(0,8),"..."]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-emerald-600 dark:text-emerald-400",children:"Receiver"}),(0,b.jsx)("span",{className:"font-medium dark:text-slate-200",children:a.receiver_name||e||a.receiver_wallet_number})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-emerald-600 dark:text-emerald-400",children:"Amount Sent"}),(0,b.jsx)("span",{className:"font-bold dark:text-slate-200",children:(0,g.formatCurrency)(c,d)})]})]}),(0,b.jsx)(i.Button,{variant:"outline",className:"w-full border-emerald-200 dark:border-emerald-800 text-emerald-700 dark:text-emerald-300 hover:bg-emerald-100 dark:hover:bg-emerald-900/50 hover:text-emerald-800 dark:hover:text-emerald-200",onClick:f,children:"Send Another Payment"})]})})}var I=a.i(60906);function J({value:a,onChange:c,loading:d,suggestions:e,showSuggestions:f,setShowSuggestions:g,onSelectSuggestion:h,receiverName:i}){return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(D.Label,{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Recipient Wallet Number"}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(u.Wallet,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:18}),(0,b.jsx)(I.Input,{name:"receiver_id",value:a,onChange:c,placeholder:"Enter 16-digit Wallet Number",required:!0,className:"pl-10 text-slate-900 dark:text-white border-slate-200 dark:border-slate-700 dark:bg-slate-900 focus:border-indigo-500 focus:ring-indigo-500 h-11",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,inputMode:"numeric",maxLength:16}),(0,b.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:d?(0,b.jsx)(j.Loader2,{size:16,className:"animate-spin text-slate-400 dark:text-slate-500"}):null}),f&&e.length>0&&(0,b.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-[24px] shadow-xl overflow-hidden animate-in fade-in zoom-in-95 duration-200 max-h-60 overflow-y-auto z-50",children:[(0,b.jsxs)("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 border-b border-slate-100 dark:border-slate-700 text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest flex justify-between items-center",children:[(0,b.jsx)("span",{children:"Suggested Receivers"}),(0,b.jsx)("span",{className:"bg-slate-200 dark:bg-slate-700 px-2 py-0.5 rounded-full text-slate-500 dark:text-slate-400",children:"Enter digits to refine"})]}),e.map((a,c)=>(0,b.jsxs)("button",{type:"button",onClick:()=>h(a.address),className:"w-full text-left p-4 hover:bg-indigo-50 dark:hover:bg-slate-800 transition-colors flex items-center gap-4 border-b border-slate-50 dark:border-slate-800 last:border-0",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold shrink-0 text-sm",children:a.name.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-bold text-slate-900 dark:text-white text-sm",children:a.name}),(0,b.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400 font-mono flex items-center gap-2 mt-0.5",children:[(0,b.jsx)("span",{children:a.address}),(0,b.jsx)("span",{className:"bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-600 dark:text-slate-400",children:a.currency})]})]})]},c))]}),i&&(0,b.jsx)("div",{className:"mt-4 bg-green-50/50 dark:bg-green-900/10 border border-green-200 dark:border-green-900/50 rounded-[24px] overflow-hidden animate-in fade-in zoom-in-95 duration-200 relative z-10 shadow-lg shadow-green-100/50 dark:shadow-none",children:(0,b.jsxs)("div",{className:"p-4 flex items-center gap-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-white dark:bg-slate-900 border-2 border-green-100 dark:border-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400 font-bold text-lg shrink-0 shadow-sm",children:i.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"text-[10px] text-green-600 dark:text-green-400 font-bold uppercase tracking-widest mb-0.5 flex items-center gap-1.5",children:[(0,b.jsx)(G.CheckCircle2,{size:12,fill:"currentColor",className:"text-green-200 dark:text-green-900"})," Verified Receiver"]}),(0,b.jsx)("div",{className:"text-lg font-black text-slate-900 dark:text-white",children:i})]})]})})]})]})}var K=a.i(57884);function L({amount:a,currency:c,onChange:d}){return(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,b.jsx)(D.Label,{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Amount to Send"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,b.jsx)("span",{className:"text-slate-500 dark:text-slate-400 font-bold",children:c})}),(0,b.jsx)(I.Input,{name:"amount",type:"number",step:"0.01",min:"0",value:a,onChange:d,required:!0,className:"pl-16 text-lg font-medium h-12 border-slate-200 dark:border-slate-700 dark:bg-slate-900 text-slate-900 dark:text-white focus:border-indigo-500 focus:ring-indigo-500 w-full",placeholder:"0.00"})]})]}),(0,b.jsxs)("div",{className:"w-full md:w-[200px] space-y-3",children:[(0,b.jsx)(D.Label,{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Currency"}),(0,b.jsxs)(K.Select,{value:c,onValueChange:a=>d({target:{name:"currency",value:a}}),children:[(0,b.jsx)(K.SelectTrigger,{className:"h-12 border-slate-200 bg-white dark:border-slate-700 dark:bg-slate-800 dark:text-white focus:ring-indigo-500 w-full rounded-xl font-bold",children:(0,b.jsx)(K.SelectValue,{placeholder:"Select"})}),(0,b.jsxs)(K.SelectContent,{className:"dark:bg-slate-800 dark:border-slate-700",children:[(0,b.jsx)(K.SelectItem,{value:"MWK",className:"dark:text-white dark:focus:bg-slate-700",children:"MWK (Malawi)"}),(0,b.jsx)(K.SelectItem,{value:"ZMW",className:"dark:text-white dark:focus:bg-slate-700",children:"ZMW (Zambia)"}),(0,b.jsx)(K.SelectItem,{value:"CNY",className:"dark:text-white dark:focus:bg-slate-700",children:"CNY (China)"})]})]})]})]})}function M({targetCurrency:a,sourceCurrency:c,onChange:d}){let e=["CNY","MWK","ZMW"].filter(a=>a!==c);return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(D.Label,{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Recipient Receives In"}),(0,b.jsxs)(K.Select,{value:a,onValueChange:d,children:[(0,b.jsx)(K.SelectTrigger,{className:"h-14 bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-700 focus:ring-indigo-500 rounded-xl text-lg font-bold dark:text-white",children:(0,b.jsx)(K.SelectValue,{placeholder:"Select currency"})}),(0,b.jsx)(K.SelectContent,{className:"dark:bg-slate-900 dark:border-slate-800",children:e.map(a=>(0,b.jsx)(K.SelectItem,{value:a,className:"font-bold text-slate-700 dark:text-slate-200 dark:focus:bg-slate-800",children:a},a))})]})]})}var N=a.i(76249);function O({flowType:a,onChange:c}){return(0,b.jsxs)("div",{className:"flex bg-white dark:bg-slate-800 rounded-lg p-1 border border-slate-200 dark:border-slate-700 shadow-sm",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>c("INTERNATIONAL"),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${"INTERNATIONAL"===a?"bg-slate-900 text-white shadow-sm dark:bg-slate-700":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[(0,b.jsx)(k.Globe,{size:14,className:"inline mr-1"}),"International"]}),(0,b.jsxs)("button",{type:"button",onClick:()=>c("SAME"),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${"SAME"===a?"bg-slate-900 text-white shadow-sm dark:bg-slate-700":"text-slate-600 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-700/50"}`,children:[(0,b.jsx)(N.RefreshCw,{size:14,className:"inline mr-1"}),"Same Currency"]})]})}function P(){let{form:a,setForm:c,targetCurrency:d,setTargetCurrency:g,flowType:o,setFlowType:u,fundingSource:v,setFundingSource:w,payoutMethod:x,setPayoutMethod:B,loading:D,error:G,result:I,setResult:K,walletBalance:N,receiverName:P,setReceiverName:Q,receiverLoading:R,suggestions:S,showSuggestions:T,setSuggestions:U,setShowSuggestions:V,previewRate:W,previewConverted:X,previewLoading:Y,previewError:Z,previewFee:$,amountNumber:_,onChange:aa,onSubmit:ab,formErrors:ac}=function(a){let b=(0,r.useRouter)(),{user:c,refreshUser:d}=(0,s.useAuth)(),{register:e,handleSubmit:f,setValue:g,watch:h,formState:{errors:i},reset:j,trigger:k}=(0,z.useForm)({resolver:(0,A.zodResolver)(C),defaultValues:{receiver_id:"",amount:"",currency:"MWK",description:"",channel:"web",category:"transfer"},mode:"onChange"}),l=h("receiver_id"),m=h("amount"),n=h("currency"),o=h("description"),p=h("channel"),u=h("category"),[v,w]=(0,q.useState)("CNY"),[x,B]=(0,q.useState)("INTERNATIONAL"),[D,E]=(0,q.useState)("wallet_balance"),[F,G]=(0,q.useState)(""),[H,I]=(0,q.useState)(!1),[J,K]=(0,q.useState)(null),[L,M]=(0,q.useState)(null),[N,O]=(0,q.useState)(0),[P,Q]=(0,q.useState)(null),[R,S]=(0,q.useState)(!1),[T,U]=(0,q.useState)([]),[V,W]=(0,q.useState)(!1),[X,Y]=(0,q.useState)(null),[Z,$]=(0,q.useState)(null),[_,aa]=(0,q.useState)(!1),[ab,ac]=(0,q.useState)(null),[ad,ae]=(0,q.useState)(null),af=(0,q.useMemo)(()=>Number(m||0),[m]),ag=(0,q.useMemo)(()=>{let a=String(c?.countryCode||"").toUpperCase();return"CN"===a?"CNY":"MW"===a?"MWK":"ZM"===a?"ZMW":"MWK"},[c?.countryCode]),[ah,ai]=(0,q.useState)(!1);(0,q.useEffect)(()=>{!ah&&ag&&"MWK"===n&&"MWK"!==ag&&(g("currency",ag),ai(!0))},[ag,ah,n,g]),(0,q.useEffect)(()=>{(0,t.apiFetch)("/wallets").then(a=>{if(a&&a.wallets&&a.wallets.length>0){let b=a.wallets.find(a=>a.currency===n)||a.wallets[0];O(parseFloat(b.available_balance||b.balance||"0"))}}).catch(()=>{})},[n]),(0,q.useEffect)(()=>{let a=!0;return(async()=>{if(!n||!v||!af||af<=0){Y(null),$(null),ac(null);return}aa(!0),ac(null);try{let b=await (0,t.apiFetch)("/forex/calculate",{method:"POST",body:JSON.stringify({from:n,to:v,amount:af})}).catch(()=>null),c="number"==typeof b?.rate?b.rate:"string"==typeof b?.rate?parseFloat(b?.rate):null,d="number"==typeof b?.converted_amount?b.converted_amount:"string"==typeof b?.converted_amount?parseFloat(b.converted_amount):null,e="number"==typeof b?.fee_amount?b.fee_amount:"string"==typeof b?.fee_amount?parseFloat(b.fee_amount):null;if(!a)return;Y(c),$(d??(c?af*c:null)),ae(e??null)}catch(b){if(!a)return;ac(b?.message||"Failed to load rate"),Y(null),$(null)}finally{if(!a)return;aa(!1)}})(),()=>{a=!1}},[n,v,af]),(0,q.useEffect)(()=>{let a=setTimeout(async()=>{let a=(l||"").trim();if(a.length<3){U([]),W(!1),Q(null);return}if(16===a.length&&/^\d+$/.test(a)){W(!1),S(!0);try{let b=await (0,t.apiFetch)(`/wallets/lookup?address=${a}`);b&&b.name?Q(b.name):Q(null)}catch(a){Q(null)}finally{S(!1)}return}if(Q(null),a.length>=3&&a.length<16){S(!0);try{let b=await (0,t.apiFetch)(`/wallets/search?q=${a}`);Array.isArray(b)&&b.length>0?(U(b),W(!0)):(U([]),W(!1))}catch(a){U([]),W(!1)}finally{S(!1)}}},400);return()=>clearTimeout(a)},[l]);let aj=async c=>{if(!H){I(!0),K(null),M(null);try{if(!(0,t.isAuthenticated)())throw Error("Please login to send a payment");let a=y(c.currency,N).find(a=>a.value===D),b=a?.channel||"web";if(!F)throw Error("Please select a payout method");let e={receiver_wallet_number:String(c.receiver_id||"").trim(),amount:Number(c.amount),currency:c.currency,destination_currency:"INTERNATIONAL"===x?v:c.currency,description:c.description,channel:"mobile_money"===b?"mobile":"wallet"===b?"web":"bank"===b||"card"===b?"api":"web",category:D||c.category,location:"MW",device_id:"server-side-device-id"},f=await (0,t.apiFetch)("/payments/initiate",{method:"POST",body:JSON.stringify(e)});!f.receiver_name&&P&&(f.receiver_name=P),M(f);try{await d()}catch(a){console.warn("Failed to refresh user balance",a)}(0,t.apiFetch)("/wallets").then(a=>{if(a&&a.wallets&&a.wallets.length>0){let b=a.wallets.find(a=>a.currency===c.currency)||a.wallets[0],d=parseFloat(b.available_balance||b.balance||"0");O(d)}})}catch(e){let c=e?.data?.error||e?.message||"Payment failed",d=String(c).toLowerCase();e?.status===401||d.includes("invalid token")?(K("Please login to continue"),setTimeout(()=>b.push("/login"),600)):d.includes("duplicate request")?K(a("errors.duplicateRequest")||"Duplicate request detected"):d.includes("insufficient balance")?K(a("errors.insufficientBalance")||"Insufficient balance"):K(c)}finally{I(!1)}}};return{form:{receiver_id:l,amount:m,currency:n,description:o,channel:p,category:u},setForm:a=>{if("function"==typeof a){let b=a({receiver_id:l,amount:m,currency:n,description:o,channel:p,category:u});Object.keys(b).forEach(a=>g(a,b[a],{shouldValidate:!0}))}else Object.keys(a).forEach(b=>g(b,a[b],{shouldValidate:!0}))},register:e,formErrors:i,targetCurrency:v,setTargetCurrency:w,flowType:x,setFlowType:B,fundingSource:D,setFundingSource:E,payoutMethod:F,setPayoutMethod:G,loading:H,error:J,result:L,setResult:M,walletBalance:N,receiverName:P,setReceiverName:Q,receiverLoading:R,suggestions:T,showSuggestions:V,setSuggestions:U,setShowSuggestions:W,previewRate:X,previewConverted:Z,previewLoading:_,previewError:ab,previewFee:ad,amountNumber:af,onChange:a=>{let{name:b,value:c}=a.target;g(b,c,{shouldValidate:!0})},onSubmit:f(aj)}}(e("SendMoney")),ad=a.currency&&d&&_>0;return(0,b.jsxs)("div",{className:"space-y-8 max-w-7xl mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"relative overflow-hidden bg-slate-900 dark:bg-slate-950 rounded-[40px] p-8 md:p-12 text-white shadow-2xl",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-80 h-80 bg-green-500/10 blur-[120px] rounded-full"}),(0,b.jsxs)("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-green-400 font-bold text-[10px] uppercase tracking-[0.3em] mb-2",children:[(0,b.jsx)(n.Zap,{size:14,fill:"currentColor"})," Instant Settlement"]}),(0,b.jsx)("h1",{className:"text-4xl font-black tracking-tighter",children:"Send Funds"}),(0,b.jsx)("p",{className:"text-slate-400 font-medium",children:"Transfer money globally with bank-grade security."})]}),(0,b.jsx)(O,{flowType:o,onChange:u})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-start",children:[(0,b.jsx)("div",{className:"lg:col-span-8 space-y-6",children:(0,b.jsx)(f.Card,{className:"border-none shadow-[0_30px_60px_rgba(0,0,0,0.04)] rounded-[40px] bg-white dark:bg-slate-900",children:(0,b.jsx)(f.CardContent,{className:"p-8 md:p-12",children:(0,b.jsxs)("form",{id:"payment-form",onSubmit:ab,className:"space-y-12",children:[(0,b.jsxs)("div",{className:"space-y-6 relative z-30",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-xl bg-slate-900 dark:bg-slate-800 text-white flex items-center justify-center text-xs font-black",children:"1"}),(0,b.jsx)("h3",{className:"text-sm font-black text-slate-900 dark:text-white uppercase tracking-widest",children:"Recipient Details"})]}),(0,b.jsxs)("div",{className:"p-6 bg-slate-50 dark:bg-slate-800/50 rounded-[32px] border border-slate-100 dark:border-slate-800 relative",children:[(0,b.jsx)(J,{value:a.receiver_id,onChange:aa,loading:R,suggestions:S,showSuggestions:T,setShowSuggestions:V,onSelectSuggestion:a=>{c(b=>({...b,receiver_id:a})),U([]),V(!1)},receiverName:P}),ac.receiver_id&&(0,b.jsxs)("p",{className:"text-sm text-red-500 font-medium mt-2 px-1 flex items-center gap-2 animate-in fade-in slide-in-from-top-1",children:[(0,b.jsx)(l.AlertCircle,{size:14}),ac.receiver_id.message]})]})]}),(0,b.jsxs)("div",{className:"space-y-6 relative z-10",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-xl bg-slate-900 dark:bg-slate-800 text-white flex items-center justify-center text-xs font-black",children:"2"}),(0,b.jsx)("h3",{className:"text-sm font-black text-slate-900 dark:text-white uppercase tracking-widest",children:"Transfer Amount"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(L,{amount:a.amount,currency:a.currency,onChange:aa}),ac.amount&&(0,b.jsxs)("p",{className:"text-sm text-red-500 font-medium px-1 flex items-center gap-2 animate-in fade-in slide-in-from-top-1",children:[(0,b.jsx)(l.AlertCircle,{size:14}),ac.amount.message]})]}),"INTERNATIONAL"===o&&(0,b.jsx)(M,{targetCurrency:d,sourceCurrency:a.currency,onChange:a=>g(a)})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-xl bg-slate-900 dark:bg-slate-800 text-white flex items-center justify-center text-xs font-black",children:"3"}),(0,b.jsx)("h3",{className:"text-sm font-black text-slate-900 dark:text-white uppercase tracking-widest",children:"Payment Path"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(E,{currency:a.currency,walletBalance:N,value:v,onChange:w}),(0,b.jsx)(F,{targetCurrency:d,value:x,onChange:B})]})]}),(0,b.jsxs)("div",{className:"pt-6 space-y-4",children:[(0,b.jsx)(i.Button,{type:"submit",disabled:D,className:"w-full h-18 py-8 bg-green-600 hover:bg-green-700 text-white font-black text-xl rounded-[28px] shadow-2xl shadow-green-100 transition-all hover:scale-[1.01] active:scale-95",children:D?(0,b.jsx)(j.Loader2,{className:"animate-spin"}):"Confirm & Transfer Now"}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-[10px] font-bold text-slate-400 uppercase",children:[(0,b.jsx)(m.ShieldCheck,{size:14,className:"text-green-500"})," AES-256 Encrypted Payment"]})]})]})})})}),(0,b.jsxs)("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-8",children:[ad?(0,b.jsx)("div",{className:"animate-in fade-in slide-in-from-right-4 duration-500",children:(0,b.jsx)(h,{from:a.currency,to:d,amount:_,rate:W,converted:X,loading:Y,fee:$,error:Z})}):(0,b.jsxs)("div",{className:"p-8 bg-white dark:bg-slate-900 rounded-[32px] border border-dashed border-slate-200 dark:border-slate-800 text-center space-y-4 shadow-sm",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-slate-50 dark:bg-slate-800 rounded-2xl flex items-center justify-center mx-auto text-slate-300 dark:text-slate-600",children:(0,b.jsx)(k.Globe,{size:32})}),(0,b.jsxs)("p",{className:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest leading-relaxed",children:["Enter an amount to see",(0,b.jsx)("br",{}),"live exchange rates"]})]}),G&&(0,b.jsxs)("div",{className:"bg-red-500 text-white p-6 rounded-[32px] flex items-start gap-4 shadow-lg shadow-red-500/20 animate-in fade-in slide-in-from-bottom-2",children:[(0,b.jsx)("div",{className:"bg-white/20 p-2 rounded-full shrink-0 backdrop-blur-sm",children:(0,b.jsx)(l.AlertCircle,{className:"text-white",size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-black text-white text-sm uppercase tracking-wide",children:"Transaction Blocked"}),(0,b.jsx)("p",{className:"text-sm text-white/90 font-medium mt-1 leading-relaxed",children:G.includes("untrusted device")?"New device detected. For security, please log out and log in again to verify this device.":G})]})]}),I&&(0,b.jsx)(H,{result:I,amount:_,currency:a.currency,receiverName:P,onReset:()=>{c(a=>({...a,amount:"",description:"",receiver_id:""})),K(null),Q(null)}}),(0,b.jsxs)("div",{className:"p-6 bg-slate-100/50 dark:bg-slate-800/50 rounded-[32px] border border-slate-100 dark:border-slate-800 flex items-start gap-3",children:[(0,b.jsx)(p,{size:18,className:"text-slate-400 dark:text-slate-500 shrink-0 mt-0.5"}),(0,b.jsx)("p",{className:"text-[11px] font-medium text-slate-500 dark:text-slate-400 leading-relaxed",children:"Fees are calculated dynamically based on liquidity and network volume at the time of transfer."})]})]})]})]})}a.s(["default",()=>P],19465)}];

//# sourceMappingURL=fcc98_Projects_vaultstring-frontend_app_dashboard_send-money_page_tsx_4ade3018._.js.map