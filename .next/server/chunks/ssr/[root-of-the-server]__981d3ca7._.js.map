{"version":3,"sources":["../../../../../../../../Desktop/VaultString/Projects/vaultstring-frontend/node_modules/.pnpm/next%4016.0.8_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../../../../Desktop/VaultString/Projects/vaultstring-frontend/node_modules/.pnpm/next%4016.0.8_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../../../../Desktop/VaultString/Projects/vaultstring-frontend/node_modules/.pnpm/next%4016.0.8_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../../../Desktop/VaultString/Projects/vaultstring-frontend/node_modules/.pnpm/next%4016.0.8_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../../../../../Desktop/VaultString/Projects/vaultstring-frontend/app/%28auth%29/reset-password/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { useState, Suspense } from 'react';\r\nimport { AuthLayout } from '@/src/components/shared/AuthLayout';\r\nimport { InputField } from '@/src/components/forms/InputField';\r\nimport { Button } from '@/src/components/forms/Button';\r\nimport { useFormValidation } from '@/src/hooks/useFormValidation';\r\nimport { useToast } from '@/src/hooks/use-toast';\r\nimport { validators } from '@/src/lib/utils/validation';\r\nimport { requestPasswordReset, resetPassword } from '@/src/lib/auth/auth';\r\n\r\nfunction ResetPasswordContent() {\r\n  const router = useRouter();\r\n  const params = useSearchParams();\r\n  const token = params?.get('token') || '';\r\n  const [stage, setStage] = useState<'email' | 'reset' | 'success'>(token ? 'reset' : 'email');\r\n  const { toast } = useToast();\r\n\r\n  const emailForm = useFormValidation(\r\n    { email: '' },\r\n    async (values) => {\r\n      try {\r\n        await requestPasswordReset(String(values.email || ''));\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"If the email exists, a reset link has been sent.\",\r\n          variant: \"default\"\r\n        });\r\n        setStage('email');\r\n      } catch (err: any) {\r\n        emailForm.setFieldError('email', err?.message || 'Failed to send reset email');\r\n        toast({\r\n          variant: \"destructive\",\r\n          title: \"Error\",\r\n          description: err?.message || 'Failed to send reset email'\r\n        });\r\n      }\r\n    },\r\n    { email: validators.email }\r\n  );\r\n\r\n  const resetForm = useFormValidation(\r\n    { password: '', confirmPassword: '' },\r\n    async (values) => {\r\n      try {\r\n        if (values.password !== values.confirmPassword) {\r\n          resetForm.setFieldError('confirmPassword', 'Passwords do not match');\r\n          toast({\r\n            variant: \"destructive\",\r\n            title: \"Error\",\r\n            description: \"Passwords do not match\"\r\n          });\r\n          return;\r\n        }\r\n\r\n        if (!token) {\r\n          resetForm.setFieldError('password', 'Invalid or expired reset link');\r\n          toast({\r\n            variant: \"destructive\",\r\n            title: \"Error\",\r\n            description: \"Invalid or expired reset link\"\r\n          });\r\n          return;\r\n        }\r\n\r\n        await resetPassword(token, String(values.password || ''));\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"Password reset successfully!\",\r\n          variant: \"default\"\r\n        });\r\n        setStage('success');\r\n      } catch (err: any) {\r\n        resetForm.setFieldError('password', err?.message || 'Password reset failed');\r\n        toast({\r\n          variant: \"destructive\",\r\n          title: \"Error\",\r\n          description: err?.message || 'Password reset failed'\r\n        });\r\n      }\r\n    }\r\n  );\r\n\r\n  if (stage === 'email') {\r\n    return (\r\n      <>\r\n        <AuthLayout title=\"Reset Password\" subtitle=\"Enter your email to receive reset instructions\">\r\n          <form onSubmit={emailForm.handleSubmit} className=\"space-y-6\">\r\n            <InputField\r\n              label=\"Email Address\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              value={emailForm.values.email}\r\n              onChange={emailForm.handleChange}\r\n              error={emailForm.errors.email}\r\n              placeholder=\"you@example.com\"\r\n              required\r\n              autoComplete=\"email\"\r\n            />\r\n\r\n            <Button type=\"submit\" loading={emailForm.isSubmitting}>\r\n              Send Reset Link\r\n            </Button>\r\n\r\n            <p className=\"text-center text-sm text-gray-600\">\r\n              Remember your password? <Link href=\"/login\" className=\"text-blue-600 hover:text-blue-700\">Sign in</Link>\r\n            </p>\r\n          </form>\r\n        </AuthLayout>\r\n      </>\r\n    );\r\n  }\r\n\r\n  if (stage === 'reset') {\r\n    return (\r\n      <>\r\n        <AuthLayout title=\"Create New Password\" subtitle=\"Enter your new password below\">\r\n          <form onSubmit={resetForm.handleSubmit} className=\"space-y-6\">\r\n            <InputField\r\n              label=\"New Password\"\r\n              name=\"password\"\r\n              type=\"password\"\r\n              value={resetForm.values.password}\r\n              onChange={resetForm.handleChange}\r\n              error={resetForm.errors.password}\r\n              placeholder=\"••••••••\"\r\n              required\r\n              autoComplete=\"new-password\"\r\n            />\r\n\r\n            <InputField\r\n              label=\"Confirm Password\"\r\n              name=\"confirmPassword\"\r\n              type=\"password\"\r\n              value={resetForm.values.confirmPassword}\r\n              onChange={resetForm.handleChange}\r\n              error={resetForm.errors.confirmPassword}\r\n              placeholder=\"••••••••\"\r\n              required\r\n              autoComplete=\"new-password\"\r\n            />\r\n\r\n            <p className=\"text-xs text-gray-500 bg-blue-50 p-3 rounded\">⏱ This reset link will expire in 1 hour</p>\r\n\r\n            <Button type=\"submit\" loading={resetForm.isSubmitting}>\r\n              Reset Password\r\n            </Button>\r\n          </form>\r\n        </AuthLayout>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <AuthLayout title=\"Password Reset Successful\" subtitle=\"Your password has been updated\">\r\n        <div className=\"space-y-6 text-center\">\r\n          <div className=\"text-5xl\">✓</div>\r\n          <p className=\"text-gray-600\">Your password has been reset. You can now sign in with your new password.</p>\r\n          <Button onClick={() => router.push('/login')}>Return to Sign In</Button>\r\n        </div>\r\n      </AuthLayout>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default function ResetPasswordPage() {\r\n  return (\r\n    <Suspense fallback={<AuthLayout title=\"Reset Password\" subtitle=\"Create a new password\"><div /></AuthLayout>}>\r\n      <ResetPasswordContent />\r\n    </Suspense>\r\n  );\r\n}\r\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml","AppRouterContext","ReactServerDOMTurbopackClient"],"mappings":"6CAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,kBAAkB,+BCFzCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,kiBCFzCL,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACG,gBAAgB,+BCFvCN,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEI,6BAA6B,0CCAtD,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OAEA,SAAS,IACP,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAS,CAAA,EAAA,EAAA,eAAA,AAAe,IACxB,EAAQ,GAAQ,IAAI,UAAY,GAChC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgC,EAAQ,QAAU,SAC9E,OAAE,CAAK,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,IAEpB,EAAY,CAAA,EAAA,EAAA,iBAAiB,AAAjB,EAChB,CAAE,MAAO,EAAG,EACZ,MAAO,IACL,GAAI,CACF,MAAM,CAAA,EAAA,EAAA,oBAAA,AAAoB,EAAC,OAAO,EAAO,KAAK,EAAI,KAClD,EAAM,CACJ,MAAO,UACP,YAAa,mDACb,QAAS,SACX,GACA,EAAS,QACX,CAAE,MAAO,EAAU,CACjB,EAAU,aAAa,CAAC,QAAS,GAAK,SAAW,8BACjD,EAAM,CACJ,QAAS,cACT,MAAO,QACP,YAAa,GAAK,SAAW,4BAC/B,EACF,CACF,EACA,CAAE,MAAO,EAAA,UAAU,CAAC,KAAK,AAAC,GAGtB,EAAY,CAAA,EAAA,EAAA,iBAAA,AAAiB,EACjC,CAAE,SAAU,GAAI,gBAAiB,EAAG,EACpC,MAAO,IACL,GAAI,CACF,GAAI,EAAO,QAAQ,GAAK,EAAO,eAAe,CAAE,CAC9C,EAAU,aAAa,CAAC,kBAAmB,0BAC3C,EAAM,CACJ,QAAS,cACT,MAAO,QACP,YAAa,wBACf,GACA,MACF,CAEA,GAAI,CAAC,EAAO,CACV,EAAU,aAAa,CAAC,WAAY,iCACpC,EAAM,CACJ,QAAS,cACT,MAAO,QACP,YAAa,+BACf,GACA,MACF,CAEA,MAAM,CAAA,EAAA,EAAA,aAAa,AAAb,EAAc,EAAO,OAAO,EAAO,QAAQ,EAAI,KACrD,EAAM,CACJ,MAAO,UACP,YAAa,+BACb,QAAS,SACX,GACA,EAAS,UACX,CAAE,MAAO,EAAU,CACjB,EAAU,aAAa,CAAC,WAAY,GAAK,SAAW,yBACpD,EAAM,CACJ,QAAS,cACT,MAAO,QACP,YAAa,GAAK,SAAW,uBAC/B,EACF,CACF,SAGF,AAAc,SAAS,CAAnB,EAEA,CAAA,EAAA,EAAA,GAAA,EAAA,EAAA,QAAA,CAAA,UACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,iBAAiB,SAAS,0DAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAU,YAAY,CAAE,UAAU,sBAChD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CACT,MAAM,gBACN,KAAK,QACL,KAAK,QACL,MAAO,EAAU,MAAM,CAAC,KAAK,CAC7B,SAAU,EAAU,YAAY,CAChC,MAAO,EAAU,MAAM,CAAC,KAAK,CAC7B,YAAY,kBACZ,QAAQ,CAAA,CAAA,EACR,aAAa,UAGf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,QAAS,EAAU,YAAY,UAAE,oBAIvD,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,8CAAoC,2BACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,SAAS,UAAU,6CAAoC,sBAQlG,AAAU,SAAS,GAEnB,CAAA,EAAA,EAAA,GAAA,EAAA,EAAA,QAAA,CAAA,UACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,sBAAsB,SAAS,yCAC/C,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAU,YAAY,CAAE,UAAU,sBAChD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CACT,MAAM,eACN,KAAK,WACL,KAAK,WACL,MAAO,EAAU,MAAM,CAAC,QAAQ,CAChC,SAAU,EAAU,YAAY,CAChC,MAAO,EAAU,MAAM,CAAC,QAAQ,CAChC,YAAY,WACZ,QAAQ,CAAA,CAAA,EACR,aAAa,iBAGf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CACT,MAAM,mBACN,KAAK,kBACL,KAAK,WACL,MAAO,EAAU,MAAM,CAAC,eAAe,CACvC,SAAU,EAAU,YAAY,CAChC,MAAO,EAAU,MAAM,CAAC,eAAe,CACvC,YAAY,WACZ,QAAQ,CAAA,CAAA,EACR,aAAa,iBAGf,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wDAA+C,4CAE5D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,QAAS,EAAU,YAAY,UAAE,0BAU/D,CAAA,EAAA,EAAA,GAAA,EAAA,EAAA,QAAA,CAAA,UACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,4BAA4B,SAAS,0CACrD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oBAAW,MAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAgB,8EAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,EAAO,IAAI,CAAC,mBAAW,4BAKxD,CAEe,SAAS,IACtB,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,SAAU,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,iBAAiB,SAAS,iCAAwB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAA,cACvF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,IAGP","ignoreList":[0,1,2,3]}