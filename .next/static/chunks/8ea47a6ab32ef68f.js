(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61200,e=>{"use strict";let t=`${"http://127.0.0.1:9000".replace(/\/$/,"")}/api/v1`,r="kyd_access_token",n="kyd_user_profile";function a(){return!!o()}function o(){return localStorage.getItem(r)}function i(e){e?localStorage.setItem(r,e):localStorage.removeItem(r)}function s(){let e=localStorage.getItem(n);if(!e)return null;try{return JSON.parse(e)}catch{return null}}function u(e){e?localStorage.setItem(n,JSON.stringify(e)):localStorage.removeItem(n)}async function l(e,r={}){let n,a=`${t.replace(/\/$/,"")}${e.startsWith("/")?e:"/"+e}`,i={"Content-Type":"application/json",...r.headers||{}},s=o(),u=["/auth/login","/auth/register","/auth/password/reset","/auth/password/reset/confirm","/auth/verify","/auth/verify/resend","/auth/magic-link"];!s||i.Authorization||u.some(t=>e.startsWith(t))||(i.Authorization=`Bearer ${s}`);let c=String(r.method||"GET").toUpperCase();"POST"!==c&&"PUT"!==c&&"PATCH"!==c&&"DELETE"!==c||u.some(t=>e.startsWith(t))||i["Idempotency-Key"]||(i["Idempotency-Key"]=function(){try{if(window.crypto&&window.crypto.getRandomValues){let e=new Uint8Array(16);return window.crypto.getRandomValues(e),Array.from(e,e=>e.toString(16).padStart(2,"0")).join("")}}catch{}return`web-${Date.now()}-${Math.random().toString(16).slice(2)}`}());let d="";try{n=await fetch(a,{...r,headers:i,credentials:"include"}),d=await n.text()}catch(e){await function(e=500){return new Promise(t=>setTimeout(t,e))}(300),n=await fetch(a,{...r,headers:i,credentials:"include"}),d=await n.text()}let h=(n.headers.get("content-type")||"").toLowerCase().includes("application/json"),m=null;if(h&&d)try{m=JSON.parse(d)}catch{m=null}if(!n.ok){let e=Error(String(m&&(m.error||m.message)||d||n.statusText||"API request failed"));throw e.status=n.status,e.data=m??d??null,e}return m??(h?null:d||null)}e.s(["apiFetch",()=>l,"getToken",()=>o,"getUser",()=>s,"isAuthenticated",()=>a,"setToken",()=>i,"setUser",()=>u])},94436,e=>{"use strict";var t=e.i(40179),r=e.i(128),n=e.i(61200);let a=(0,r.createContext)({user:null,setUser:()=>{}});function o({children:e}){let[o,i]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=(0,n.getToken)(),t=(0,n.getUser)();if(e&&t){let e=t?.first_name&&t?.last_name?`${t.first_name} ${t.last_name}`:t?.name||t?.email||"User",r=String(t?.country_code||"").toUpperCase(),n=String(t?.user_type||"").toLowerCase(),a="Personal Account";"MW"===r&&"individual"===n?a="Sender (Malawi)":"CN"===r&&("merchant"===n||"agent"===n)?a="Receiver (China)":"merchant"===n?a="Business Account":"agent"===n&&(a="Agent Account"),i({name:e,email:String(t?.email||""),phone:String(t?.phone||""),kycStatus:"verified",avatarUrl:"/icons/avatar-default.png",accountLabel:a,countryCode:r,userType:n})}},[]);let s=(0,r.useMemo)(()=>({user:o,setUser:e=>{i(e)}}),[o]);return(0,t.jsx)(a.Provider,{value:s,children:e})}function i(){return(0,r.useContext)(a)}e.s(["AuthProvider",()=>o,"useAuth",()=>i])}]);