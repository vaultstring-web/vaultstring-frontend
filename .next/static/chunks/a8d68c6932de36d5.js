(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,76999,e=>{"use strict";var t=e.i(89997),r=e.i(88871),a=e.i(39601),s=e.i(3918);let l=(0,a.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function i({className:e,variant:a,size:i,asChild:n=!1,...d}){let o=n?r.Slot:"button";return(0,t.jsx)(o,{"data-slot":"button",className:(0,s.cn)(l({variant:a,size:i,className:e})),...d})}e.s(["Button",()=>i,"buttonVariants",()=>l])},9568,e=>{"use strict";let t=(0,e.i(84430).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],9568)},746,e=>{"use strict";let t=(0,e.i(84430).default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>t],746)},41646,e=>{"use strict";let t=(0,e.i(84430).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],41646)},41890,36803,87557,e=>{"use strict";var t=e.i(84430);let r=(0,t.default)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);e.s(["ArrowUpRight",()=>r],41890);let a=(0,t.default)("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);e.s(["ArrowDownLeft",()=>a],36803);var s=e.i(42840),l=e.i(61200),i=e.i(94436);function n(e=10){let{user:t}=(0,i.useAuth)(),r=t?.id||t?.ID||null,[a,d]=(0,s.useState)([]),[o,c]=(0,s.useState)(!0),[u,x]=(0,s.useState)(null),[h,g]=(0,s.useState)(0),[m,p]=(0,s.useState)(1),[b,v]=(0,s.useState)(e),[f,k]=(0,s.useState)({query:"",status:"all",walletId:null,tab:"all"}),w=async()=>{c(!0);try{let e=(m-1)*b,t=`/payments?limit=${b}&offset=${e}`;f.walletId&&(t+=`&wallet_id=${f.walletId}`);let r=await (0,l.apiFetch)(t),a=(Array.isArray(r?.transactions)?r.transactions:[]).filter(Boolean);d(a),g(r?.total||0),x(null)}catch(e){console.error("Failed to fetch transactions:",e),x(e?.message||"Failed to load transactions"),d([])}finally{c(!1)}};(0,s.useEffect)(()=>{t&&w()},[t,m,b,f.walletId]);let y=(0,s.useMemo)(()=>a.filter(e=>{let t,a,s,l;if(!e)return!1;let i=f.query.trim().toLowerCase(),n=String(e.sender_id||e.senderId||""),d=String(e.receiver_id||e.receiverId||""),o=n?`...${n.slice(-4)}`:"",c=d?`...${d.slice(-4)}`:"",u=String(e.sender_wallet_number||e.sender_wallet||o).toLowerCase(),x=String(e.receiver_wallet_number||e.receiver_wallet||c).toLowerCase(),h=String(e.sender_name||e.SenderName||"").toLowerCase(),g=String(e.receiver_name||e.ReceiverName||"").toLowerCase(),m=!i||String(e.reference||e.id||"").toLowerCase().includes(i)||String(e.amount||"").toLowerCase().includes(i)||u.includes(i)||x.includes(i)||h.includes(i)||g.includes(i),p="all"===f.status||String(e.status||"").toLowerCase()===f.status,b=!f.walletId||String(e.sender_wallet_id||"").toLowerCase()===f.walletId.toLowerCase()||String(e.receiver_wallet_id||"").toLowerCase()===f.walletId.toLowerCase(),v=(t=String(e.transaction_type||e.type||"").toLowerCase(),a=n.toLowerCase(),s=d.toLowerCase(),l=String(r||"").toLowerCase(),"all"===f.tab||("sent"===f.tab?l&&a===l:"received"===f.tab?l&&s===l:"topup"===f.tab?"deposit"===t:"pending_settlement"!==f.tab||"pending"===String(e.status||"").toLowerCase()));return m&&p&&v&&b}),[a,f,r]),j=(0,s.useMemo)(()=>({total:h||a.length,completed:a.filter(e=>e&&"completed"===String(e.status||"").toLowerCase()).length,pending:a.filter(e=>e&&"pending"===String(e.status||"").toLowerCase()).length,received:a.filter(e=>e&&String(e.receiver_id||e.receiverId||"")===String(r||"")).length,sent:a.filter(e=>e&&String(e.sender_id||e.senderId||"")===String(r||"")).length}),[a,h,r]),N=Math.ceil(h/b);return{transactions:a,filteredTransactions:y,loading:o,error:u,total:h,page:m,limit:b,totalPages:N,setPage:p,setLimit:v,filters:f,setFilters:k,stats:j,refresh:w}}e.s(["useTransactions",()=>n],87557)},90075,43881,e=>{"use strict";var t=e.i(42840),r=e.i(61200),a=e.i(94436);function s(){let{user:e}=(0,a.useAuth)(),[s,l]=(0,t.useState)([]),[i,n]=(0,t.useState)({}),[d,o]=(0,t.useState)({}),[c,u]=(0,t.useState)(!0),x=async()=>{u(!0);try{let[e,t]=await Promise.all([(0,r.apiFetch)("/wallets",{cache:"no-store"}).catch(()=>null),(0,r.apiFetch)("/forex/rates",{cache:"no-store"}).catch(()=>null)]),a=(Array.isArray(e?.wallets)?e.wallets:[]).filter(Boolean);l(a);let s={},i={};t?.rates&&Array.isArray(t.rates)?t.rates.forEach(e=>{let t=`${e.base_currency}-${e.target_currency}`;s[t]=parseFloat(e.rate),i[t]={rate:parseFloat(e.rate),change24h:parseFloat(e.change_24h||0),changePercent:parseFloat(e.change_percent||0),high24h:parseFloat(e.high_24h||e.rate),low24h:parseFloat(e.low_24h||e.rate),lastUpdated:e.last_updated},"MWK"===e.base_currency&&"CNY"===e.target_currency&&(s.mwkToCny=parseFloat(e.rate)),"CNY"===e.base_currency&&"MWK"===e.target_currency&&(s.cnyToMwk=parseFloat(e.rate)),"USD"===e.base_currency&&"MWK"===e.target_currency&&(s.usdToMwk=parseFloat(e.rate))}):(s.mwkToCny=.0041,s.cnyToMwk=243.90243902439022,s["MWK-CNY"]=.0041,s["CNY-MWK"]=243.90243902439022),n(s),o(i)}catch(e){console.error("Failed to fetch wallet stats",e)}finally{u(!1)}};(0,t.useEffect)(()=>{e&&x()},[e]);let h=(0,t.useMemo)(()=>{let t=s.reduce((e,t)=>{let r=parseFloat(String(t.available_balance??t.balance??0)),a=String(t.currency).toUpperCase();return"MWK"===a?e+r:"CNY"===a?e+r*(i.cnyToMwk||243.90243902439022):"USD"===a?e+r*(i.usdToMwk||1745):e+r},0),r=s.reduce((e,t)=>{let r=parseFloat(String(t.available_balance??t.balance??0)),a=String(t.currency).toUpperCase();return"CNY"===a?e+r:"MWK"===a?e+r*(i.mwkToCny||.0041):"USD"===a?e+r*(i.usdToMwk||1745)*(i.mwkToCny||.0041):e+r},0),a="CN"===String(e?.countryCode||"").toUpperCase()?"CNY":"MWK";return{balanceMWK:Math.round(t),balanceCNY:Math.round(r),primaryCurrency:a,lastDepositDate:new Date().toISOString().slice(0,10),monthlyLimit:5e6,spentThisMonth:Math.round(("CNY"===a?r:t)*.15)}},[s,i,e]);return{wallets:s,stats:h,rates:i,rateDetails:d,loading:c,refetch:()=>x()}}e.s(["EXCHANGE_RATE_CNY_TO_MWK",0,243.90243902439022,"EXCHANGE_RATE_MWK_TO_CNY",0,.0041],43881),e.s(["useWalletStats",()=>s],90075)},9570,e=>{"use strict";let t=(0,e.i(84430).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>t],9570)},9671,e=>{"use strict";e.s(["formatCurrency",0,(e,t="MWK")=>{let r=parseFloat(String(e||0));if(isNaN(r))return"0.00";try{return new Intl.NumberFormat("en-US",{style:"currency",currency:t||"MWK",minimumFractionDigits:2}).format(r)}catch(e){return`${t} ${r.toFixed(2)}`}},"formatWalletNumber",0,e=>{if(!e)return".... .... .... ....";let t=String(e).replace(/\D/g,"").padEnd(16,"0").slice(0,16);return t.match(/.{1,4}/g)?.join(" ")||t},"generateFallbackWalletNumber",0,e=>{let t={a:"1",b:"2",c:"3",d:"4",e:"5",f:"6","-":""};return(String(e).toLowerCase().split("").map(e=>t[e]||e).join("").replace(/\D/g,"")+"4539102834756192").slice(0,16)},"getWalletGradient",0,e=>{switch(String(e).toUpperCase()){case"MWK":return"bg-gradient-to-br from-emerald-600 to-teal-800";case"ZMW":return"bg-gradient-to-br from-orange-500 to-amber-700";case"CNY":return"bg-gradient-to-br from-rose-500 to-red-800";default:return"bg-gradient-to-br from-slate-700 to-slate-900"}}])},36203,e=>{"use strict";let t=(0,e.i(84430).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],36203)},25970,e=>{"use strict";var t=e.i(89997),r=e.i(36203),a=e.i(9570),s=e.i(41890),l=e.i(9568),i=e.i(76999),n=e.i(90075),d=e.i(9671);function o({selectedWalletId:e,onSelectWallet:o}){let{stats:c,wallets:u,loading:x}=(0,n.useWalletStats)(),h=u.find(e=>e.currency===c.primaryCurrency)||u[0],g=u.filter(e=>e.id!==h?.id),m=t=>{o&&o(e===t?null:t)};return x&&0===u.length?(0,t.jsx)("div",{className:"h-[220px] bg-slate-100 dark:bg-slate-800 rounded-[24px] animate-pulse flex items-center justify-center",children:(0,t.jsx)(l.Loader2,{className:"animate-spin text-slate-400"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"text-xl font-black text-slate-900 dark:text-white flex items-center gap-2",children:["My Cards ",(0,t.jsx)(s.ArrowUpRight,{size:18,className:"text-slate-400"})]}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",className:"text-indigo-600 font-bold hover:text-indigo-700 hover:bg-indigo-50 dark:hover:bg-indigo-900/30",children:"Manage"})]}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("div",{className:"absolute top-2 right-2 w-full h-full bg-slate-800 dark:bg-slate-700 rounded-[24px] rotate-3 opacity-10 scale-95 transition-transform group-hover:rotate-6 duration-500"}),(0,t.jsx)("div",{className:"absolute top-1 right-1 w-full h-full bg-slate-900 dark:bg-slate-600 rounded-[24px] rotate-1 opacity-10 scale-[0.98] transition-transform group-hover:rotate-3 duration-500"}),(0,t.jsxs)("div",{onClick:()=>h&&m(h.id),className:`relative ${(0,d.getWalletGradient)(h?.currency||"MWK")} p-6 rounded-[24px] shadow-xl overflow-hidden min-h-[220px] flex flex-col justify-between transition-all duration-300 hover:-translate-y-1 cursor-pointer ${e===h?.id?"ring-4 ring-indigo-500 ring-offset-2 dark:ring-offset-slate-900":""}`,children:[(0,t.jsx)("div",{className:"absolute inset-0 opacity-10 bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"}),(0,t.jsxs)("div",{className:"relative z-10 flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-white/80 font-bold text-sm mb-1",children:"Total Balance"}),(0,t.jsx)("h3",{className:"text-3xl font-black text-white",children:(0,d.formatCurrency)(h?.available_balance||0,h?.currency||"MWK")})]}),(0,t.jsx)("div",{className:"bg-white/20 backdrop-blur-md p-2 rounded-xl",children:(0,t.jsx)(s.ArrowUpRight,{className:"text-white"})})]}),(0,t.jsx)("div",{className:"relative z-10",children:(0,t.jsxs)("div",{className:"flex justify-between items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-white/60 font-bold text-xs uppercase tracking-wider mb-1",children:"Wallet ID"}),(0,t.jsx)("p",{className:"font-mono text-white font-bold text-lg tracking-wider",children:h?(0,d.formatWalletNumber)(h.id):"•••• •••• •••• ••••"})]}),(0,t.jsx)("div",{className:"h-8 px-3 flex items-center bg-white/20 backdrop-blur-sm rounded-lg border border-white/10",children:(0,t.jsx)("span",{className:"text-white font-bold text-xs",children:h?.currency||"MWK"})})]})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-[24px] p-4 flex flex-col items-center justify-center border-2 border-dashed border-slate-300 dark:border-slate-700 hover:border-indigo-300 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors cursor-pointer group",children:[(0,t.jsx)("div",{className:"h-10 w-10 bg-white dark:bg-slate-700 rounded-full shadow-sm flex items-center justify-center mb-2 group-hover:scale-110 transition-transform",children:(0,t.jsx)(r.Plus,{className:"text-slate-400 group-hover:text-indigo-600 dark:text-slate-400 dark:group-hover:text-indigo-400"})}),(0,t.jsx)("span",{className:"text-xs font-bold text-slate-500 group-hover:text-indigo-600 dark:text-slate-400 dark:group-hover:text-indigo-400",children:"Add New Card"})]}),g.map(r=>(0,t.jsxs)("div",{onClick:()=>m(r.id),className:`bg-slate-900 dark:bg-slate-950 rounded-[24px] p-5 relative overflow-hidden group cursor-pointer border border-slate-800 dark:border-slate-800 transition-all ${e===r.id?"ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-slate-900":""}`,children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-indigo-500 rounded-full blur-2xl -mr-10 -mt-10 opacity-20"}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,t.jsx)("div",{className:"text-white/60 font-mono text-xs",children:(0,d.formatWalletNumber)(r.id).slice(-4).padStart(8,"• ")}),(0,t.jsx)(a.CreditCard,{className:"text-white/80",size:16})]}),(0,t.jsx)("div",{className:"text-white font-black text-sm truncate",children:(0,d.formatCurrency)(r.available_balance,r.currency)}),(0,t.jsx)("div",{className:"text-indigo-300 text-[10px] font-bold mt-1",children:r.currency})]})]},r.id))]})]})}var c=e.i(84430);let u=(0,c.default)("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]),x=(0,c.default)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),h=(0,c.default)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);var g=e.i(746);function m({transactions:e,userId:r,onViewReceipt:a,onViewAll:s,showViewAll:l=!0}){return(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-[32px] p-8 shadow-sm border border-slate-100 dark:border-slate-800 h-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-black text-slate-900 dark:text-white",children:"Transactions"}),l&&(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",className:"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300",onClick:s,children:"View all"})]}),(0,t.jsx)("div",{className:"space-y-6",children:0===e.length?(0,t.jsx)("div",{className:"text-center py-10 text-slate-400 dark:text-slate-500 font-medium",children:"No transactions yet"}):e.map(e=>{let s,l;if(!e)return null;let i=e.receiver_id===r;e.sender_id;let n=(0,d.formatCurrency)(i?e.amount:e.total_debited||e.amount,e.currency),o=`${i?"+":"-"}${n}`;return(0,t.jsxs)("div",{className:"flex items-center justify-between group cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800 -mx-4 p-4 rounded-2xl transition-colors",onClick:()=>a?.(e.id),children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:`h-12 w-12 rounded-2xl flex items-center justify-center ${(s=(e.description||e.category||"").toLowerCase()).includes("coffee")?"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/10 dark:text-emerald-400":s.includes("netflix")?"bg-red-100 text-red-600 dark:bg-red-500/10 dark:text-red-400":s.includes("shop")?"bg-blue-100 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400":"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400"}`,children:(l=(e.description||e.category||"").toLowerCase()).includes("coffee")||l.includes("starbucks")?(0,t.jsx)(u,{size:16}):l.includes("netflix")||l.includes("subscription")?(0,t.jsx)(x,{size:16}):l.includes("shop")||l.includes("store")?(0,t.jsx)(h,{size:16}):(0,t.jsx)(g.Zap,{size:16})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-bold text-slate-900 dark:text-white mb-0.5",children:i?e.sender_name||e.SenderName||e.sender?.name||"Unknown Sender":e.receiver_name||e.ReceiverName||e.receiver?.name||e.description||"Unknown Receiver"}),(0,t.jsx)("div",{className:"text-xs text-slate-400 dark:text-slate-500 font-medium",suppressHydrationWarning:!0,children:(()=>{try{return e.created_at?new Date(e.created_at).toLocaleString("en-US",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Date Pending"}catch{return"Invalid Date"}})()})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:`font-black text-sm ${i?"text-emerald-600 dark:text-emerald-400":"text-slate-900 dark:text-white"}`,children:o}),(0,t.jsx)("div",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded-full inline-block mt-1 uppercase tracking-wide",children:e.status})]})]},e.id)})})]})}var p=e.i(89093),b=e.i(5301),v=e.i(36803),f=e.i(41646);let k=(0,c.default)("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),w=(0,c.default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var y=e.i(87557),j=e.i(94436),N=e.i(42840);let S=(0,c.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);class C extends N.default.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,t.jsxs)("div",{className:"p-6 bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 rounded-2xl flex flex-col items-center justify-center text-center min-h-[200px]",children:[(0,t.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 p-3 rounded-full mb-4",children:(0,t.jsx)(S,{className:"text-red-600 dark:text-red-400",size:24})}),(0,t.jsx)("h3",{className:"text-lg font-bold text-red-900 dark:text-red-200 mb-2",children:"Something went wrong"}),(0,t.jsx)("p",{className:"text-sm text-red-600 dark:text-red-300 mb-4 max-w-md",children:this.state.error?.message||"An unexpected error occurred while loading this component."}),(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>this.setState({hasError:!1}),className:"border-red-200 dark:border-red-800 text-red-700 dark:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/30",children:"Try Again"})]}):this.props.children}}function _(){let{user:e}=(0,j.useAuth)(),r=e?.id||e?.ID||null,{filteredTransactions:a,loading:l,error:n,page:d,totalPages:c,setPage:u,filters:x,setFilters:h,stats:g,setLimit:N,limit:S}=(0,y.useTransactions)(5);return(0,t.jsxs)("div",{className:"space-y-8 max-w-7xl mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h1",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight",children:"Financial Overview"}),(0,t.jsx)("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Manage your cards and review activity."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(i.Button,{variant:"outline",className:"rounded-xl h-10 px-4 font-bold text-slate-600 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-800",children:[(0,t.jsx)(w,{size:16,className:"mr-2"})," Select Dates"]}),(0,t.jsxs)(i.Button,{onClick:()=>{!function(e,t="transactions",r=null){if(!e||0===e.length)return;let a=new Blob([["Reference,Date,Description,Amount,Currency,Status,Sender,Receiver",...e.map(e=>{let t=String(e.reference||e.id||""),a=String(e.amount??e.net_amount??0),s=String(e.currency||""),l=String(e.sender_id||e.senderId||""),i=String(e.receiver_id||e.receiverId||""),n="unknown";r&&(n=l===r?"sent":"received");let d=e.sender_wallet_number||(l?`...${l.slice(-4)}`:""),o=e.receiver_wallet_number||(i?`...${i.slice(-4)}`:""),c=e.sender_name||e.SenderName||d,u=e.receiver_name||e.ReceiverName||o,x=e.description||"";x||"unknown"===n?x||(x=`Transfer from ${c} to ${u}`):x="sent"===n?`Sent to ${u}`:`Received from ${c}`;let h=String(e.status||"");return[t,String(e.created_at||e.initiated_at||""),x,a,s,h,c,u].map(e=>`"${String(e).replace(/"/g,'""')}"`).join(",")})].join("\n")],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(a),l=document.createElement("a");l.href=s,l.download=`${t}_${new Date().toISOString().slice(0,10)}.csv`,l.click(),URL.revokeObjectURL(s)}(a,"vaultstring_statement",r)},className:"rounded-xl bg-slate-900 dark:bg-emerald-600 text-white h-10 px-4 font-bold shadow-lg hover:bg-slate-800 dark:hover:bg-emerald-700",children:[(0,t.jsx)(k,{size:16,className:"mr-2"})," Export"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-8 items-start",children:[(0,t.jsxs)("div",{className:"xl:col-span-5 space-y-8",children:[(0,t.jsx)(C,{children:(0,t.jsx)(o,{selectedWalletId:x.walletId,onSelectWallet:e=>h(t=>({...t,walletId:e}))})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(M,{label:"Inflow",value:g?.received||"0",icon:(0,t.jsx)(v.ArrowDownLeft,{}),color:"green"}),(0,t.jsx)(M,{label:"Outflow",value:g?.sent||"0",icon:(0,t.jsx)(s.ArrowUpRight,{}),color:"indigo"}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsx)(M,{label:"Pending Settlement",value:g?.pending||"0",icon:(0,t.jsx)(f.Clock,{}),color:"amber"})})]})]}),(0,t.jsxs)("div",{className:"xl:col-span-7 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 p-2 rounded-[20px] shadow-sm border border-slate-100 dark:border-slate-800 flex flex-col sm:flex-row items-center gap-2",children:[(0,t.jsx)("div",{className:"flex bg-slate-50 dark:bg-slate-950 p-1 rounded-2xl w-full sm:w-auto",children:[{id:"all",label:"All"},{id:"sent",label:"Sent"},{id:"received",label:"Received"}].map(e=>(0,t.jsx)("button",{onClick:()=>h(t=>({...t,tab:e.id})),className:`flex-1 px-4 py-2 rounded-xl text-xs font-bold transition-all duration-200 ${x.tab===e.id?"bg-white dark:bg-slate-800 text-slate-900 dark:text-white shadow-sm":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300"}`,children:e.label},e.id))}),(0,t.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,t.jsx)(b.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:16}),(0,t.jsx)(p.Input,{placeholder:"Search transactions...",className:"pl-10 h-10 bg-transparent border-transparent focus:bg-slate-50 dark:focus:bg-slate-800 rounded-xl font-medium text-sm text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-600",value:x.query,onChange:e=>h(t=>({...t,query:e.target.value}))})]})]}),l?(0,t.jsxs)("div",{className:"p-20 text-center bg-white dark:bg-slate-900 rounded-[32px] border border-slate-100 dark:border-slate-800",children:[(0,t.jsx)("div",{className:"animate-spin h-8 w-8 border-[3px] border-indigo-500 border-t-transparent rounded-full mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-slate-400 dark:text-slate-500 font-bold text-xs",children:"Loading..."})]}):(0,t.jsxs)(C,{children:[(0,t.jsx)(m,{transactions:a,userId:r,onViewAll:()=>{N(50),u(1)},showViewAll:S<20}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-4",children:[(0,t.jsxs)("p",{className:"text-xs font-bold text-slate-400 dark:text-slate-500",children:["Page ",d," of ",c]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>{d>1&&u(e=>e-1)},disabled:d<=1,className:"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200",children:"Previous"}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>{d<c&&u(e=>e+1)},disabled:d>=c,className:"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200",children:"Next"})]})]})]})]})]})]})}function M({label:e,value:r,icon:a,color:s}){let l={green:{bg:"bg-emerald-500",light:"bg-emerald-50 dark:bg-emerald-500/10",text:"text-emerald-600 dark:text-emerald-400"},indigo:{bg:"bg-indigo-500",light:"bg-indigo-50 dark:bg-indigo-500/10",text:"text-indigo-600 dark:text-indigo-400"},amber:{bg:"bg-amber-500",light:"bg-amber-50 dark:bg-amber-500/10",text:"text-amber-600 dark:text-amber-400"}},i=l[s]||l.indigo;return(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 p-5 rounded-[24px] shadow-sm border border-slate-100 dark:border-slate-800 flex items-center gap-4 hover:shadow-md transition-shadow",children:[(0,t.jsx)("div",{className:`h-12 w-12 rounded-2xl flex items-center justify-center ${i.light} ${i.text}`,children:a}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-slate-400 dark:text-slate-500 text-[10px] font-black uppercase tracking-wider",children:e}),(0,t.jsx)("p",{className:"text-slate-900 dark:text-white font-black text-lg",children:r})]})]})}e.s(["default",()=>_],25970)}]);