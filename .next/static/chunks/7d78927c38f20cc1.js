(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,62845,e=>{"use strict";var t=e.i(89997),r=e.i(88871),a=e.i(39601),n=e.i(3918);let o=(0,a.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function s({className:e,variant:a,asChild:s=!1,...i}){let l=s?r.Slot:"span";return(0,t.jsx)(l,{"data-slot":"badge",className:(0,n.cn)(o({variant:a}),e),...i})}e.s(["Badge",()=>s])},64264,e=>{"use strict";let t=(0,e.i(84430).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],64264)},85570,e=>{"use strict";var t=e.i(42840),r=e.i(51893),a=e.i(88419),n=e.i(44683),o=e.i(65996),s=e.i(42115),i=e.i(22156),l=e.i(89387),c=e.i(19690),u=e.i(96178),d=e.i(89997),f="rovingFocusGroup.onEntryFocus",p={bubbles:!1,cancelable:!0},v="RovingFocusGroup",[g,w,h]=(0,a.createCollection)(v),[y,m]=(0,o.createContextScope)(v,[h]),[b,C]=y(v),S=t.forwardRef((e,t)=>(0,d.jsx)(g.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,d.jsx)(g.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,d.jsx)(_,{...e,ref:t})})}));S.displayName=v;var _=t.forwardRef((e,a)=>{let{__scopeRovingFocusGroup:o,orientation:s,loop:v=!1,dir:g,currentTabStopId:h,defaultCurrentTabStopId:y,onCurrentTabStopIdChange:m,onEntryFocus:C,preventScrollOnEntryFocus:S=!1,..._}=e,M=t.useRef(null),k=(0,n.useComposedRefs)(a,M),F=(0,u.useDirection)(g),[L=null,T]=(0,c.useControllableState)({prop:h,defaultProp:y,onChange:m}),[x,I]=t.useState(!1),R=(0,l.useCallbackRef)(C),E=w(o),D=t.useRef(!1),[K,N]=t.useState(0);return t.useEffect(()=>{let e=M.current;if(e)return e.addEventListener(f,R),()=>e.removeEventListener(f,R)},[R]),(0,d.jsx)(b,{scope:o,orientation:s,dir:F,loop:v,currentTabStopId:L,onItemFocus:t.useCallback(e=>T(e),[T]),onItemShiftTab:t.useCallback(()=>I(!0),[]),onFocusableItemAdd:t.useCallback(()=>N(e=>e+1),[]),onFocusableItemRemove:t.useCallback(()=>N(e=>e-1),[]),children:(0,d.jsx)(i.Primitive.div,{tabIndex:x||0===K?-1:0,"data-orientation":s,..._,ref:k,style:{outline:"none",...e.style},onMouseDown:(0,r.composeEventHandlers)(e.onMouseDown,()=>{D.current=!0}),onFocus:(0,r.composeEventHandlers)(e.onFocus,e=>{let t=!D.current;if(e.target===e.currentTarget&&t&&!x){let t=new CustomEvent(f,p);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=E().filter(e=>e.focusable);A([e.find(e=>e.active),e.find(e=>e.id===L),...e].filter(Boolean).map(e=>e.ref.current),S)}}D.current=!1}),onBlur:(0,r.composeEventHandlers)(e.onBlur,()=>I(!1))})})}),M="RovingFocusGroupItem",k=t.forwardRef((e,a)=>{let{__scopeRovingFocusGroup:n,focusable:o=!0,active:l=!1,tabStopId:c,...u}=e,f=(0,s.useId)(),p=c||f,v=C(M,n),h=v.currentTabStopId===p,y=w(n),{onFocusableItemAdd:m,onFocusableItemRemove:b}=v;return t.useEffect(()=>{if(o)return m(),()=>b()},[o,m,b]),(0,d.jsx)(g.ItemSlot,{scope:n,id:p,focusable:o,active:l,children:(0,d.jsx)(i.Primitive.span,{tabIndex:h?0:-1,"data-orientation":v.orientation,...u,ref:a,onMouseDown:(0,r.composeEventHandlers)(e.onMouseDown,e=>{o?v.onItemFocus(p):e.preventDefault()}),onFocus:(0,r.composeEventHandlers)(e.onFocus,()=>v.onItemFocus(p)),onKeyDown:(0,r.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void v.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var a;let n=(a=e.key,"rtl"!==r?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(n))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)))return F[n]}(e,v.orientation,v.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=y().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)n.reverse();else if("prev"===t||"next"===t){var r,a;"prev"===t&&n.reverse();let o=n.indexOf(e.currentTarget);n=v.loop?(r=n,a=o+1,r.map((e,t)=>r[(a+t)%r.length])):n.slice(o+1)}setTimeout(()=>A(n))}})})})});k.displayName=M;var F={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function A(e,t=!1){let r=document.activeElement;for(let a of e)if(a===r||(a.focus({preventScroll:t}),document.activeElement!==r))return}e.s(["Item",()=>k,"Root",()=>S,"createRovingFocusGroupScope",()=>m])},90075,43881,e=>{"use strict";var t=e.i(42840),r=e.i(61200),a=e.i(94436);function n(){let{user:e}=(0,a.useAuth)(),[n,o]=(0,t.useState)([]),[s,i]=(0,t.useState)({}),[l,c]=(0,t.useState)({}),[u,d]=(0,t.useState)(!0),f=async()=>{d(!0);try{let[e,t]=await Promise.all([(0,r.apiFetch)("/wallets",{cache:"no-store"}).catch(()=>null),(0,r.apiFetch)("/forex/rates",{cache:"no-store"}).catch(()=>null)]),a=(Array.isArray(e?.wallets)?e.wallets:[]).filter(Boolean);o(a);let n={},s={};t?.rates&&Array.isArray(t.rates)?t.rates.forEach(e=>{let t=`${e.base_currency}-${e.target_currency}`;n[t]=parseFloat(e.rate),s[t]={rate:parseFloat(e.rate),change24h:parseFloat(e.change_24h||0),changePercent:parseFloat(e.change_percent||0),high24h:parseFloat(e.high_24h||e.rate),low24h:parseFloat(e.low_24h||e.rate),lastUpdated:e.last_updated},"MWK"===e.base_currency&&"CNY"===e.target_currency&&(n.mwkToCny=parseFloat(e.rate)),"CNY"===e.base_currency&&"MWK"===e.target_currency&&(n.cnyToMwk=parseFloat(e.rate)),"USD"===e.base_currency&&"MWK"===e.target_currency&&(n.usdToMwk=parseFloat(e.rate))}):(n.mwkToCny=.0041,n.cnyToMwk=243.90243902439022,n["MWK-CNY"]=.0041,n["CNY-MWK"]=243.90243902439022),i(n),c(s)}catch(e){console.error("Failed to fetch wallet stats",e)}finally{d(!1)}};(0,t.useEffect)(()=>{e&&f()},[e]);let p=(0,t.useMemo)(()=>{let t=n.reduce((e,t)=>{let r=parseFloat(String(t.available_balance??t.balance??0)),a=String(t.currency).toUpperCase();return"MWK"===a?e+r:"CNY"===a?e+r*(s.cnyToMwk||243.90243902439022):"USD"===a?e+r*(s.usdToMwk||1745):e+r},0),r=n.reduce((e,t)=>{let r=parseFloat(String(t.available_balance??t.balance??0)),a=String(t.currency).toUpperCase();return"CNY"===a?e+r:"MWK"===a?e+r*(s.mwkToCny||.0041):"USD"===a?e+r*(s.usdToMwk||1745)*(s.mwkToCny||.0041):e+r},0),a="CN"===String(e?.countryCode||"").toUpperCase()?"CNY":"MWK";return{balanceMWK:Math.round(t),balanceCNY:Math.round(r),primaryCurrency:a,lastDepositDate:new Date().toISOString().slice(0,10),monthlyLimit:5e6,spentThisMonth:Math.round(("CNY"===a?r:t)*.15)}},[n,s,e]);return{wallets:n,stats:p,rates:s,rateDetails:l,loading:u,refetch:()=>f()}}e.s(["EXCHANGE_RATE_CNY_TO_MWK",0,243.90243902439022,"EXCHANGE_RATE_MWK_TO_CNY",0,.0041],43881),e.s(["useWalletStats",()=>n],90075)},41646,e=>{"use strict";let t=(0,e.i(84430).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],41646)},41890,36803,87557,e=>{"use strict";var t=e.i(84430);let r=(0,t.default)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);e.s(["ArrowUpRight",()=>r],41890);let a=(0,t.default)("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);e.s(["ArrowDownLeft",()=>a],36803);var n=e.i(42840),o=e.i(61200),s=e.i(94436);function i(e=10){let{user:t}=(0,s.useAuth)(),r=t?.id||t?.ID||null,[a,l]=(0,n.useState)([]),[c,u]=(0,n.useState)(!0),[d,f]=(0,n.useState)(null),[p,v]=(0,n.useState)(0),[g,w]=(0,n.useState)(1),[h,y]=(0,n.useState)(e),[m,b]=(0,n.useState)({query:"",status:"all",walletId:null,tab:"all"}),C=async()=>{u(!0);try{let e=(g-1)*h,t=`/payments?limit=${h}&offset=${e}`;m.walletId&&(t+=`&wallet_id=${m.walletId}`);let r=await (0,o.apiFetch)(t),a=(Array.isArray(r?.transactions)?r.transactions:[]).filter(Boolean);l(a),v(r?.total||0),f(null)}catch(e){console.error("Failed to fetch transactions:",e),f(e?.message||"Failed to load transactions"),l([])}finally{u(!1)}};(0,n.useEffect)(()=>{t&&C()},[t,g,h,m.walletId]);let S=(0,n.useMemo)(()=>a.filter(e=>{let t,a,n,o;if(!e)return!1;let s=m.query.trim().toLowerCase(),i=String(e.sender_id||e.senderId||""),l=String(e.receiver_id||e.receiverId||""),c=i?`...${i.slice(-4)}`:"",u=l?`...${l.slice(-4)}`:"",d=String(e.sender_wallet_number||e.sender_wallet||c).toLowerCase(),f=String(e.receiver_wallet_number||e.receiver_wallet||u).toLowerCase(),p=String(e.sender_name||e.SenderName||"").toLowerCase(),v=String(e.receiver_name||e.ReceiverName||"").toLowerCase(),g=!s||String(e.reference||e.id||"").toLowerCase().includes(s)||String(e.amount||"").toLowerCase().includes(s)||d.includes(s)||f.includes(s)||p.includes(s)||v.includes(s),w="all"===m.status||String(e.status||"").toLowerCase()===m.status,h=!m.walletId||String(e.sender_wallet_id||"").toLowerCase()===m.walletId.toLowerCase()||String(e.receiver_wallet_id||"").toLowerCase()===m.walletId.toLowerCase(),y=(t=String(e.transaction_type||e.type||"").toLowerCase(),a=i.toLowerCase(),n=l.toLowerCase(),o=String(r||"").toLowerCase(),"all"===m.tab||("sent"===m.tab?o&&a===o:"received"===m.tab?o&&n===o:"topup"===m.tab?"deposit"===t:"pending_settlement"!==m.tab||"pending"===String(e.status||"").toLowerCase()));return g&&w&&y&&h}),[a,m,r]),_=(0,n.useMemo)(()=>({total:p||a.length,completed:a.filter(e=>e&&"completed"===String(e.status||"").toLowerCase()).length,pending:a.filter(e=>e&&"pending"===String(e.status||"").toLowerCase()).length,received:a.filter(e=>e&&String(e.receiver_id||e.receiverId||"")===String(r||"")).length,sent:a.filter(e=>e&&String(e.sender_id||e.senderId||"")===String(r||"")).length}),[a,p,r]),M=Math.ceil(p/h);return{transactions:a,filteredTransactions:S,loading:c,error:d,total:p,page:g,limit:h,totalPages:M,setPage:w,setLimit:y,filters:m,setFilters:b,stats:_,refresh:C}}e.s(["useTransactions",()=>i],87557)}]);