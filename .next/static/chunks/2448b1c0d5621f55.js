(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,76999,e=>{"use strict";var t=e.i(89997),a=e.i(88871),r=e.i(39601),n=e.i(3918);let i=(0,r.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function s({className:e,variant:r,size:s,asChild:o=!1,...l}){let c=o?a.Slot:"button";return(0,t.jsx)(c,{"data-slot":"button",className:(0,n.cn)(i({variant:r,size:s,className:e})),...l})}e.s(["Button",()=>s,"buttonVariants",()=>i])},64264,e=>{"use strict";let t=(0,e.i(84430).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],64264)},90075,43881,e=>{"use strict";var t=e.i(42840),a=e.i(61200),r=e.i(94436);function n(){let{user:e}=(0,r.useAuth)(),[n,i]=(0,t.useState)([]),[s,o]=(0,t.useState)({}),[l,c]=(0,t.useState)(!0),u=async()=>{c(!0);try{let[e,t,r]=await Promise.all([(0,a.apiFetch)("/wallets",{cache:"no-store"}).catch(()=>null),(0,a.apiFetch)("/forex/rate/MWK/CNY",{cache:"no-store"}).catch(()=>null),(0,a.apiFetch)("/forex/rate/ZMW/MWK",{cache:"no-store"}).catch(()=>null)]);i(Array.isArray(e?.wallets)?e.wallets:[]);let n="number"==typeof t?.rate?t.rate:.0041,s="number"==typeof r?.rate?r.rate:.05;o({mwkToCny:n,cnyToMwk:n?1/n:243.90243902439022,zmwToMwk:s})}catch(e){console.error("Failed to fetch wallet stats",e)}finally{c(!1)}};(0,t.useEffect)(()=>{e&&u()},[e]);let d=(0,t.useMemo)(()=>{let t=n.reduce((e,t)=>{let a=parseFloat(String(t.available_balance??t.balance??0)),r=String(t.currency).toUpperCase();return"MWK"===r?e+a:"CNY"===r?e+a*(s.cnyToMwk||243.90243902439022):"USD"===r?e+a*(s.usdToMwk||1745):e+a},0),a=n.reduce((e,t)=>{let a=parseFloat(String(t.available_balance??t.balance??0)),r=String(t.currency).toUpperCase();return"CNY"===r?e+a:"MWK"===r?e+a*(s.mwkToCny||.0041):"USD"===r?e+a*(s.usdToMwk||1745)*(s.mwkToCny||.0041):e+a},0),r="CN"===String(e?.countryCode||"").toUpperCase()?"CNY":"MWK";return{balanceMWK:Math.round(t),balanceCNY:Math.round(a),primaryCurrency:r,lastDepositDate:new Date().toISOString().slice(0,10),monthlyLimit:5e6,spentThisMonth:Math.round(("CNY"===r?a:t)*.15)}},[n,s,e]);return{wallets:n,rates:s,stats:d,loading:l,refetch:()=>u()}}e.s(["EXCHANGE_RATE_CNY_TO_MWK",0,243.90243902439022,"EXCHANGE_RATE_MWK_TO_CNY",0,.0041,"EXCHANGE_RATE_MWK_TO_ZMW",0,.015,"EXCHANGE_RATE_ZMW_TO_MWK",0,66.66666666666667],43881),e.s(["useWalletStats",()=>n],90075)},41890,36803,41646,e=>{"use strict";var t=e.i(84430);let a=(0,t.default)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);e.s(["ArrowUpRight",()=>a],41890);let r=(0,t.default)("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);e.s(["ArrowDownLeft",()=>r],36803);let n=(0,t.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>n],41646)},61565,e=>{"use strict";let t=(0,e.i(84430).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeftIcon",()=>t],61565)},40019,e=>{"use strict";let t=(0,e.i(84430).default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRightIcon",()=>t],40019)},61732,e=>{"use strict";let t=(0,e.i(84430).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["default",()=>t])},73191,87557,e=>{"use strict";var t=e.i(89997),a=e.i(61565),r=e.i(40019),n=(e.i(61732),e.i(3918)),i=e.i(76999);function s({className:e,...a}){return(0,t.jsx)("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:(0,n.cn)("mx-auto flex w-full justify-center",e),...a})}function o({className:e,...a}){return(0,t.jsx)("ul",{"data-slot":"pagination-content",className:(0,n.cn)("flex flex-row items-center gap-1",e),...a})}function l({...e}){return(0,t.jsx)("li",{"data-slot":"pagination-item",...e})}function c({className:e,isActive:a,size:r="icon",...s}){return(0,t.jsx)("a",{"aria-current":a?"page":void 0,"data-slot":"pagination-link","data-active":a,className:(0,n.cn)((0,i.buttonVariants)({variant:a?"outline":"ghost",size:r}),e),...s})}function u({className:e,...r}){return(0,t.jsxs)(c,{"aria-label":"Go to previous page",size:"default",className:(0,n.cn)("gap-1 px-2.5 sm:pl-2.5",e),...r,children:[(0,t.jsx)(a.ChevronLeftIcon,{}),(0,t.jsx)("span",{className:"hidden sm:block",children:"Previous"})]})}function d({className:e,...a}){return(0,t.jsxs)(c,{"aria-label":"Go to next page",size:"default",className:(0,n.cn)("gap-1 px-2.5 sm:pr-2.5",e),...a,children:[(0,t.jsx)("span",{className:"hidden sm:block",children:"Next"}),(0,t.jsx)(r.ChevronRightIcon,{})]})}e.s(["Pagination",()=>s,"PaginationContent",()=>o,"PaginationItem",()=>l,"PaginationLink",()=>c,"PaginationNext",()=>d,"PaginationPrevious",()=>u],73191);var g=e.i(42840),h=e.i(61200),p=e.i(94436);function v(e=10){let{user:t}=(0,p.useAuth)(),a=t?.id||t?.ID||null,[r,n]=(0,g.useState)([]),[i,s]=(0,g.useState)(!0),[o,l]=(0,g.useState)(null),[c,u]=(0,g.useState)(0),[d,f]=(0,g.useState)(1),[m,y]=(0,g.useState)(e),[b,w]=(0,g.useState)({query:"",status:"all",tab:"all"}),C=async()=>{s(!0);try{let e=(d-1)*m,t=await (0,h.apiFetch)(`/payments?limit=${m}&offset=${e}`);n(Array.isArray(t?.transactions)?t.transactions:[]),u(t?.total||0),l(null)}catch(e){console.error("Failed to fetch transactions:",e),l(e?.message||"Failed to load transactions"),n([])}finally{s(!1)}};(0,g.useEffect)(()=>{t&&C()},[t,d,m]);let x=(0,g.useMemo)(()=>r.filter(e=>{let t,r,n,i,s=b.query.trim().toLowerCase(),o=String(e.sender_id||e.senderId||""),l=String(e.receiver_id||e.receiverId||""),c=o?`...${o.slice(-4)}`:"",u=l?`...${l.slice(-4)}`:"",d=String(e.sender_wallet_number||e.sender_wallet||c).toLowerCase(),g=String(e.receiver_wallet_number||e.receiver_wallet||u).toLowerCase(),h=String(e.sender_name||e.SenderName||"").toLowerCase(),p=String(e.receiver_name||e.ReceiverName||"").toLowerCase(),v=!s||String(e.reference||e.id||"").toLowerCase().includes(s)||String(e.amount||"").toLowerCase().includes(s)||d.includes(s)||g.includes(s)||h.includes(s)||p.includes(s),f="all"===b.status||String(e.status||"").toLowerCase()===b.status,m=(t=String(e.transaction_type||e.type||"").toLowerCase(),r=o.toLowerCase(),n=l.toLowerCase(),i=String(a||"").toLowerCase(),"all"===b.tab||("sent"===b.tab?i&&r===i:"received"===b.tab?i&&n===i:"topup"===b.tab?"deposit"===t:"pending_settlement"!==b.tab||"pending"===String(e.status||"").toLowerCase()));return v&&f&&m}),[r,b,a]),k=(0,g.useMemo)(()=>({total:c||r.length,completed:r.filter(e=>"completed"===String(e.status||"").toLowerCase()).length,pending:r.filter(e=>"pending"===String(e.status||"").toLowerCase()).length}),[r,c]),S=Math.ceil(c/m);return{transactions:r,filteredTransactions:x,loading:i,error:o,total:c,page:d,limit:m,totalPages:S,setPage:f,setLimit:y,filters:b,setFilters:w,stats:k,refresh:C}}e.s(["useTransactions",()=>v],87557)}]);