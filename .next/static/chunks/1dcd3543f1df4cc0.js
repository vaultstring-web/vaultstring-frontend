(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,24848,e=>{"use strict";var a=e.i(89997),t=e.i(42840),l=e.i(22156),n=t.forwardRef((e,t)=>(0,a.jsx)(l.Primitive.label,{...e,ref:t,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));n.displayName="Label";var r=e.i(3918);function s({className:e,...t}){return(0,a.jsx)(n,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}e.s(["Label",()=>s],24848)},89093,e=>{"use strict";var a=e.i(89997),t=e.i(3918);function l({className:e,type:l,...n}){return(0,a.jsx)("input",{type:l,"data-slot":"input",className:(0,t.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground bg-input dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}e.s(["Input",()=>l])},76999,e=>{"use strict";var a=e.i(89997),t=e.i(88871),l=e.i(39601),n=e.i(3918);let r=(0,l.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function s({className:e,variant:l,size:s,asChild:i=!1,...c}){let o=i?t.Slot:"button";return(0,a.jsx)(o,{"data-slot":"button",className:(0,n.cn)(r({variant:l,size:s,className:e})),...c})}e.s(["Button",()=>s,"buttonVariants",()=>r])},9568,e=>{"use strict";let a=(0,e.i(84430).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],9568)},9671,9570,e=>{"use strict";e.s(["formatCurrency",0,(e,a)=>{let t=parseFloat(String(e));return isNaN(t)?"0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:a,minimumFractionDigits:2}).format(t)},"formatWalletNumber",0,e=>{let a=e.replace(/\D/g,"").padEnd(16,"0").slice(0,16);return a.match(/.{1,4}/g)?.join(" ")||a},"generateFallbackWalletNumber",0,e=>{let a={a:"1",b:"2",c:"3",d:"4",e:"5",f:"6","-":""};return(String(e).toLowerCase().split("").map(e=>a[e]||e).join("").replace(/\D/g,"")+"4539102834756192").slice(0,16)},"getWalletGradient",0,e=>{switch(String(e).toUpperCase()){case"MWK":return"bg-gradient-to-br from-emerald-600 to-teal-800";case"ZMW":return"bg-gradient-to-br from-orange-500 to-amber-700";case"CNY":return"bg-gradient-to-br from-rose-500 to-red-800";default:return"bg-gradient-to-br from-slate-700 to-slate-900"}}],9671);let a=(0,e.i(84430).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>a],9570)},86631,e=>{"use strict";let a=(0,e.i(84430).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>a],86631)},90749,e=>{"use strict";let a=(0,e.i(84430).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>a],90749)},81428,e=>{"use strict";var a=e.i(89997),t=e.i(3918);function l({className:e,...l}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...l})}function n({className:e,...l}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...l})}function r({className:e,...l}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...l})}function s({className:e,...l}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...l})}function i({className:e,...l}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...l})}e.s(["Card",()=>l,"CardContent",()=>i,"CardDescription",()=>s,"CardHeader",()=>n,"CardTitle",()=>r])},28867,e=>{"use strict";var a=e.i(89997),t=e.i(81428);function l({title:e,subtitle:l,action:n,variant:r="card"}){return"hero"===r?(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-2xl border bg-gradient-to-br from-green-600 via-green-500 to-emerald-500",children:[(0,a.jsx)("div",{className:"absolute inset-0 opacity-20 mix-blend-overlay"}),(0,a.jsxs)("div",{className:"p-6 lg:p-8 text-white flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:e}),l&&(0,a.jsx)("p",{className:"mt-1 text-white",children:l})]}),n&&(0,a.jsx)("div",{children:n})]})]}):(0,a.jsxs)(t.Card,{className:"bg-white border",children:[(0,a.jsxs)(t.CardHeader,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(t.CardTitle,{className:"text-2xl",children:e}),l&&(0,a.jsx)(t.CardDescription,{className:"mt-1",children:l})]}),n&&(0,a.jsx)("div",{"data-slot":"card-action",children:n})]}),(0,a.jsx)(t.CardContent,{})]})}e.s(["default",()=>l])},64264,e=>{"use strict";let a=(0,e.i(84430).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>a],64264)},62466,e=>{"use strict";var a=e.i(89997),t=e.i(47125);function l(e,a){return(...e)=>{try{return a(...e)}catch{throw Error(void 0)}}}let n=l(0,t.useTranslations);l(0,t.useFormatter);var r=e.i(81428),s=e.i(9671);function i({from:e,to:t,amount:l,rate:n,converted:i,fee:c,loading:o,error:d}){let u=String(e).toUpperCase(),m=String(t).toUpperCase();return(0,a.jsxs)(r.Card,{className:"border-slate-200 shadow-sm",children:[(0,a.jsx)(r.CardHeader,{className:"pb-3 border-b border-slate-100 bg-slate-50/50",children:(0,a.jsx)(r.CardTitle,{className:"text-base font-semibold text-slate-800",children:"Exchange Rate Preview"})}),(0,a.jsx)(r.CardContent,{className:"pt-4",children:d?(0,a.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg border border-red-100",children:d}):(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-slate-500",children:"Exchange Rate"}),(0,a.jsx)("span",{className:"font-mono font-medium text-slate-700",children:o?"...":n?`1 ${u} = ${n.toFixed(4)} ${m}`:"—"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-slate-500",children:"Converted Amount"}),(0,a.jsx)("span",{className:"font-bold text-slate-900",children:o?"...":null!==i?(0,s.formatCurrency)(i,m):"—"})]}),null!==c&&(0,a.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t border-slate-100 mt-2",children:[(0,a.jsx)("span",{className:"text-slate-500",children:"Fees (Included)"}),(0,a.jsx)("span",{className:"font-medium text-amber-600",children:o?"...":(0,s.formatCurrency)(c,u)})]}),null!==i&&(0,a.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t border-slate-100 mt-2",children:[(0,a.jsx)("span",{className:"text-slate-500 font-medium",children:"Recipient Gets"}),(0,a.jsx)("span",{className:"font-bold text-emerald-600 text-lg",children:o?"...":(0,s.formatCurrency)(i,m)})]})]})})]})}var c=e.i(28867),o=e.i(89093),d=e.i(24848),u=e.i(76999),m=e.i(17413),h=e.i(9568),b=e.i(86631),x=e.i(84430);let f=(0,x.default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var p=e.i(42840),g=e.i(55761),v=e.i(94436),y=e.i(61200),j=e.i(18148);let N=(0,x.default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),w=(0,x.default)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var k=e.i(9570);let C=(e,a)=>{let t=`VaultString Wallet (${a.toFixed(2)} ${e})`;return"MWK"===e?[{value:"wallet_balance",label:t,channel:"wallet",icon:j.Wallet},{value:"airtel_money",label:"Airtel Money",channel:"mobile_money",icon:N},{value:"tnm_mpamba",label:"TNM Mpamba",channel:"mobile_money",icon:N},{value:"nbm",label:"National Bank of Malawi",channel:"bank",icon:w},{value:"standard_bank_mw",label:"Standard Bank Malawi",channel:"bank",icon:w},{value:"fdh_bank",label:"FDH Bank",channel:"bank",icon:w},{value:"nbs_bank",label:"NBS Bank",channel:"bank",icon:w},{value:"first_capital_bank",label:"First Capital Bank",channel:"bank",icon:w},{value:"ecobank_mw",label:"Ecobank Malawi",channel:"bank",icon:w},{value:"visa_mastercard",label:"Visa/Mastercard",channel:"card",icon:k.CreditCard}]:"CNY"===e?[{value:"wallet_balance",label:t,channel:"wallet",icon:j.Wallet},{value:"alipay",label:"Alipay",channel:"mobile_money",icon:N},{value:"wechat_pay",label:"WeChat Pay",channel:"mobile_money",icon:N},{value:"icbc",label:"ICBC",channel:"bank",icon:w},{value:"ccb",label:"China Construction Bank",channel:"bank",icon:w},{value:"boc",label:"Bank of China",channel:"bank",icon:w},{value:"abc",label:"Agricultural Bank of China",channel:"bank",icon:w},{value:"cmb",label:"China Merchants Bank",channel:"bank",icon:w},{value:"unionpay_card",label:"UnionPay Card",channel:"card",icon:k.CreditCard}]:"ZMW"===e?[{value:"wallet_balance",label:t,channel:"wallet",icon:j.Wallet},{value:"airtel_money_zm",label:"Airtel Money Zambia",channel:"mobile_money",icon:N},{value:"mtn_money_zm",label:"MTN Mobile Money",channel:"mobile_money",icon:N},{value:"zamtel_money",label:"Zamtel Money",channel:"mobile_money",icon:N},{value:"zanaco",label:"Zanaco",channel:"bank",icon:w},{value:"stanbic_zm",label:"Stanbic Bank Zambia",channel:"bank",icon:w},{value:"absa_zm",label:"ABSA Zambia",channel:"bank",icon:w},{value:"atlas_mara",label:"Atlas Mara",channel:"bank",icon:w},{value:"visa_mastercard",label:"Visa/Mastercard",channel:"card",icon:k.CreditCard}]:[{value:"wallet_balance",label:"VaultString Wallet",channel:"wallet",icon:j.Wallet},{value:"visa_mastercard",label:"Visa/Mastercard",channel:"card",icon:k.CreditCard},{value:"wire_transfer",label:"Bank Wire Transfer",channel:"bank",icon:w}]};function _({currency:e,walletBalance:t,value:l,onChange:n}){let r=(0,p.useMemo)(()=>C(e,t),[e,t]);return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(d.Label,{className:"text-sm font-medium text-slate-700",children:"Funding Source"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(e=>{let t=e.icon,r=l===e.value;return(0,a.jsxs)("div",{onClick:()=>n(e.value),className:`
                relative flex items-center p-3 rounded-xl border cursor-pointer transition-all duration-200
                ${r?"border-indigo-600 bg-indigo-50 ring-1 ring-indigo-600 shadow-sm":"border-slate-200 hover:border-indigo-300 hover:bg-slate-50"}
              `,children:[(0,a.jsx)("div",{className:`
                h-10 w-10 rounded-full flex items-center justify-center shrink-0 mr-3
                ${r?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-500"}
              `,children:(0,a.jsx)(t,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:`font-medium text-sm ${r?"text-indigo-900":"text-slate-900"}`,children:e.label}),(0,a.jsx)("div",{className:"text-xs text-slate-500 capitalize",children:e.channel.replace("_"," ")})]}),r&&(0,a.jsx)("div",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-indigo-600"})]},e.value)})})]})}function M({targetCurrency:e,value:t,onChange:l}){let n=(0,p.useMemo)(()=>"CNY"===e?[{value:"wallet_topup_cny",label:"Wallet Top-up (CNY)",channel:"wallet",icon:j.Wallet},{value:"alipay",label:"Alipay",channel:"mobile_money",icon:N},{value:"wechat_pay",label:"WeChat Pay",channel:"mobile_money",icon:N},{value:"icbc",label:"ICBC",channel:"bank",icon:w},{value:"ccb",label:"China Construction Bank",channel:"bank",icon:w},{value:"boc",label:"Bank of China",channel:"bank",icon:w},{value:"abc",label:"Agricultural Bank of China",channel:"bank",icon:w},{value:"cmb",label:"China Merchants Bank",channel:"bank",icon:w}]:"MWK"===e?[{value:"wallet_topup_mwk",label:"Wallet Top-up (MWK)",channel:"wallet",icon:j.Wallet},{value:"airtel_money",label:"Airtel Money",channel:"mobile_money",icon:N},{value:"tnm_mpamba",label:"TNM Mpamba",channel:"mobile_money",icon:N},{value:"nbm",label:"National Bank of Malawi",channel:"bank",icon:w},{value:"standard_bank_mw",label:"Standard Bank Malawi",channel:"bank",icon:w},{value:"fdh_bank",label:"FDH Bank",channel:"bank",icon:w},{value:"nbs_bank",label:"NBS Bank",channel:"bank",icon:w}]:"ZMW"===e?[{value:"wallet_topup_zmw",label:"Wallet Top-up (ZMW)",channel:"wallet",icon:j.Wallet},{value:"airtel_money_zm",label:"Airtel Money Zambia",channel:"mobile_money",icon:N},{value:"mtn_money_zm",label:"MTN Mobile Money",channel:"mobile_money",icon:N},{value:"zamtel_money",label:"Zamtel Money",channel:"mobile_money",icon:N},{value:"zanaco",label:"Zanaco",channel:"bank",icon:w},{value:"stanbic_zm",label:"Stanbic Bank Zambia",channel:"bank",icon:w},{value:"absa_zm",label:"ABSA Zambia",channel:"bank",icon:w}]:[{value:"wire_transfer",label:"Bank Wire Transfer",channel:"bank",icon:w},{value:"visa_mastercard",label:"Visa/Mastercard",channel:"card",icon:k.CreditCard}],[e]);return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(d.Label,{className:"text-sm font-medium text-slate-700",children:"Payout Method"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:n.map(e=>{let n=e.icon,r=t===e.value;return(0,a.jsxs)("div",{onClick:()=>l(e.value),className:`
                relative flex items-center p-3 rounded-xl border cursor-pointer transition-all duration-200
                ${r?"border-indigo-600 bg-indigo-50 ring-1 ring-indigo-600 shadow-sm":"border-slate-200 hover:border-indigo-300 hover:bg-slate-50"}
              `,children:[(0,a.jsx)("div",{className:`
                h-10 w-10 rounded-full flex items-center justify-center shrink-0 mr-3
                ${r?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-500"}
              `,children:(0,a.jsx)(n,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:`font-medium text-sm ${r?"text-indigo-900":"text-slate-900"}`,children:e.label}),(0,a.jsx)("div",{className:"text-xs text-slate-500 capitalize",children:e.channel.replace("_"," ")})]})]},e.value)})})]})}var S=e.i(90749);function z({result:e,amount:t,currency:l,receiverName:n,onReset:r}){return(0,a.jsx)("div",{className:"bg-emerald-50 border border-emerald-200 text-emerald-800 px-6 py-6 rounded-xl shadow-md animate-in fade-in zoom-in-95",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"h-16 w-16 bg-emerald-100 rounded-full flex items-center justify-center mb-4 text-emerald-600",children:(0,a.jsx)(S.CheckCircle2,{size:32})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-emerald-900 mb-2",children:"Payment Successful!"}),(0,a.jsx)("p",{className:"text-emerald-700 mb-4",children:"Your transaction has been processed securely."}),(0,a.jsxs)("div",{className:"w-full bg-white rounded-lg border border-emerald-100 p-4 text-left space-y-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-emerald-600",children:"Transaction ID"}),(0,a.jsxs)("span",{className:"font-mono font-medium",children:[e.transaction_id?.substring(0,8),"..."]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-emerald-600",children:"Receiver"}),(0,a.jsx)("span",{className:"font-medium",children:e.receiver_name||n||e.receiver_wallet_number})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-emerald-600",children:"Amount Sent"}),(0,a.jsx)("span",{className:"font-bold",children:(0,s.formatCurrency)(t,l)})]})]}),(0,a.jsx)(u.Button,{variant:"outline",className:"w-full border-emerald-200 text-emerald-700 hover:bg-emerald-100 hover:text-emerald-800",onClick:r,children:"Send Another Payment"})]})})}function W({value:e,onChange:t,loading:l,suggestions:n,showSuggestions:r,setShowSuggestions:s,onSelectSuggestion:i,receiverName:c}){return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(d.Label,{className:"text-sm font-medium text-slate-700",children:"Recipient Wallet Number"}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)(j.Wallet,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),(0,a.jsx)(o.Input,{name:"receiver_id",value:e,onChange:t,placeholder:"Enter 16-digit Wallet Number",required:!0,className:"pl-10 text-slate-900 border-slate-200 focus:border-indigo-500 focus:ring-indigo-500 h-11",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,inputMode:"numeric",maxLength:16}),(0,a.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:l?(0,a.jsx)(h.Loader2,{size:16,className:"animate-spin text-slate-400"}):null}),r&&n.length>0&&(0,a.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-slate-200 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-200 max-h-60 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"p-2 bg-slate-50 border-b border-slate-100 text-xs font-semibold text-slate-500 uppercase tracking-wider flex justify-between items-center",children:[(0,a.jsx)("span",{children:"Suggested Receivers"}),(0,a.jsx)("span",{className:"text-[10px] bg-slate-200 px-1.5 py-0.5 rounded text-slate-600",children:"Enter more digits to refine"})]}),n.map((e,t)=>(0,a.jsxs)("button",{type:"button",onClick:()=>i(e.address),className:"w-full text-left p-3 hover:bg-indigo-50 transition-colors flex items-center gap-3 border-b border-slate-50 last:border-0",children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold shrink-0",children:e.name.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-slate-900",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-slate-500 font-mono flex items-center gap-2",children:[(0,a.jsx)("span",{children:e.address}),(0,a.jsx)("span",{className:"bg-slate-100 px-1.5 rounded text-slate-600",children:e.currency})]})]})]},t))]}),c&&(0,a.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-slate-200 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:(0,a.jsxs)("div",{className:"p-4 flex items-center gap-4 bg-gradient-to-r from-indigo-50 to-white",children:[(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-lg shrink-0 border-2 border-white shadow-sm",children:c.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-xs text-indigo-500 font-semibold uppercase tracking-wider mb-0.5 flex items-center gap-1",children:[(0,a.jsx)(S.CheckCircle2,{size:12})," Verified Receiver"]}),(0,a.jsx)("div",{className:"text-lg font-bold text-slate-900",children:c})]})]})})]})]})}function A({amount:e,currency:t,onChange:l}){return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(d.Label,{className:"text-sm font-medium text-slate-700",children:"Amount to Send"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)("span",{className:"text-slate-500 font-bold",children:t})}),(0,a.jsx)(o.Input,{name:"amount",type:"number",step:"0.01",min:"0",value:e,onChange:l,required:!0,className:"pl-16 text-lg font-medium h-12 border-slate-200 focus:border-indigo-500 focus:ring-indigo-500",placeholder:"0.00"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(d.Label,{className:"text-sm font-medium text-slate-700",children:"Source Currency"}),(0,a.jsxs)("select",{name:"currency",value:t,onChange:l,className:"w-full h-12 rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[(0,a.jsx)("option",{value:"MWK",children:"MWK (Malawian Kwacha)"}),(0,a.jsx)("option",{value:"ZMW",children:"ZMW (Zambian Kwacha)"}),(0,a.jsx)("option",{value:"CNY",children:"CNY (Chinese Yuan)"})]})]})]})}function B({targetCurrency:e,sourceCurrency:t,onChange:l}){return(0,a.jsxs)("div",{className:"space-y-3 p-4 bg-slate-50 rounded-xl border border-slate-100",children:[(0,a.jsx)(d.Label,{className:"text-sm font-medium text-slate-700",children:"Recipient Receives In"}),(0,a.jsx)("div",{className:"flex gap-4",children:["CNY","MWK","ZMW"].filter(e=>e!==t).map(t=>(0,a.jsxs)("label",{className:`
               flex-1 cursor-pointer rounded-lg border p-3 flex items-center justify-center gap-2 transition-all
               ${e===t?"bg-white border-indigo-500 shadow-sm ring-1 ring-indigo-500 text-indigo-700 font-bold":"bg-white border-slate-200 text-slate-600 hover:border-slate-300"}
             `,children:[(0,a.jsx)("input",{type:"radio",name:"targetCurrency",value:t,checked:e===t,onChange:e=>l(e.target.value),className:"hidden"}),t]},t))})]})}let T=(0,x.default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var F=e.i(64264);function R({flowType:e,onChange:t}){return(0,a.jsxs)("div",{className:"flex bg-white rounded-lg p-1 border border-slate-200 shadow-sm",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>t("INTERNATIONAL"),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${"INTERNATIONAL"===e?"bg-slate-900 text-white shadow-sm":"text-slate-600 hover:bg-slate-50"}`,children:[(0,a.jsx)(T,{size:14,className:"inline mr-1"}),"International"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>t("SAME"),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${"SAME"===e?"bg-slate-900 text-white shadow-sm":"text-slate-600 hover:bg-slate-50"}`,children:[(0,a.jsx)(F.RefreshCw,{size:14,className:"inline mr-1"}),"Same Currency"]})]})}function L(){let e=n("SendMoney"),{form:t,setForm:l,targetCurrency:s,setTargetCurrency:x,flowType:j,setFlowType:N,fundingSource:w,setFundingSource:k,payoutMethod:S,setPayoutMethod:T,loading:F,error:L,result:Z,setResult:E,walletBalance:I,receiverName:P,setReceiverName:$,receiverLoading:K,suggestions:D,showSuggestions:O,setSuggestions:Y,setShowSuggestions:U,previewRate:V,previewConverted:q,previewLoading:H,previewError:G,previewFee:J,amountNumber:Q,onChange:X,onSubmit:ee}=function(e){let a=(0,g.useRouter)(),{user:t,refreshUser:l}=(0,v.useAuth)(),[n,r]=(0,p.useState)({receiver_id:"",amount:"",currency:"MWK",description:"",channel:"web",category:"transfer"}),[s,i]=(0,p.useState)("CNY"),[c,o]=(0,p.useState)("INTERNATIONAL"),[d,u]=(0,p.useState)("wallet_balance"),[m,h]=(0,p.useState)(""),[b,x]=(0,p.useState)(!1),[f,j]=(0,p.useState)(null),[N,w]=(0,p.useState)(null),[k,_]=(0,p.useState)(0),[M,S]=(0,p.useState)(null),[z,W]=(0,p.useState)(!1),[A,B]=(0,p.useState)([]),[T,F]=(0,p.useState)(!1),[R,L]=(0,p.useState)(null),[Z,E]=(0,p.useState)(null),[I,P]=(0,p.useState)(!1),[$,K]=(0,p.useState)(null),[D,O]=(0,p.useState)(null),Y=(0,p.useMemo)(()=>Number(n.amount||0),[n.amount]),U=(0,p.useMemo)(()=>{let e=String(t?.countryCode||"").toUpperCase();return"CN"===e?"CNY":"MW"===e?"MWK":"ZM"===e?"ZMW":"MWK"},[t?.countryCode]),[V,q]=(0,p.useState)(!1);(0,p.useEffect)(()=>{!V&&U&&"MWK"===n.currency&&"MWK"!==U&&(r(e=>({...e,currency:U})),q(!0))},[U,V,n.currency]),(0,p.useEffect)(()=>{(0,y.apiFetch)("/wallets").then(e=>{if(e&&e.wallets&&e.wallets.length>0){let a=e.wallets.find(e=>e.currency===n.currency)||e.wallets[0];_(parseFloat(a.available_balance||a.balance||"0"))}}).catch(()=>{})},[n.currency]),(0,p.useEffect)(()=>{let e=!0;return(async()=>{if(!n.currency||!s||!Y||Y<=0){L(null),E(null),K(null);return}P(!0),K(null);try{let a=await (0,y.apiFetch)("/forex/calculate",{method:"POST",body:JSON.stringify({from:n.currency,to:s,amount:Y})}).catch(()=>null),t="number"==typeof a?.rate?a.rate:"string"==typeof a?.rate?parseFloat(a?.rate):null,l="number"==typeof a?.converted_amount?a.converted_amount:"string"==typeof a?.converted_amount?parseFloat(a.converted_amount):null,r="number"==typeof a?.fee_amount?a.fee_amount:"string"==typeof a?.fee_amount?parseFloat(a.fee_amount):null;if(!e)return;L(t),E(l??(t?Y*t:null)),O(r??null)}catch(a){if(!e)return;K(a?.message||"Failed to load rate"),L(null),E(null)}finally{if(!e)return;P(!1)}})(),()=>{e=!1}},[n.currency,s,Y]),(0,p.useEffect)(()=>{let e=setTimeout(async()=>{let e=n.receiver_id.trim();if(e.length<3){B([]),F(!1),S(null);return}if(16===e.length&&/^\d+$/.test(e)){F(!1),W(!0);try{let a=await (0,y.apiFetch)(`/wallets/lookup?address=${e}`);a&&a.name?S(a.name):S(null)}catch(e){S(null)}finally{W(!1)}return}if(S(null),e.length>=3&&e.length<16){W(!0);try{let a=await (0,y.apiFetch)(`/wallets/search?q=${e}`);Array.isArray(a)&&a.length>0?(B(a),F(!0)):(B([]),F(!1))}catch(e){B([]),F(!1)}finally{W(!1)}}},400);return()=>clearTimeout(e)},[n.receiver_id]);let H=async t=>{if(t.preventDefault(),!b){x(!0),j(null),w(null);try{if(!(0,y.isAuthenticated)())throw Error("Please login to send a payment");let e=C(n.currency,k).find(e=>e.value===d),a=e?.channel||"web";if(!m)throw Error("Please select a payout method");let t={receiver_wallet_number:String(n.receiver_id||"").trim(),amount:Number(n.amount),currency:n.currency,description:n.description,channel:"mobile_money"===a?"mobile":"wallet"===a?"web":"bank"===a||"card"===a?"api":"web",category:d||n.category},r=await (0,y.apiFetch)("/payments/initiate",{method:"POST",body:JSON.stringify(t)});!r.receiver_name&&M&&(r.receiver_name=M),w(r);try{await l()}catch(e){console.warn("Failed to refresh user balance",e)}(0,y.apiFetch)("/wallets").then(e=>{if(e&&e.wallets&&e.wallets.length>0){let a=e.wallets.find(e=>e.currency===n.currency)||e.wallets[0],t=parseFloat(a.available_balance||a.balance||"0");_(t)}})}catch(n){let t=n?.data?.error||n?.message||"Payment failed",l=String(t).toLowerCase();n?.status===401||l.includes("invalid token")?(j("Please login to continue"),setTimeout(()=>a.push("/login"),600)):l.includes("duplicate request")?j(e("errors.duplicateRequest")):l.includes("insufficient balance")?j(e("errors.insufficientBalance")):j(t)}finally{x(!1)}}};return{form:n,setForm:r,targetCurrency:s,setTargetCurrency:i,flowType:c,setFlowType:o,fundingSource:d,setFundingSource:u,payoutMethod:m,setPayoutMethod:h,loading:b,error:f,result:N,setResult:w,walletBalance:k,receiverName:M,setReceiverName:S,receiverLoading:z,suggestions:A,showSuggestions:T,setSuggestions:B,setShowSuggestions:F,previewRate:R,previewConverted:Z,previewLoading:I,previewError:$,previewFee:D,amountNumber:Y,onChange:e=>{let{name:a,value:t}=e.target;r(e=>({...e,[a]:t}))},onSubmit:H}}(e),ea=t.currency&&s&&Q>0;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(c.default,{title:e("title"),subtitle:e("subtitle"),variant:"hero"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,a.jsxs)(r.Card,{className:"border-slate-200 shadow-sm overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-slate-50 border-b border-slate-100 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[(0,a.jsx)(m.Send,{size:20,className:"mr-2 text-indigo-600"}),e("paymentDetails")]}),(0,a.jsx)(R,{flowType:j,onChange:N})]})}),(0,a.jsx)(r.CardContent,{className:"p-6",children:(0,a.jsxs)("form",{id:"payment-form",onSubmit:ee,className:"space-y-8",children:[(0,a.jsx)(W,{value:t.receiver_id,onChange:X,loading:K,suggestions:D,showSuggestions:O,setShowSuggestions:U,onSelectSuggestion:e=>{l(a=>({...a,receiver_id:e})),Y([]),U(!1)},receiverName:P}),(0,a.jsx)(A,{amount:t.amount,currency:t.currency,onChange:X}),"INTERNATIONAL"===j&&(0,a.jsx)(B,{targetCurrency:s,sourceCurrency:t.currency,onChange:e=>x(e)}),(0,a.jsx)(_,{currency:t.currency,walletBalance:I,value:w,onChange:k}),(0,a.jsx)(M,{targetCurrency:s,value:S,onChange:T}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(d.Label,{className:"text-sm font-medium text-slate-700",children:"Reference / Note (Optional)"}),(0,a.jsx)(o.Input,{name:"description",value:t.description,onChange:X,placeholder:"What is this payment for?",className:"border-slate-200 h-11"})]}),(0,a.jsx)(u.Button,{type:"submit",disabled:F,className:"w-full h-12 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold text-lg shadow-lg shadow-indigo-200 transition-all !text-white",children:F?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Loader2,{className:"mr-2 h-5 w-5 animate-spin"}),"Processing Securely..."]}):(0,a.jsxs)(a.Fragment,{children:["Confirm & Send Payment",(0,a.jsx)(f,{className:"ml-2 h-5 w-5"})]})})]})})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[ea&&(0,a.jsx)(i,{from:t.currency,to:s,amount:Q,rate:V,converted:q,loading:H,fee:J,error:G}),L&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl flex items-start shadow-sm animate-in fade-in slide-in-from-top-2",children:[(0,a.jsx)(b.AlertCircle,{className:"h-5 w-5 mr-2 mt-0.5 shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:"Transaction Failed"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:L})]})]}),Z&&(0,a.jsx)(z,{result:Z,amount:Q,currency:t.currency,receiverName:P,onReset:()=>{l(e=>({...e,amount:"",description:"",receiver_id:""})),E(null),$(null)}})]})]})]})}e.s(["default",()=>L],62466)}]);